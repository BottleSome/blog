<!--LoadingArea-->
<style>
body{
	margin:0 auto;
	overflow-x:hidden;
}
.loading{
	position:fixed;
	opacity:1;
	z-index:200;
	width:100%;
	height:100%;
	margin:0 auto;
	background-color:#FFFFFF;
	transition:1s ease;
}
.loadingpic{
	position:relative;
	margin:0 auto;
	left:50%;
	top:50%;
	transform:translate(-50%,-50%);
}
</style>
<div class='loading' id='loading'><img src='./loadingcloth.gif' class='loadingpic'></img></div>
<!--LoadingAreaEnd-->
<div id='container'>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<!--[MainTitle]--><title>Centos6中Multicraft的安装和基本问题-Bottle</title><!--[MainTitleEnd]-->
<!--description-->
<meta name="description" content="本帖主体内容为绿帽云(blog.loadyun.com)的安装方法，经过试验本人在部分地方进行了修正....本内容修改前原文来自：http://zy.mcbar.cc/thread-62-1-2.ht" />
<!--Keywords-->
<meta name="keywords" content="咸鱼技术,Bottle" />
</head>
<body>
<!--[PostTitle]-->Centos6中Multicraft的安装和基本问题<!--[PostTitleEnd]-->
<!--[PostDate]-->20171105<!--[PostDateEnd]-->
<!--[PostContent]--><p style="text-align: center;"><span style="color: #ff0000;">本帖主体内容为绿帽云(blog.loadyun.com)的安装方法，</span></p><p style="text-align: center;"><span style="color: #ff0000;">经过试验本人在部分地方进行了修正....</span></p><p style="text-align: center;">本内容修改前原文来自：<a href="http://zy.mcbar.cc/thread-62-1-2.html">http://zy.mcbar.cc/thread-62-1-2.html</a></p><hr /><h3 style="text-align: center;">1.首先安装Java：这里给出的是Jdk1.7</h3><p style="text-align: center;">yum install java-1.7.0-openjdk</p><p style="text-align: center;">接下来安装基本组件</p><p style="text-align: center;">yum install -y unzip zip</p><p style="text-align: center;">yum -y install wget</p><h3 style="text-align: center;">2.然后设置防火墙默认关闭并关闭防火墙：</h3><p style="text-align: center;">chkconfig --level 35 iptables off(注意是两个-)</p><p style="text-align: center;">/etc/init.d/iptables stop</p><p style="text-align: center;">安装GCC：</p><p style="text-align: center;">yum -y install gcc gcc-c++ kernel-devel</p><h3 style="text-align: center;">3.安装并设置MySQL数据库服务的默认启动并启动MySQL数据库</h3><p style="text-align: center;">yum install mysql mysql-server</p><p style="text-align: center;">chkconfig --levels 235 mysqld on(注意是两个-)</p><p style="text-align: center;">/etc/init.d/mysqld start</p><h3 style="text-align: center;">4.开始进行基础MySQL配置</h3><p style="text-align: center;">mysql_secure_installation</p><p style="text-align: center;">-最开始问是否有root密码，直接回车代表没有</p><p style="text-align: center;">-然后他会叫你设置root密码，和注册账号一样需要输入两次密码，期间按下两次回车</p><p style="text-align: center;">-接下来全部按回车直至配置完成</p><h3 style="text-align: center;">5.接下来安装Apache Web服务器：</h3><p style="text-align: center;">-yum install httpd</p><h3 style="text-align: center;">6.设置Apache默认启动并且启动Apache服务：</h3><p style="text-align: center;">chkconfig --levels 235 httpd on(注意是两个-)</p><p style="text-align: center;">/etc/init.d/httpd start</p><h3 style="text-align: center;">7.接下来安装脚本语言PHP以及其必备组件：</h3><p style="text-align: center;">yum install php</p><p style="text-align: center;">yum install php-mysql php-gd php-imap php-ldap php-odbc php-pear php-xml php-xmlrpc PHP</p><h3 style="text-align: center;">8.然后 vi /etc/selinux/config 把 SELINUX=enforcing 注释掉：</h3><p style="text-align: center;">#SELINUX=enforcing</p><p style="text-align: center;">然后新加一行为：</p><p style="text-align: center;">SELINUX=disabled（有时候已经有了这个配置就不用管）</p><p style="text-align: center;">避免出现蛋疼的403</p><p style="text-align: center;">接下来配置保护文件夹和.htaccess</p><p style="text-align: center;">打开apache的配置文件httpd.conf</p><p style="text-align: center;">查找 Options FollowSymLinks AllowOverride None</p><p style="text-align: center;">在这行的上方还有一个&lt;Directory&gt;</p><p style="text-align: center;">在后面加一行变成：</p><p style="text-align: center;"><span style="color: #ff0000;">&lt;Directory /var/www/html/你的面板的网页文件/protected&gt;</span></p><p style="text-align: center;">(一般来说就是/var/www/html/multicraft/protected)</p><p style="text-align: center;">接下来将Options那行改成</p><p style="text-align: center;"><span style="color: #ff0000;">Options FollowSymLinks AllowOverride All</span></p><p style="text-align: center;">来启动.htaccess</p><p style="text-align: center;">接下来重启Apache服务使配置生效：</p><p style="text-align: center;">/etc/init.d/httpd restart</p><h3 style="text-align: center;">9.接下来创建数据库:</h3><p style="text-align: center;">输入   mysql -uroot -p你的密码</p><p style="text-align: center;">回车进入mysql系统后输入</p><p style="text-align: center;">CREATE DATABASE multicraft_panel;</p><p style="text-align: center;">CREATE DATABASE multicraft_daemon;</p><p style="text-align: center;">之后输入exit;即可离开</p><h2 style="text-align: center;">最关键的几步：安装Multicraft</h2><h3 style="text-align: center;">10.下载Multicraft</h3><p style="text-align: center;">32位输入： wget http://www.multicraft.org/download -O multicraft.tar.gz</p><p style="text-align: center;">64位输入：wget http://www.multicraft.org/download?arch=linux64 -O multicraft.tar.gz</p><h3 style="text-align: center;">11.下载完成后用</h3><p style="text-align: center;">tar xvzf multicraft.tar.gz</p><p style="text-align: center;">来解压下载好的包</p><p style="text-align: center;">解压完毕后输入 chmod -R 777 multicraft</p><p style="text-align: center;">给予安装目录权限</p><p style="text-align: center;">接着下载中文语言包，输入命令 wget http://www.multicraft.org/files/translation/multicraft-translation-zh.zip</p><p style="text-align: center;">解压语言包，输入命令 unzip multicraft-translation-zh.zip</p><p style="text-align: center;">接下来将语言包文件覆盖至protect里面的message即可</p><h3 style="text-align: center;">12.  cd multicraft</h3><p style="text-align: center;">./setup.sh</p><p style="text-align: center;">进入主要安装</p><p style="text-align: center;">Run each Minecraft server under its own user? (Multicraft will create system users) 在每个Minecraft服务器自己的用户下运行服务器吗（Multicraft会创建系统用户）？</p><p style="text-align: center;">这里输入n，如果你是服务器供应商，有很多服务器运行，出于安全考虑，请输入y。</p><p style="text-align: center;">Run Multicraft under this user 在这个用户下运行Multicraft，默认是minecraft，回车即可。</p><p style="text-align: center;">出于安全考虑，请不要使用root用户运行Multicraft！</p><p style="text-align: center;">User not found. Create user ‘minecraft’ on start of installation? 用户没找到。在安装开始时创建用户“minecraft“吗？</p><p style="text-align: center;">回车即可。</p><p style="text-align: center;">Install Multicraft in 安装Multicraft到哪里？默认是用户minecraft主目录下的multicraft文件夹，</p><p style="text-align: center;">回车即可。</p><p style="text-align: center;">If you have a license key you can enter it now 如果你有一个密钥可以现在输入，默认没有，</p><p style="text-align: center;">回车即可。</p><p style="text-align: center;">If you control multiple machines from one control panel you need to assign each daemona unique ID (requires a Dynamic or custom license). Daemon ID?</p><p style="text-align: center;">如果你从一个控制面板控制多个机器你需要分配每个服务端程序一个唯一的ID（需要一个动态或自定义密钥）。服务端程序ID？这是给服务器供应商用的，在多台机器的时候使用，</p><p style="text-align: center;">接下来选择数据库类型时请选择MySQL，</p><p style="text-align: center;">接着会输入daemon密码，MySQL密码，</p><p style="text-align: center;">之后一路回车就安装完毕了....</p><hr /><p style="text-align: center;">进入install.php要输入两次密码，</p><p style="text-align: center;">两次都可以是root账户和其MySQL密码</p><p style="text-align: center;">流程进行完后，默认/home/minecraft/multicraft/bin/multicraft start   可以运行multicraft daemon服务</p><p style="text-align: center;"><span style="color: #ff0000;">如果你在之前的配置中输入了daemon密码，并且面板显示</span></p><p class="section" style="text-align: center;"><span style="color: #ff0000;">Authentication failed!</span></p><p style="text-align: center;"><span style="color: #ff0000;">请在protected/config/config.php修改daemon密码使其与multicraft.conf中daemon密码匹配！</span></p>&nbsp;<hr /><h2 style="text-align: center;">-可能发生的问题-</h2><h3 style="text-align: center;">1.Q：面板出现<span style="color: #ff0000;"><i><em>Failed</em> <em>to</em> <em>adapt</em> server configuration</i></span>问题</h3><p style="text-align: center;">A：删除server.properties后试试，不行的话chmod -R 777 服务器文件夹试试，再不行就试试chown -R mc#:mc# 服务器文件夹（#号为服务器ID）</p><p style="text-align: center;">这样做了还不行？！终极方法：chmod -R 777 servers （/home/minecraft/multicraft/servers文件夹）</p><h3 style="text-align: center;">2.Q：腾讯云和阿里云开服出现无法访问网页</h3><p style="text-align: center;">A：请在安全组开放开服端口和网页80端口</p><h3 style="text-align: center;">3.Q为什么控制台打中文会出现???或者乱码</h3><p style="text-align: center;">A：请修改jar里面的核心conf文件，将encode和decode之前的#号去掉，把后面的system（或者其他的）改成utf-8（两个都要改）</p><h3 style="text-align: center;">4.Q为什么面板显示Error500?(如下图错误报告)</h3><p style="text-align: center;"><a href="https://cdn2.imbottle.com/uploads/2017/07/TIMpic20170724220608.png"><img class="size-medium wp-image-1165 aligncenter" src="https://cdn2.imbottle.com/uploads/2017/07/TIMpic20170724220608-300x250.png" alt="" width="300" height="250" /></a></p><p style="text-align: center;">A:首先尝试运行命令service mysqld restart，如果不管用，修改multicraft根目录下的multicraft.conf和</p><p style="text-align: center;">网站目录里protected/config目录里面的config.php文件，修改所有的数据库连接IP（如果是127.0.0.1就改成localhost,反之亦然）</p><p style="text-align: center;">然后重启multicraft服务就OK了！(默认：/home/minecraft/multicraft/bin/multicraft restart)</p><h3 style="text-align: center;">5.Q为什么multicraft连接daemon出现Permission denied</h3><p style="text-align: center;"><a href="https://cdn2.imbottle.com/uploads/2017/07/TIMpic20170724221406.png"><img class="alignnone size-medium wp-image-1166" src="https://cdn2.imbottle.com/uploads/2017/07/TIMpic20170724221406-300x76.png" alt="" width="300" height="76" /></a></p><p style="text-align: center;">A：daemon password网页要和后端保持一致。检查数据库密码是否改变</p><p style="text-align: center;">这个时候稍等一下，重启multicraft,mysql,httpd服务说不定会好~</p><!--[PostContentEnd]-->
<!--[PostTag]-->咸鱼技术<!--[PostTagEnd]-->
<!--[PostID]-->177<!--[PostIDEnd]-->
<div style='display:none;'><!--[PageType]-->post.html<!--[PageTypeEnd]--></div>
<script src="./main.js?233"></script>
<script>B.tpcheck();</script>
</body>
</div>
