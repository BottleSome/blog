<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="本帖主体内容为绿帽云(blog.loadyun.com)的安装方法，经过试验本人在部分地方进行了修正....本内容修改前原文来自：http://zy.mcbar.cc/thread-62-1-2.ht" /><meta name="keywords" content="咸鱼技术,Bottle小站" /></head><!--[LoadingArea]--><div id='container'><style>#container{opacity:0;word-wrap:break-word;word-break:break-all;max-width:50%;overflow:hidden}</style>{(MainTitle)}<title>Centos6中Multicraft的安装和基本问题-Bottle小站</title>{(MainTitleEnd)}<body>{(PostTitle)}Centos6中Multicraft的安装和基本问题{(PostTitleEnd)}{(PostDate)}20171105{(PostDateEnd)}{(PostContent)}<p{{s}}style="text-align:{{s}}center;"><span{{s}}style="color:{{s}}#ff0000;">本帖主体内容为绿帽云(blog.loadyun.com)的安装方法，</span></p><p{{s}}style="text-align:{{s}}center;"><span{{s}}style="color:{{s}}#ff0000;">经过试验本人在部分地方进行了修正....</span></p><p{{s}}style="text-align:{{s}}center;">本内容修改前原文来自：<a{{s}}href="http://zy.mcbar.cc/thread-62-1-2.html">http://zy.mcbar.cc/thread-62-1-2.html</a></p><hr{{s}}/><h3{{s}}style="text-align:{{s}}center;">1.首先安装Java：这里给出的是Jdk1.7</h3><p{{s}}style="text-align:{{s}}center;">yum{{s}}install{{s}}java-1.7.0-openjdk</p><p{{s}}style="text-align:{{s}}center;">接下来安装基本组件</p><p{{s}}style="text-align:{{s}}center;">yum{{s}}install{{s}}-y{{s}}unzip{{s}}zip</p><p{{s}}style="text-align:{{s}}center;">yum{{s}}-y{{s}}install{{s}}wget</p><h3{{s}}style="text-align:{{s}}center;">2.然后设置防火墙默认关闭并关闭防火墙：</h3><p{{s}}style="text-align:{{s}}center;">chkconfig{{s}}--level{{s}}35{{s}}iptables{{s}}off(注意是两个-)</p><p{{s}}style="text-align:{{s}}center;">/etc/init.d/iptables{{s}}stop</p><p{{s}}style="text-align:{{s}}center;">安装GCC：</p><p{{s}}style="text-align:{{s}}center;">yum{{s}}-y{{s}}install{{s}}gcc{{s}}gcc-c++{{s}}kernel-devel</p><h3{{s}}style="text-align:{{s}}center;">3.安装并设置MySQL数据库服务的默认启动并启动MySQL数据库</h3><p{{s}}style="text-align:{{s}}center;">yum{{s}}install{{s}}mysql{{s}}mysql-server</p><p{{s}}style="text-align:{{s}}center;">chkconfig{{s}}--levels{{s}}235{{s}}mysqld{{s}}on(注意是两个-)</p><p{{s}}style="text-align:{{s}}center;">/etc/init.d/mysqld{{s}}start</p><h3{{s}}style="text-align:{{s}}center;">4.开始进行基础MySQL配置</h3><p{{s}}style="text-align:{{s}}center;">mysql_secure_installation</p><p{{s}}style="text-align:{{s}}center;">-最开始问是否有root密码，直接回车代表没有</p><p{{s}}style="text-align:{{s}}center;">-然后他会叫你设置root密码，和注册账号一样需要输入两次密码，期间按下两次回车</p><p{{s}}style="text-align:{{s}}center;">-接下来全部按回车直至配置完成</p><h3{{s}}style="text-align:{{s}}center;">5.接下来安装Apache{{s}}Web服务器：</h3><p{{s}}style="text-align:{{s}}center;">-yum{{s}}install{{s}}httpd</p><h3{{s}}style="text-align:{{s}}center;">6.设置Apache默认启动并且启动Apache服务：</h3><p{{s}}style="text-align:{{s}}center;">chkconfig{{s}}--levels{{s}}235{{s}}httpd on(注意是两个-)</p><p{{s}}style="text-align:{{s}}center;">/etc/init.d/httpd{{s}}start</p><h3{{s}}style="text-align:{{s}}center;">7.接下来安装脚本语言PHP以及其必备组件：</h3><p{{s}}style="text-align:{{s}}center;">yum{{s}}install{{s}}php</p><p{{s}}style="text-align:{{s}}center;">yum{{s}}install{{s}}php-mysql{{s}}php-gd{{s}}php-imap{{s}}php-ldap{{s}}php-odbc{{s}}php-pear{{s}}php-xml{{s}}php-xmlrpc{{s}}PHP</p><h3{{s}}style="text-align:{{s}}center;">8.然后{{s}}vi{{s}}/etc/selinux/config{{s}}把{{s}}SELINUX=enforcing{{s}}注释掉：</h3><p{{s}}style="text-align:{{s}}center;">#SELINUX=enforcing</p><p{{s}}style="text-align:{{s}}center;">然后新加一行为：</p><p{{s}}style="text-align:{{s}}center;">SELINUX=disabled（有时候已经有了这个配置就不用管）</p><p{{s}}style="text-align:{{s}}center;">避免出现蛋疼的403</p><p{{s}}style="text-align:{{s}}center;">接下来配置保护文件夹和.htaccess</p><p{{s}}style="text-align:{{s}}center;">打开apache的配置文件httpd.conf</p><p{{s}}style="text-align:{{s}}center;">查找{{s}}Options{{s}}FollowSymLinks{{s}}AllowOverride{{s}}None</p><p{{s}}style="text-align:{{s}}center;">在这行的上方还有一个&lt;Directory&gt;</p><p{{s}}style="text-align:{{s}}center;">在后面加一行变成：</p><p{{s}}style="text-align:{{s}}center;"><span{{s}}style="color:{{s}}#ff0000;">&lt;Directory{{s}}/var/www/html/你的面板的网页文件/protected&gt;</span></p><p{{s}}style="text-align:{{s}}center;">(一般来说就是/var/www/html/multicraft/protected)</p><p{{s}}style="text-align:{{s}}center;">接下来将Options那行改成</p><p{{s}}style="text-align:{{s}}center;"><span{{s}}style="color:{{s}}#ff0000;">Options{{s}}FollowSymLinks{{s}}AllowOverride{{s}}All</span></p><p{{s}}style="text-align:{{s}}center;">来启动.htaccess</p><p{{s}}style="text-align:{{s}}center;">接下来重启Apache服务使配置生效：</p><p{{s}}style="text-align:{{s}}center;">/etc/init.d/httpd{{s}}restart</p><h3{{s}}style="text-align:{{s}}center;">9.接下来创建数据库:</h3><p{{s}}style="text-align:{{s}}center;">输入{{s}} {{s}}mysql{{s}}-uroot{{s}}-p你的密码</p><p{{s}}style="text-align:{{s}}center;">回车进入mysql系统后输入</p><p{{s}}style="text-align:{{s}}center;">CREATE{{s}}DATABASE{{s}}multicraft_panel;</p><p{{s}}style="text-align:{{s}}center;">CREATE{{s}}DATABASE{{s}}multicraft_daemon;</p><p{{s}}style="text-align:{{s}}center;">之后输入exit;即可离开</p><h2{{s}}style="text-align:{{s}}center;">最关键的几步：安装Multicraft</h2><h3{{s}}style="text-align:{{s}}center;">10.下载Multicraft</h3><p{{s}}style="text-align:{{s}}center;">32位输入：{{s}}wget{{s}}http://www.multicraft.org/download{{s}}-O{{s}}multicraft.tar.gz</p><p{{s}}style="text-align:{{s}}center;">64位输入：wget{{s}}http://www.multicraft.org/download?arch=linux64{{s}}-O{{s}}multicraft.tar.gz</p><h3{{s}}style="text-align:{{s}}center;">11.下载完成后用</h3><p{{s}}style="text-align:{{s}}center;">tar{{s}}xvzf{{s}}multicraft.tar.gz</p><p{{s}}style="text-align:{{s}}center;">来解压下载好的包</p><p{{s}}style="text-align:{{s}}center;">解压完毕后输入{{s}}chmod{{s}}-R{{s}}777{{s}}multicraft</p><p{{s}}style="text-align:{{s}}center;">给予安装目录权限</p><p{{s}}style="text-align:{{s}}center;">接着下载中文语言包，输入命令{{s}}wget{{s}}http://www.multicraft.org/files/translation/multicraft-translation-zh.zip</p><p{{s}}style="text-align:{{s}}center;">解压语言包，输入命令{{s}}unzip{{s}}multicraft-translation-zh.zip</p><p{{s}}style="text-align:{{s}}center;">接下来将语言包文件覆盖至protect里面的message即可</p><h3{{s}}style="text-align:{{s}}center;">12.{{s}} cd{{s}}multicraft</h3><p{{s}}style="text-align:{{s}}center;">./setup.sh</p><p{{s}}style="text-align:{{s}}center;">进入主要安装</p><p{{s}}style="text-align:{{s}}center;">Run{{s}}each{{s}}Minecraft{{s}}server{{s}}under{{s}}its{{s}}own{{s}}user?{{s}}(Multicraft{{s}}will{{s}}create{{s}}system{{s}}users){{s}}在每个Minecraft服务器自己的用户下运行服务器吗（Multicraft会创建系统用户）？</p><p{{s}}style="text-align:{{s}}center;">这里输入n，如果你是服务器供应商，有很多服务器运行，出于安全考虑，请输入y。</p><p{{s}}style="text-align:{{s}}center;">Run{{s}}Multicraft{{s}}under{{s}}this{{s}}user{{s}}在这个用户下运行Multicraft，默认是minecraft，回车即可。</p><p{{s}}style="text-align:{{s}}center;">出于安全考虑，请不要使用root用户运行Multicraft！</p><p{{s}}style="text-align:{{s}}center;">User{{s}}not{{s}}found.{{s}}Create{{s}}user{{s}}‘minecraft’{{s}}on{{s}}start{{s}}of{{s}}installation?{{s}}用户没找到。在安装开始时创建用户“minecraft“吗？</p><p{{s}}style="text-align:{{s}}center;">回车即可。</p><p{{s}}style="text-align:{{s}}center;">Install{{s}}Multicraft{{s}}in{{s}}安装Multicraft到哪里？默认是用户minecraft主目录下的multicraft文件夹，</p><p{{s}}style="text-align:{{s}}center;">回车即可。</p><p{{s}}style="text-align:{{s}}center;">If{{s}}you{{s}}have{{s}}a{{s}}license{{s}}key{{s}}you{{s}}can{{s}}enter{{s}}it{{s}}now{{s}}如果你有一个密钥可以现在输入，默认没有，</p><p{{s}}style="text-align:{{s}}center;">回车即可。</p><p{{s}}style="text-align:{{s}}center;">If{{s}}you{{s}}control{{s}}multiple{{s}}machines{{s}}from{{s}}one{{s}}control{{s}}panel{{s}}you{{s}}need{{s}}to{{s}}assign{{s}}each{{s}}daemona{{s}}unique{{s}}ID{{s}}(requires{{s}}a{{s}}Dynamic{{s}}or{{s}}custom{{s}}license).{{s}}Daemon{{s}}ID?</p><p{{s}}style="text-align:{{s}}center;">如果你从一个控制面板控制多个机器你需要分配每个服务端程序一个唯一的ID（需要一个动态或自定义密钥）。服务端程序ID？这是给服务器供应商用的，在多台机器的时候使用，</p><p{{s}}style="text-align:{{s}}center;">接下来选择数据库类型时请选择MySQL，</p><p{{s}}style="text-align:{{s}}center;">接着会输入daemon密码，MySQL密码，</p><p{{s}}style="text-align:{{s}}center;">之后一路回车就安装完毕了....</p><hr{{s}}/><p{{s}}style="text-align:{{s}}center;">进入install.php要输入两次密码，</p><p{{s}}style="text-align:{{s}}center;">两次都可以是root账户和其MySQL密码</p><p{{s}}style="text-align:{{s}}center;">流程进行完后，默认/home/minecraft/multicraft/bin/multicraft{{s}}start{{s}} {{s}}可以运行multicraft{{s}}daemon服务</p><p{{s}}style="text-align:{{s}}center;"><span{{s}}style="color:{{s}}#ff0000;">如果你在之前的配置中输入了daemon密码，并且面板显示</span></p><p{{s}}class="section"{{s}}style="text-align:{{s}}center;"><span{{s}}style="color:{{s}}#ff0000;">Authentication{{s}}failed!</span></p><p{{s}}style="text-align:{{s}}center;"><span{{s}}style="color:{{s}}#ff0000;">请在protected/config/config.php修改daemon密码使其与multicraft.conf中daemon密码匹配！</span></p>&nbsp;<hr{{s}}/><h2{{s}}style="text-align:{{s}}center;">-可能发生的问题-</h2><h3{{s}}style="text-align:{{s}}center;">1.Q：面板出现<span{{s}}style="color:{{s}}#ff0000;"><i><em>Failed</em>{{s}}<em>to</em>{{s}}<em>adapt</em>{{s}}server{{s}}configuration</i></span>问题</h3><p{{s}}style="text-align:{{s}}center;">A：删除server.properties后试试，不行的话chmod{{s}}-R{{s}}777{{s}}服务器文件夹试试，再不行就试试chown{{s}}-R{{s}}mc#:mc#{{s}}服务器文件夹（#号为服务器ID）</p><p{{s}}style="text-align:{{s}}center;">这样做了还不行？！终极方法：chmod{{s}}-R{{s}}777{{s}}servers{{s}}（/home/minecraft/multicraft/servers文件夹）</p><h3{{s}}style="text-align:{{s}}center;">2.Q：腾讯云和阿里云开服出现无法访问网页</h3><p{{s}}style="text-align:{{s}}center;">A：请在安全组开放开服端口和网页80端口</p><h3{{s}}style="text-align:{{s}}center;">3.Q为什么控制台打中文会出现???或者乱码</h3><p{{s}}style="text-align:{{s}}center;">A：请修改jar里面的核心conf文件，将encode和decode之前的#号去掉，把后面的system（或者其他的）改成utf-8（两个都要改）</p><h3{{s}}style="text-align:{{s}}center;">4.Q为什么面板显示Error500?(如下图错误报告)</h3><p{{s}}style="text-align:{{s}}center;"><a{{s}}href="https://cdn2.imbottle.com/uploads/2017/07/TIMpic20170724220608.png"><img{{s}}class="size-medium{{s}}wp-image-1165{{s}}aligncenter"{{s}}src="https://cdn2.imbottle.com/uploads/2017/07/TIMpic20170724220608-300x250.png"{{s}}alt=""{{s}}width="300"{{s}}height="250"{{s}}/></a></p><p{{s}}style="text-align:{{s}}center;">A:首先尝试运行命令service{{s}}mysqld{{s}}restart，如果不管用，修改multicraft根目录下的multicraft.conf和</p><p{{s}}style="text-align:{{s}}center;">网站目录里protected/config目录里面的config.php文件，修改所有的数据库连接IP（如果是127.0.0.1就改成localhost,反之亦然）</p><p{{s}}style="text-align:{{s}}center;">然后重启multicraft服务就OK了！(默认：/home/minecraft/multicraft/bin/multicraft{{s}}restart)</p><h3{{s}}style="text-align:{{s}}center;">5.Q为什么multicraft连接daemon出现Permission{{s}}denied</h3><p{{s}}style="text-align:{{s}}center;"><a{{s}}href="https://cdn2.imbottle.com/uploads/2017/07/TIMpic20170724221406.png"><img{{s}}class="alignnone{{s}}size-medium{{s}}wp-image-1166"{{s}}src="https://cdn2.imbottle.com/uploads/2017/07/TIMpic20170724221406-300x76.png"{{s}}alt=""{{s}}width="300"{{s}}height="76"{{s}}/></a></p><p{{s}}style="text-align:{{s}}center;">A：daemon{{s}}password网页要和后端保持一致。检查数据库密码是否改变</p><p{{s}}style="text-align:{{s}}center;">这个时候稍等一下，重启multicraft,mysql,httpd服务说不定会好~</p>{(PostContentEnd)}{(PostTag)}咸鱼技术{(PostTagEnd)}{(PostID)}177{(PostIDEnd)}{(PostCover)}{(PostCoverEnd)}<div style='display:none;'>{(PageType)}post.html{(PageTypeEnd)}</div><script src="./main.js?233"></script><script>B.tpcheck();</script></body></div>