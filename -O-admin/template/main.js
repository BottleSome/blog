/*FrontMainJS ver3.1.0 - SomeBottle*/
 /*q.js*/
var md;if("object"!==typeof $){$={ls:[],lss:"",loadset:{},aj:function(a,c,d,h,g,f){if("false"!==a&&a){var l=new XMLHttpRequest,k="",m;for(m in c)k=k+m+"\x3d"+c[m]+"\x26";""!==g&&(a=g+a);k=k.substring(0,k.length-1);"get"==h?l.open("get",a,f):l.open("post",a,f);l.setRequestHeader("Content-type","application/x-www-form-urlencoded");l.send(k);l.onreadystatechange=function(){4==l.readyState&&200==l.status?d.success(l.responseText,a):4==l.readyState&&200!==l.status&&d.failed(l.status,a)};f||(void 0!==l.responseText?d.success(l.responseText,a):d.failed(l.status,a))}}};var SC=function(a){return"body"==a?document.body:"html"==a?document.getElementsByTagName("html")[0]:document.getElementById(a)};$.script=function(a){$.scripturl||($.scripturl=[]);var c=document.createElement("script"),d=!1,h;for(h in $.ls)if($.ls[h]==a){d=!0;break}d||-1!=$.scripturl.indexOf(a)||($.ls[$.ls.length]=a,c.type="text/javascript",c.src=a,$.scripturl.push(a),document.body.appendChild(c))};$.ht=function(a,c,d){d=void 0===d?!0:d;var h=SC(c);if(!h)return console.log("Unable to find the Element:"+c),!1;h.innerHTML=a;os=h.getElementsByTagName("script");for(c=0;c<os.length;c++)if(void 0!==os[c].src&&null!==os[c].src&&""!==os[c].src)$.script(os[c].src);else try{a=os[c].innerHTML,d&&(a=B.r(a,"/*",""),a=B.r(a,"*/","")),setTimeout(a,0)}catch(g){console.log("Page script Error: "+g.message)}os=null};$.tr=function(a){b=a.split("?");return b[1]?b[0]:a};$.dt=function(a){if(1E7<=Number(a)){a=String(a);var c=a.slice(-4),d=c.slice(-2),h=c.substring(0,2);return a.replace(c,"")+"-"+h+"-"+d}return a};$.rmhead=function(a){var c=document.createElement("html");c.innerHTML=a;a=c.getElementsByTagName("clothhead")[0];a.parentNode.removeChild(a);a=[c.innerHTML,a.innerHTML];c.remove();return a};$.addhead=function(a){var c=SC("html").getElementsByTagName("head")[0],d=c.getElementsByTagName("clothhead");if("html"!==c.parentNode.tagName.toLowerCase())return!1;0>=d.length?(d=document.createElement("clothhead"),d.innerHTML=a,c.appendChild(d)):d[0].innerHTML=a};$.title=function(a){var c=SC("html").getElementsByTagName("head")[0],d=c.getElementsByTagName("title");0>=d.length?(d=document.createElement("title"),d.innerHTML=a,c.appendChild(d)):d[0].innerHTML=a};$.ldparse=function(a){var c=document.createElement("html");c.innerHTML=a;(a=(a=c.getElementsByTagName("loadset"))?JSON.parse(a[0].innerHTML):!1)?$.loadset=a:console.log("Failed to initialize loading page.");c.remove()};$.ecls=function(a,c,d,h){d=void 0===d?!1:d;h=void 0===h?!1:h;a=a.split(":");var g=document.getElementsByTagName("html")[0],f;switch(a[0]){case "id":f=document.getElementById(a[1]);break;case "class":f=g.getElementsByClassName(a[1]);break;case "tag":f=g.getElementsByTagName(a[1])}if(h)return f;if(f instanceof Element)d?f.classList.remove(c):f.classList.add(c);else for(var l in f)f[l]instanceof Element&&(d?f[l].classList.remove(c):f[l].classList.add(c))}}if(!B){if(localStorage["obottle-ldpage"]){var e=SC("html").innerHTML,ldlocalused=!0;$.ldparse(localStorage["obottle-ldpage"]);SC("html").innerHTML=e.replace("\x3c!--[LoadingArea]--\x3e",localStorage["obottle-ldpage"])}else ldlocalused=!1;$.aj("./loading.html","",{success:function(a,c){ldlocalused||(B.hr("\x3c!--[LoadingArea]--\x3e",a),$.ldparse(a));localStorage["obottle-ldpage"]=a},failed:function(a){console.log("LoadingPage Load Failed")}},"get","",!0);$.script("./library.js");window.htmls={};var B={moreperpage:0,r:function(a,c,d,h,g){h=void 0===h?!1:h;g=void 0===g?!0:g;if(h)return"("==h?a.replace(new RegExp("\\{\\("+c+"\\)\\}",(g?"g":"")+"i"),d):a.replace(new RegExp("\\{\\["+c+"\\]\\}",(g?"g":"")+"i"),d);if(g)for(;-1!==a.indexOf(c);)a=a.replace(c,d);else a=a.replace(c,d);return a},navlist:{statu:!1,conf:{}},navcurrent:function(a){a=void 0===a?"":a;return((-1==a.indexOf("http")?a:a.replace(window.location.protocol+"//"+window.location.hostname,""))||window.location.pathname).replace(".html","")},navcheck:function(){var a=document.body,c=this.navlist.conf;if(this.navlist.statu){var a=a.getElementsByClassName(c.navclass),d=this.navcurrent(),h;for(h in a){var g=this.navcurrent(a[h].href),f=d.lastIndexOf(g),l=d.length,k=g.length;(d==g||f+k==l&&-1!==f)&&a[h]instanceof Element?a[h].classList.add(c.activeclass):a[h]instanceof Element&&a[h].classList.contains(c.activeclass)&&a[h].classList.remove(c.activeclass)}}},nav:function(a){this.navlist.statu=!0;this.navlist.conf=a},scrolltop:function(a,c){var d=Math.floor(parseInt(document.body.scrollTop)/3),h=Math.pow(a,2)/(2*d),g=0,f=setInterval(function(){var a=document.body.scrollTop;parseInt(a)>2*d?(g+=h,document.body.scrollTop=parseInt(a)-g):parseInt(a)>d?document.body.scrollTop=parseInt(a)-g:parseInt(a)<=d&&(g-=h,g<=c&&(g=c),0>=parseInt(a)?(document.body.scrollTop=0,clearInterval(f)):document.body.scrollTop=parseInt(a)-g)},10)},hc:function(a){return a=a.replace(/&amp;/g,"\x26").replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e")},hr:function(a,c){var d=SC("html").innerHTML;SC("html").innerHTML=this.r(d,a,c)},unrnspace:function(a){a=a.replace(/{{s}}/g," ");a=a.replace(/{{rn}}/g,"\r\n");return a=a.replace(/{{n}}/g,"\n")},deltemptags:function(a){return a.replace(/\{\((.*?)\)\}/g,"")},preventscript:function(){var a=SC("html").getElementsByTagName("script"),c;for(c in a)a[c].src&&-1==$.scripturl.indexOf(a[c].src)&&$.scripturl.push(a[c].src)},dehtml:function(a){return a.replace(/&amp;/g,"\x26").replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&nbsp;/g," ").replace(/&#039;/g,"'").replace(/&#39;/g,"'").replace(/&quot;/g,'"')},gt:function(a,c,d,h){d=void 0===d?!1:d;h=void 0===h?!1:h;d=d?d:SC("html").innerHTML;try{var g=h?d.split(a)[1]:d.split(new RegExp("\\{\\("+a+"\\)\\}","i"))[1],f=h?g.split(c)[0]:g.split(new RegExp("\\{\\("+c+"\\)\\}","i"))[0];return this.dehtml(f)}catch(l){return!1}},lazypre:function(a){var c=document.createElement("div");c.innerHTML=a;a=c.getElementsByTagName("img");for(var d in a)if(a[d].src){var h=a[d].src;a[d].src="data:image/gif;base64,R0lGODlhkAGQAYAAAP///wAAACH5BAEAAAAALAAAAACQAZABAAL/hI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8fksvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFhoeIiYqLjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7vL2+v7CxwsPExcbHyMnKy8zNzs/AwdLT1NXW19jZ2tvc3d7f0NHi4+Tl5ufo6err7O3u7+Dh8vP09fb3+Pn6+/z9/v/w8woMCBBAsaPIgwocKFDBs6fAgxosSJFCtavIgxo8aN/xw7evwIMqTIkSRLmjyJMqXKlSxbunwJM6bMmTRr2ryJM6fOnTx7+vwJNKjQoUSLGj2KNKnSpUybOn0KNarUqVSrWr2KNavWrVy7ev0KNqzYsWTLmj2LNq3atWzbun0LN67cuXTr2r2LN6/evXz7+v0LOLDgwYQLGz6MOLHixYwbO34MObLkyZQrW76MObPmzZw7e/4MOrTo0aRLmz6NOrXq1axbu34NO7bs2bRr276NO7fu3bx7+/4NPLjw4cSLGz+OPLny5cybO38OPbr06dSrW7+OPbv27dy7e/8OPrz48eTLmz+PPr369ezbu38PP778+fTr27+PP7/+/fz7+03/D2CAAg5IYIEGHohgggouyGCDDj4IYYQSTkhhhRZeiGGGGm7IYYcefghiiCKOSGKJJp6IYooqrshiiy6+CGOMMs5IY4023ohjjm0UAAA7";""!==a[d].style.width&&(h=h+"[width]"+a[d].style.width);a[d].setAttribute("data-src","[lazy]"+h);a[d].style.width="100%"}d=c.innerHTML;c.remove();return d},lazycheck:function(){var a=window.innerHeight,c=document.documentElement.scrollTop||document.body.scrollTop,d=document.getElementsByTagName("img"),h;for(h in d)if(a+c>d[h].offsetTop){var g=d[h].getAttribute("data-src");if("undefined"!==g&&g){d[h].setAttribute("data-src","");var f=g.split("[lazy]")[1];-1!==f.indexOf("[width]")?(g=f.split("[width]"),d[h].src=g[0],d[h].style.width=g[1]):(d[h].src=g.split("[lazy]")[1],d[h].style.width="auto")}}},templonload:0,templateloaded:[],tpcheckstatu:!1,loadstatu:!1,tpcheck:function(a,c){c=void 0===c?!1:c;var d=this,h=this;if(!d.tpcheckstatu||(void 0===a?0:a)){d.tpcheckstatu=!0;d.loadshow();var g=d.gt("PageType","PageTypeEnd",c);if(window.templjson)if(window.mainjson||-1===window.templjson.usemain.indexOf(g))if("object"!==typeof showdown)setTimeout(function(){return h.tpcheck(!0,c)},50);else if(localStorage["obottle-ldpage"]){d.preventscript();var f=window.templjson;f.necessary.push(g);g==f.templatehtmls.postlist&&f.necessary.push(f.templatehtmls.postitem);for(var l in f.necessary)if(-1==h.templateloaded.indexOf(f.necessary[l])){h.templonload+=1;var k=!1,m=q("r","template-"+f.necessary[l],"","","");m.c&&(k=!0,g=f.necessary[l],console.log("Template using cache:"+g),window.htmls[g]=m.c,h.templateloaded.push(g),--h.templonload);$.aj(f.necessary[l],"",{success:function(a,c){window.htmls[c]=a;k?m.c!==a?q("w","template-"+c,a,timestamp(),""):q("e","template-"+c,"","",1):(h.templateloaded.push(c),--h.templonload,q("w","template-"+c,a,timestamp(),""))},failed:function(a){console.log("Necessary HTML Load Failed...")}},"get","",!0)}var p=setInterval(function(){0>=h.templonload&&(clearInterval(p),h.renderer(c))},50),f=null}else setTimeout(function(){return h.tpcheck(!0,c)},50);else window.mainjsonrequest||(window.mainjsonrequest=!0,$.aj(window.templjson.mainjson,"",{success:function(a){window.mainjson=JSON.parse(a.replace(/[\r\n]/g,""));d.moreperpage=parseInt(window.mainjson.more_per_page)},failed:function(a){console.log("MainJson Load Failed")}},"get","",!0)),setTimeout(function(){return h.tpcheck(!0,c)},50);else $.aj("template.json","",{success:function(a){window.templjson=JSON.parse(a);return d.tpcheck(!0,c)},failed:function(a){console.log("TemplateJson Load Failed.")}},"get","",!0)}},itempage:0,switchpage:0,nowpage:0,realpage:1,searchw:"",hashexist:!1,rendering:!1,itempagefixer:function(){var a=window.mainjson,c=1,d;for(d in a.dateindex){var h=this.itempage,g=d.replace("post",""),g=a.postindex[g];c<=h&&g.link&&(this.itempage+=1);c+=1}--this.itempage},cd:function(a){for(;-1!==a.indexOf("\x3cifcover\x3e");){var c=B.gt("\x3cifcover\x3e","\x3c/ifcover\x3e",a,!0);a=B.r(a,"\x3cifcover\x3e"+c+"\x3c/ifcover\x3e","")}return a},clothmainrendered:!1,checkfirstrender:function(){var a=window.templjson,c=window.htmls[a.templatehtmls.cloth],a=window.htmls[a.templatehtmls.main];this.clothmainrendered||(console.log("first render"),a=this.r(a,"contents","\x3cdiv id\x3d'contentcontainer'\x3e\x3c/div\x3e",!0),c=this.r(c,"main",a,!0),c=$.rmhead(c),$.ht(this.deltemptags(c[0]),"container"),$.addhead(c[1]),this.clothmainrendered=!0)},back:function(){window.history.go(-1)},renderer:function(a){a=void 0===a?!1:a;var c=this;if(!c.rendering){c.rendering=!0;var d=window.templjson;md=new showdown.Converter;var h=window.htmls[d.templatehtmls.comment],g=c.gt("PageType","PageTypeEnd",a),f=window.mainjson;if(g==d.templatehtmls.post){var l=c.gt("PostContent","PostContentEnd",a),k=c.gt("PostTitle","PostTitleEnd",a),m=c.gt("PostDate","PostDateEnd",a),p=c.gt("PostTag","PostTagEnd",a),n=c.gt("PostID","PostIDEnd",a),f=c.gt("PostCover","PostCoverEnd",a);a=c.gt("MainTitle","MainTitleEnd",a).replace(/<\/?.+?>/g,"");l=c.r(window.htmls[d.templatehtmls.post],"postcontent",c.lazypre(md.makeHtml(c.hc(c.unrnspace(l.trim())))),!0);k=c.r(l,"posttitle",k,!0);l=[];isNaN(m)?p="\u9875\u9762":(l=p.split(","),p="",l.forEach(function(a,c){p=p+'\x3ca href\x3d"'+d.generatehtmls.tags+"#"+encodeURIComponent(a)+'" class\x3d"taglink"\x3e'+a+"\x3c/a\x3e,"}),p=p.substr(0,p.length-1));k=c.r(k,"posttags",p,!0);k=c.r(k,"postdate",$.dt(m),!0);k=c.r(k,"comments",h,!0);n=c.r(k,"pid",n,!0);n=c.r(n,"pagetype",g,!0);n=c.r(n,"PageType","\x3c!--[PageType]","(",!1);n=c.r(n,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1);n=f&&"none"!==f&&""!==f?c.r(n,"postcover",f,!0):c.cd(n);isNaN(m)&&(g=n.split("{(:PostEnd)}")[0]+"\x3c!--PostEnd--\x3e",f="\x3c!--Footer--\x3e"+n.split("{(Footer:)}")[1],n=g+f);c.checkfirstrender();$.title(a);$.ht(c.deltemptags(n),"contentcontainer");anichecker($.ecls($.loadset.listening,"",!1,!0),function(){c.lazycheck()});n=f=null}else if(g==d.templatehtmls.postlist){l=c.gt("PostContent","PostContentEnd",a);a=c.gt("MainTitle","MainTitleEnd",a).replace(/<\/?.+?>/g,"");a=a.replace("-","");k=window.htmls[d.templatehtmls.postlist];m=c.gt("PostListTemplate","PostListTemplateEnd",k);n=c.gt("MoreBtn","MoreBtnEnd",k);k=c.gt("BackBtn","BackBtnEnd",k);m=c.r(m,"morebtn","\x3cdiv id\x3d'morebtn'\x3e"+n+"\x3c/div\x3e",!0);m=c.r(m,"backbtn","\x3cdiv id\x3d'backbtn'\x3e"+k+"\x3c/div\x3e",!0);l=c.r(m,"postitems","\x3cdiv id\x3d'postitems'\x3e"+md.makeHtml(c.unrnspace(l.trim()))+"\x3c/div\x3e",!0);k=c.r(l,"pagetype",g,!0);k=c.r(k,"PageType","\x3c!--[PageType]","(",!1);k=c.r(k,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1);c.itempage=parseInt(f.posts_per_page);c.itempagefixer();c.checkfirstrender();$.title(a);$.ht(c.deltemptags(k),"contentcontainer");var k=null,r=setInterval(function(){if(c.gt("\x3c!--[PageType]","[PageTypeEnd]--\x3e",!1,!0)!==d.templatehtmls.postlist)return console.log("jumped out of index"),PJAX.sel("contentcontainer"),PJAX.start(),c.switchpage=0,clearInterval(r),!1;c.indexpagechecker()},100)}else if(g==d.templatehtmls.archives){a=c.gt("MainTitle","MainTitleEnd",a).replace(/<\/?.+?>/g,"");var m=window.htmls[d.templatehtmls.archives],h=c.gt("Archives","ArchivesEnd",m),t=c.gt("ArchiveTemplate","ArchiveTemplateEnd",m),C=c.gt("ArchiveItemTemplate","ArchiveItemTemplateEnd",m),y=f.dateindex,v="",u="",z=0;for(l in y){m=y[l].toString().substring(0,4);m!==z&&(z=m,""!==u&&(v=c.r(v,"archiveitems",u,!0),u=""),v+=c.r(t,"archiveyear",m,!0));var n=l.replace("post",""),k=Base64.decode(f.postindex[n].title),m=f.postindex[n].date,A="",A=f.postindex[n].link?f.postindex[n].link+".html":"post-"+n+".html",n=c.r(C,"archiveitemlink",A,!0),n=c.r(n,"archiveitemtitle",k,!0),n=c.r(n,"archiveitemdate",$.dt(m),!0),u=u+n}""!==u&&(v=c.r(v,"archiveitems",u,!0));l=c.r(h,"archives",v+"\x3c/ul\x3e",!0);k=c.r(l,"pagetype",g,!0);k=c.r(k,"PageType","\x3c!--[PageType]","(",!1);k=c.r(k,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1);c.checkfirstrender();$.title(a);$.ht(c.deltemptags(k),"contentcontainer");k=null}else if(g==d.templatehtmls.tags){a=c.gt("MainTitle","MainTitleEnd",a).replace(/<\/?.+?>/g,"");var m=window.htmls[d.templatehtmls.tags],k=c.gt("Tags","TagsEnd",m),D=c.gt("TagItemTemplate","TagItemTemplateEnd",m),l=$.tr(window.location.href),w="",f=f.postindex,x=[];for(n in f)m=f[n].tags.split(","),m.forEach(function(a,c){""!==a&&-1==x.indexOf(a)&&x.push(a)});x.forEach(function(a,d){var f=c.r(D,"tagitemtitle",a,!0),f=c.r(f,"tagitemlink","#"+encodeURIComponent(a),!0);w+=f});c.alltaghtml=w;-1!==l.indexOf("#")&&(f=l.split("#")[1],c.nowtag=f,"alltags"!==f&&(w="\x3cscript\x3eB.taguper('"+f+"');PJAX.sel('contentcontainer');PJAX.start();\x3c/script\x3e"));r=setInterval(function(){if(-1==window.location.href.indexOf(d.generatehtmls.tags)&&-1==window.location.href.indexOf(d.generatehtmls.tags.replace(".html","")))return PJAX.sel("contentcontainer"),PJAX.start(),clearInterval(r),!1;c.tagpagechecker()},100);l=c.r(k,"tags","\x3cdiv id\x3d'contenttags'\x3e"+w+"\x3c/div\x3e",!0);k=c.r(l,"pagetype",g,!0);k=c.r(k,"PageType","\x3c!--[PageType]","(",!1);k=c.r(k,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1);c.checkfirstrender();$.title(a);$.ht(c.deltemptags(k),"contentcontainer");k=null}c.tpcheckstatu=!1;c.rendering=!1;PJAX.autoprevent();PJAX.sel("contentcontainer");PJAX.start();c.navcheck();window.dispatchEvent(PJAX.PJAXFinish)}},nowtag:"",alltaghtml:"",taguper:function(a){a=decodeURIComponent(a);SC("html");var c=this,d=window.htmls[window.templjson.templatehtmls.tags],h=c.gt("TagListTemplate","TagListTemplateEnd",d),g=c.gt("TagListItemTemplate","TagListItemTemplateEnd",d),f=window.mainjson,d=f.dateindex,l=f.postindex,f=[],k="",m;for(m in d)d=m.replace("post",""),-1!==l[d].tags.indexOf(a)&&f.push(d);k+="\x3cul\x3e";f.forEach(function(a,d){var f=l[a],h="post-"+a+".html",m=$.dt(f.date);f.link&&(h=f.link+".html");h=c.r(g,"taglistitemlink",h,!0);h=c.r(h,"taglistitemtitle",Base64.decode(f.title),!0);h=c.r(h,"taglistitemdate",$.dt(m),!0);k+=h});k=c.r(h,"taglist",k,!0);k=c.r(k,"tagcurrent",a,!0);SC("contenttags").innerHTML=k;k=null},tagpagechecker:function(){SC("html");var a=$.tr(window.location.href);-1==a.indexOf("#")?(PJAX.pause(),window.location.replace(a+"#alltags"),PJAX.start()):(a=a.split("#")[1],this.nowtag!==a&&(this.nowtag=a,"alltags"==a?SC("contenttags")&&(SC("contenttags").innerHTML=this.alltaghtml):this.taguper(a),PJAX.start()))},indexpagechecker:function(){SC("html");var a=window.templjson,c=$.tr(decodeURIComponent(window.location.href)),d=window.mainjson,h=parseInt(d.posts_per_page);if(-1!==c.indexOf("#")){this.hashexist=!0;var g=c.split("#")[1];if(-1==c.indexOf("#!")){if(!isNaN(g)){var f=parseInt(g)-1;this.nowpage!==f&&(console.log("hash changed"),this.searchw="",this.nowpage=f,this.itempage=h*f*this.moreperpage,this.itempagefixer(),SC("postitems").innerHTML="",this.more(!0),this.realpage=f+1,this.switchpage=0)}}else{var l="",a=window.htmls[a.templatehtmls.postitem],h=this.gt("PostItem","PostItemEnd",a),a=this.gt("NoItem","NoItemEnd",a),c=c.split("#!")[1];if(c!==this.searchw){var k=function(){SC("postitems")&&SC("morebtn")?(window.scrollTo(0,0),SC("postitems").innerHTML=l,SC("morebtn").style.display="none",PJAX.start()):setTimeout(function(){return k()},200)};this.searchw=c;d=d.postindex;for(f in d){var m=Base64.decode(d[f].title).toLowerCase(),p=Base64.decode(d[f].intro).toLowerCase(),n=d[f].date.toLowerCase(),g=d[f].tags,r=g.toLowerCase(),c=c.toLowerCase();if(-1!==m.indexOf(c)||-1!==p.indexOf(c)||-1!==n.indexOf(c)||-1!==r.indexOf(c))m=B.r(h,"postitemtitle",m,!0),p=B.r(m,"postitemintro",p+"...",!0),n=B.r(p,"postitemdate",$.dt(n),!0),g=B.r(n,"postitemtags",g.replace(/,/g,"\u00b7"),!0),g=d[f].link?B.r(g,"postitemlink",d[f].link+".html",!0):B.r(g,"postitemlink","post-"+f+".html",!0),g=d[f].cover?B.r(g,"postcover",d[f].cover,!0):this.cd(g),l+=g,g=null}""==l&&(l=a);this.tpcheckstatu||this.loadstatu||k()}if(this.tpcheckstatu||this.loadstatu)this.searchw=""}}else this.searchw="",this.hashexist&&(this.realpage=1,this.switchpage=0,this.hashexist=!1)},loadshow:function(){this.loadstatu=!0;if($.loadset.animations){var a=$.loadset.animations["in"],c=$.loadset.animations.out,d;for(d in a)$.ecls(d,a[d]);for(d in c)$.ecls(d,c[d],!0)}},loadhide:function(){this.loadstatu=!1;var a=$.loadset.animations.out,c=$.loadset.animations["in"],d;for(d in a)$.ecls(d,a[d]);for(d in c)$.ecls(d,c[d],!0)},morehtmls:{},more:function(a){a=void 0===a?!1:a;var c=this.itempage+1,d=0,h=0,g="",f=window.mainjson,l=window.htmls[window.templjson.templatehtmls.postitem],k=this.gt("PostItem","PostItemEnd",l),l=this.gt("NoItem","NoItemEnd",l),m=parseInt(f.posts_per_page),p=f.dateindex,n;for(n in p)if(c<=h){if(d<m){var r=n.replace("post",""),p=f.postindex[r];if(p.link)this.itempage+=1,--d;else var t=B.r(k,"postitemtitle",Base64.decode(p.title),!0),t=B.r(t,"postitemintro",Base64.decode(p.intro)+"...",!0),t=B.r(t,"postitemdate",$.dt(p.date),!0),t=B.r(t,"postitemtags",p.tags.replace(/,/g,"\u00b7"),!0),r=B.r(t,"postitemlink","post-"+r+".html",!0),r=p.cover?B.r(r,"postcover",p.cover,!0):this.cd(r),g=g+r;d+=1}}else h+=1;""==g?(g=l,SC("morebtn").style.display="none"):SC("morebtn").style.display="block";this.itempage+=m;this.switchpage>=this.moreperpage-1&&!a?(SC("postitems").innerHTML=g,this.scrolltop(20,2),this.switchpage=0,this.realpage+=1,PJAX.pause(),window.location.href="#"+this.realpage):(SC("postitems").innerHTML=SC("postitems").innerHTML+g,this.switchpage+=1);SC("backbtn")&&(1==this.realpage?SC("backbtn").style.display="none":SC("backbtn").style.display="block");PJAX.start()}};window.addEventListener("scroll",B.lazycheck,!1);window.addEventListener("pjaxstart",function(){B.loadshow()},!1);window.addEventListener("pjaxfinish",function(){B.loadhide()},!1)}function anichecker(a,c){function d(){c();a.removeEventListener(h,d)}var h="",g={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},f;for(f in g)void 0!==a.style[f]&&(h=g[f]);a.addEventListener(h,d)}var mainhost=window.location.host,dt=(new Date).getTime();if(void 0==PJAX||null==PJAX)var PJAX={index:null===window.history.state?1:window.history.state.page,PJAXStart:new CustomEvent("pjaxstart"),PJAXFinish:new CustomEvent("pjaxfinish"),LoadedPage:{},lasthref:window.location.href,preventurl:[],recenturl:"",replace:"",statu:!0,sel:function(a){this.replace=a},jump:function(a){var c=encodeURIComponent(a),d=this,h=!1,g=d.replace;""==g&&(g="contentcontainer");if(-1!==d.recenturl.indexOf("#")&&-1!==a.indexOf("#"))return!1;-1==d.recenturl.indexOf("#")&&-1!==a.indexOf("#")&&(B.nowpage=0);window.dispatchEvent(d.PJAXStart);anichecker($.ecls($.loadset.listening,"",!1,!0),function(){window.scrollTo(0,0);if(d.LoadedPage[c])d.clearevent(),B.tpcheck(!1,d.LoadedPage[c]);else{var f=q("r",c,"","","");f.c&&(h=!0,d.clearevent(),B.tpcheck(!1,f.c));$.aj(a,{},{success:function(g){d.recenturl=a;d.LoadedPage[c]=g;h?f.c!==g?(q("w",c,g,timestamp(),""),d.clearevent(),B.tpcheck(!1,g)):q("e",c,"","",1):(d.clearevent(),B.tpcheck(!1,g),q("w",c,g,timestamp(),""))},failed:function(a){window.dispatchEvent(d.PJAXFinish)}},"get","",!0)}})},pjaxautojump:function(){PJAX.recenturl.split("#")[0]==window.location.href&&(window.history.replaceState(null,null,window.location.href+"#1"),PJAX.jump(window.location.href+"#1"));-1!==window.location.href.indexOf(mainhost)&&PJAX.jump(window.location.href)},clickevent:function(a){if(-1===PJAX.preventurl.indexOf(this.href)&&this.href&&""!=this.href)window.history.pushState(null,null,this.href),a.preventDefault(),PJAX.jump(this.href);else return!0},clearevent:function(){var a=document.getElementsByTagName("a"),c;for(c in a)"function"==typeof a[c].removeEventListener&&a[c].removeEventListener("click",this.clickevent)},start:function(){this.statu=!0;this.recenturl=window.location.href;this.clearevent();var a=document.getElementsByTagName("a"),c;for(c in a){var d=a[c]instanceof Element?a[c].getAttribute("onclick"):null;"function"!=typeof a[c].addEventListener||d||(a[c].setAttribute("pjax",""),a[c].addEventListener("click",this.clickevent,!1))}window.addEventListener("popstate",PJAX.pjaxautojump,!1)},pause:function(){this.statu=!1;window.removeEventListener("popstate",PJAX.pjaxautojump)},autoprevent:function(){var a=document.getElementsByTagName("a"),c=window.location.host,d;for(d in a)void 0!==a[d].href&&-1==a[d].href.indexOf(c)&&this.preventurl.push(a[d].href)}};function q(a,c,d,h,g){"undefined"==typeof localStorage.obottle&&(localStorage.obottle="{}");var f=0,l="",k=JSON.parse(localStorage.obottle),m=[];"undefined"!==typeof k[c]&&(f=k[c].t,l=k[c].h);if("w"==a){k=JSON.parse(localStorage.obottle);a={};a.h=d;a.t=h;a.rt=0;k[c]=a;try{localStorage.obottle=JSON.stringify(k)}catch(n){for(var p in k)(20>=Number(k[p].rt)||172800<=Number(h)-Number(k[p].t))&&delete k[p];localStorage.obottle=JSON.stringify(k)}}else{if("r"==a)return m.t=f,m.c=l,m;"e"==a&&(k=JSON.parse(localStorage.obottle),k[c].rt=Number(k[c].rt)+g,localStorage.obottle=JSON.stringify(k))}}function timestamp(){return(new Date).getTime()}B.tpcheck();