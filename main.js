/*FrontMainJS ver4.5.4 - SomeBottle20211106*/
"use strict";if("object"!=typeof $){var $={},SC=function(a){return"body"==a?document.body:"html"==a?document.getElementsByTagName("html")[0]:document.getElementById(a)};$.loadedScripts=[],$.loadSettings={},$.loadingJS=0,$.ft=function(a,b,c,d,f){if("false"!==a&&a){let g={body:JSON.stringify(b),cache:"default",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),method:d};"get"==d&&delete g.body,a=""===f?a:f+a,fetch(a,g).then(a=>a.text()).then(b=>c.success(b,a)).catch(b=>c.failed(b,a))}},$.script=function(a,b=!1){let c=document.createElement("script"),d=$.loadedScripts.includes(a),f=b?$.attrs(b):{};if(!d){for(var g in $.loadingJS+=1,$.loadedScripts.push(a),c.type="text/javascript",c.src=a,f)c.setAttribute(g,f[g]);document.body.appendChild(c);let b=function(){$.loadingJS-=1,this.removeEventListener("load",b,!1)}.bind(c);c.addEventListener("load",b,!1)}c=null},$.aniChecker=function(a,b){function c(){a.removeEventListener(d,c),b()}let d="",f={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(var g in f)void 0!==a.style[g]&&(d=f[g]);a.addEventListener(d,c)},$.scriptCircle=function(a,b=0){if(0<$.loadingJS)setTimeout(function(){$.scriptCircle(a,b+1)},100);else for(var c in a)setTimeout("try{"+a[c]+"}catch(e){console.log('Page script Error: ' + e.message);}",0)},$.attrs=function(a){let b={};if(a.hasAttributes()){let d=a.attributes;for(var c in d)d[c].name&&d[c].value&&(b[d[c].name]=d[c].value)}return b},$.scriptRestore=function(){return h.replace(/(<script[\s\S]*?>)(?:\/\*)([\s\S]*?)(?:\*\/)(<\/script>)/gi,(a,b,c,d)=>b+c+d)},$.ht=function(a,b,c=!0){let d=SC(b),f=[];if(!d)return console.log("Unable to find the Element:"+e),!1;d.innerHTML=a;let g=d.getElementsByTagName("script");for(var i=0,j=g.length;i<j;i++)if(g[i].src!==void 0&&null!==g[i].src&&""!==g[i].src)$.script(g[i].src,g[i]);else{var k=g[i].innerHTML;c&&(k=$.scriptRestore(k)),f.push(k)}$.scriptCircle(f),d=g=null},$.trimMark=function(c){var d=c;let a=d.split("?");return a[1]?a[0]:d},$.dt=function(a){if(1e7<=+a){let b=a+"",c=b.slice(-4),f=c.slice(-2),d=c.substring(0,2),g=b.replace(c,"");return g+"-"+d+"-"+f}return a},$.rmHead=function(a){let b=document.createElement("html");b.innerHTML=a;let c=b.getElementsByTagName("clothhead")[0];c.parentNode.removeChild(c);let d=[b.innerHTML,c.innerHTML];return b.remove(),c=null,d},$.addHead=function(a){let b=SC("html").getElementsByTagName("head")[0],c=b.getElementsByTagName("clothhead");if("html"!==b.parentNode.tagName.toLowerCase())return!1;if(0>=c.length){let c=document.createElement("clothhead");c.innerHTML=a,b.appendChild(c),c=null}else c[0].innerHTML=a;b=c=null},$.title=function(a){let b=SC("html").getElementsByTagName("head")[0],c=b.getElementsByTagName("title");if(0>=c.length){let c=document.createElement("title");c.innerHTML=a,b.appendChild(te)}else c[0].innerHTML=a},$.ldParse=function(a){let b=document.createElement("html");b.innerHTML=a;let c=b.getElementsByTagName("loadset"),d=!!c&&JSON.parse(c[0].innerHTML);d?$.loadSettings=d:console.log("Failed to initialize loading page."),b.remove(),c=null},$.alterClass=function(a,b,c=!1,d=!1){var f,g=a.split(":"),j=document.getElementsByTagName("html")[0];switch(g[0]){case"id":f=document.getElementById(g[1]);break;case"class":f=j.getElementsByClassName(g[1]);break;case"tag":f=j.getElementsByTagName(g[1]);}if(d)return f;if(!(f instanceof Element))for(var k in f)f[k]instanceof Element?c?f[k].classList.remove(b):f[k].classList.add(b):f=f;else c?f.classList.remove(b):f.classList.add(b);f=j=null}}if(!B){if(localStorage["obottle-ldpage"]){var prevHtml=SC("html").innerHTML,ldLocalUsed=!0;$.ldParse(localStorage["obottle-ldpage"]),SC("html").innerHTML=prevHtml.replace("<loadingarea></loadingarea>",()=>localStorage["obottle-ldpage"])}else var ldLocalUsed=!1;$.ft("./loading.otp.html","",{success:function(a){ldLocalUsed||(B.hr("<loadingarea></loadingarea>",a),$.ldParse(a)),localStorage["obottle-ldpage"]=a},failed:function(){console.log("LoadingPage Load Failed")}},"get",""),$.script("./library.js"),$.script("./search.js"),window.tpHtmls={};var B={morePerPage:0,r:function(a,b,c,d=!1,f=!0){if(d)a="("==d?a.replace(new RegExp("\\{\\("+b+"\\)\\}",(f?"g":"")+"i"),()=>c):a.replace(new RegExp("\\{\\["+b+"\\]\\}",(f?"g":"")+"i"),()=>c);else if(f)for(;-1!==a.indexOf(b);)a=a.replace(b,c);else a=a.replace(b,c);return a},navList:{status:!1,conf:{}},navCurrent:function(a=""){return((-1==a.indexOf("http")?a=a:a.replace(window.location.protocol+"//"+window.location.hostname,""))||window.location.pathname).replace(".html","")},navcheck:function(){let a=this,b=a.navList.conf;if(a.navList.status){let d=document.body.getElementsByClassName(b.navclass),f=a.navCurrent();for(var c in d){let g=a.navCurrent(d[c].href),i=f.lastIndexOf(g),j=f.length,k=g.length;(f==g||i+k==j&&-1!==i)&&d[c]instanceof Element?d[c].classList.add(b.activeclass):d[c]instanceof Element&&(d[c].classList.contains(b.activeclass)?d[c].classList.remove(b.activeclass):g=g)}d=null}},nav:function(a){let b=this;b.navList.status=!0,b.navList.conf=a},scrollbottom:function(){let a=document.documentElement.scrollHeight;window.scrollTo(0,a)},scrolltop:function(a,b){var c=document.body.scrollTop,d=Math.floor(parseInt(c)/3),f=b,g=Math.pow(a,2)/(2*d),i=0,j=setInterval(function(){let a=document.body.scrollTop;parseInt(a)>2*d?(i+=g,document.body.scrollTop=parseInt(a)-i):parseInt(a)>d?document.body.scrollTop=parseInt(a)-i:parseInt(a)<=d&&(i-=g,i<=f&&(i=f),0>=parseInt(a)?(document.body.scrollTop=0,clearInterval(j)):document.body.scrollTop=parseInt(a)-i)},10)},hr:function(a,b){var c=SC("html").innerHTML;SC("html").innerHTML=this.r(c,a,b)},delTempTags:function(a){return a.replace(/\{\((.*?)\)\}/g,"")},preventScript:function(){let a=SC("html").getElementsByTagName("script");for(var b in a)a[b].src&&!$.loadedScripts.includes(a[b].src)&&$.loadedScripts.push(a[b].src);a=null},deHtml:function(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&#039;/g,"'").replace(/&#39;/g,"'").replace(/&quot;/g,"\"")},gt:function(a,b,c=!1,d=!1){let f=c?c:SC("html").innerHTML;try{let c=d?f.split(a)[1]:f.split(new RegExp("\\{\\("+a+"\\)\\}","i"))[1],g=d?c.split(b)[0]:c.split(new RegExp("\\{\\("+b+"\\)\\}","i"))[0];return this.deHtml(g)}catch(a){return!1}},lazyLoad:!0,lazy:a=>{B.lazyLoad=a},lazyPre:function(a){let b=document.createElement("div");b.innerHTML=a;let c=b.getElementsByTagName("img");for(var d in c)if(c[d].src){let a=c[d],b=a.src;a.src="data:image/svg+xml,%3Csvg width='302' height='27' xmlns='http://www.w3.org/2000/svg'%3E%3Cg%3E %3Ctitle%3Ebackground%3C/title%3E %3Crect x='-1' y='-1' width='304' height='29' id='canvas_background' fill='none'/%3E %3Cg id='canvasGrid' display='none'%3E %3Crect id='svg_2' width='100%25' height='100%25' x='0' y='0' stroke-width='0' fill='url(%23gridpattern)'/%3E %3C/g%3E %3C/g%3E %3Cg%3E %3Ctitle%3ELayer 1%3C/title%3E %3Ctext fill='%23000000' stroke='%23000' stroke-width='0' x='129.703125' y='16.303124' id='svg_1' font-size='8' font-family='Helvetica, Arial, sans-serif' text-anchor='start' xml:space='preserve'%3Epic sleeping%3C/text%3E %3C/g%3E %3C/svg%3E",""!==a.style.width&&(b+="[width]"+a.style.width),a.setAttribute("data-src","[lazy]"+b),a.style.width="100%"}let f=b.innerHTML;return b.remove(),c=null,f},lazyCheck:function(){if(!B.lazyLoad)return!1;let a=window.innerHeight,b=document.documentElement.scrollTop||document.body.scrollTop,c=document.getElementsByTagName("img");for(var d in c){let f=c[d].offsetTop;a+b>f&&a+b-f<a&&B.lazyShow(c[d])}c=null},lazyShow:function(a){let b=a.getAttribute("data-src");if("undefined"!==b&&b){a.setAttribute("data-src","");let c=b.split("[lazy]")[1];if(-1!==c.indexOf("[width]")){let b=c.split("[width]");a.src=b[0],a.style.width=b[1]}else a.src=b.split("[lazy]")[1],a.style.width="auto"}},templateOnload:0,templateLoaded:[],tpcheckStatus:!1,loadStatus:!1,tpcheck:function(a=!1,b=!1){let c=this;if(!c.tpcheckStatus||a){c.tpcheckStatus=!0,c.loadshow();let a=c.gt("PageType","PageTypeEnd",b);if(!window.tpJson)$.ft("template.json","",{success:function(a){return window.tpJson=JSON.parse(a),c.tpcheck(!0,b)},failed:function(){console.log("TemplateJson Load Failed.")}},"get","");else if(!window.mainJson&&window.tpJson.usemain.includes(a))$.ft(window.tpJson.mainjson,"",{success:function(a){return window.mainJson=JSON.parse(a.replace(/[\r\n]/g,"")),c.morePerPage=parseInt(window.mainJson.more_per_page),c.tpcheck(!0,b)},failed:function(){console.log("MainJson Load Failed")}},"get","https://cdn.jsdelivr.net/gh/BottleSome/blog@latest/");else if(0<$.loadingJS||!localStorage["obottle-ldpage"])setTimeout(function(){return c.tpcheck(!0,b)},25);else{c.preventScript();let g=window.tpJson;for(var d in g.necessary.push(a),a==g.templatehtmls.postlist&&g.necessary.push(g.templatehtmls.postitem),g.necessary)if(-1==c.templateLoaded.indexOf(g.necessary[d])){c.templateOnload+=1;let a=!1,b=q("r","template-"+g.necessary[d],"","",""),f=window.tpHtmls;if(b.c){a=!0;let i=g.necessary[d];console.log("Preload the template locally: "+i),f[i]=b.c,c.templateLoaded.push(i),c.templateOnload-=1}$.ft(g.necessary[d],"",{success:function(d,g){f[g]=d,a?b.c===d?q("e","template-"+g,"","",1):q("w","template-"+g,d,timestamp(),""):(c.templateLoaded.push(g),c.templateOnload-=1,q("w","template-"+g,d,timestamp(),""))},failed:function(){console.log("Necessary HTML Load Failed...")}},"get","")}var f=setInterval(function(){0>=c.templateOnload&&(clearInterval(f),c.renderer(b))},50);g=null}}},itemPage:0,switchPage:0,currentPageBefore:0,realPage:1,searchWd:"",hashExist:!1,itemPageFixer:function(){let a=this,b=window.mainJson,c=1;for(var d in b.dateindex){let f=a.itemPage,g=d.replace("post",""),i=b.postindex[g];c<=f&&i.link&&(a.itemPage+=1),c+=1}a.itemPage-=1,b=null},cd:function(a){for(;-1!==a.indexOf("<ifcover>");){let b=B.gt("<ifcover>","</ifcover>",a,!0);a=B.r(a,"<ifcover>"+b+"</ifcover>","")}return a},clothFirstRendered:!1,checkFirstRender:function(){let a=this,b=window.tpJson,c=window.tpHtmls,d=c[b.templatehtmls.cloth],f=c[b.templatehtmls.main];if(!a.clothFirstRendered){console.log("Document rendered with clothes.(\u0E51\u2022\u0300\u3142\u2022\u0301)\u0648\u2727");let b=a.r(f,"contents","<div id='contentcontainer'></div>",!0),c=a.r(d,"main",b,!0),g=$.rmHead(c);$.ht(a.delTempTags(g[0]),"container"),$.addHead(g[1]),a.clothFirstRendered=!0,b=c=g=null}},back:function(){window.history.go(-1)},turnback:function(){let a=this.realPage;window.location.href=window.location.protocol+"//"+window.location.host+window.location.pathname+"#"+(1<a?a-1:1)},currentPageType:"",renderer:function(a=!1){let b=this,c=window.tpJson,d=window.tpHtmls,f=d[c.templatehtmls.comment],g=window.mainJson,k=b.gt("MainTitle","MainTitleEnd",a).replace(/<\/?.+?>/g,""),l=b.gt("PageType","PageTypeEnd",a);if(b.currentPageType=l,l==c.templatehtmls.post){let g=b.gt("PostContent","PostContentEnd",a),i=b.gt("PostTitle","PostTitleEnd",a),j=b.gt("PostDate","PostDateEnd",a),m=b.gt("PostTag","PostTagEnd",a),n=b.gt("PostID","PostIDEnd",a),o=b.gt("PostCover","PostCoverEnd",a),p=d[c.templatehtmls.post],q=b.gt("PostTagsTemplate","PostTagsTemplateEnd",p),r=b.gt("PostTagsDelimiter","PostTagsDelimiterEnd",p),s=b.gt("IfPage","IfPageEnd",p),t=b.r(p,"postcontent",b.lazyPre($.mark(g.trim())),!0),u=[];t=b.r(t,"posttitle",i,!0),isNaN(j)?m=s:(u=m.split(","),m="",u.forEach(function(a,d){let f=b.r(q,"tagurl",c.generatehtmls.tags+"#"+encodeURIComponent(a),!0);f=b.r(f,"tagname",a,!0),m+=f,d!==u.length-1&&(m+=r)})),t=b.r(t,"posttags",m,!0),t=b.r(t,"postdate",$.dt(j),!0),t=b.r(t,"comments",f,!0),t=b.r(t,"pid",n,!0);let v=$.trimMark(window.location.hash).replace("#","");if(t=b.r(t,"pagetype",l,!0),t=b.r(t,"PageType","<!--[PageType]","(",!1),t=b.r(t,"PageTypeEnd","[PageTypeEnd]-->","(",!1),t=o&&"none"!==o&&""!==o?b.r(t,"postcover",o,!0):b.cd(t),isNaN(j)){let a=t.split("{(:PostEnd)}")[0]+"<!--PostEnd-->",b="<!--Footer-->"+t.split("{(Footer:)}")[1];t=a+b}t=b.gt("PostTemplate","PostTemplateEnd",t),b.checkFirstRender(),$.title(k),$.ht(b.delTempTags(t),"contentcontainer"),$.aniChecker($.alterClass($.loadSettings.listening,"",!1,!0),function(){b.lazyCheck()}),b.applyAfterLoad(()=>{SC(v)&&SC(v).scrollIntoView()}),window.addEventListener("scroll",B.lazyCheck,!1),t=c=null}else if(l==c.templatehtmls.postlist){let f=b.gt("PostContent","PostContentEnd",a),i=d[c.templatehtmls.postlist],j=b.gt("PostListTemplate","PostListTemplateEnd",i),n=b.gt("MoreBtn","MoreBtnEnd",i),o=b.gt("BackBtn","BackBtnEnd",i);j=b.r(j,"morebtn","<span id='morebtn'>"+n+"</span>",!0),j=b.r(j,"backbtn","<span id='backbtn'>"+o+"</span>",!0);let p=b.r(j,"postitems","<div id='postitems'>"+$.mark(f.trim())+"</div>",!0);p=b.r(p,"pagetype",l,!0),p=b.r(p,"PageType","<!--[PageType]","(",!1),p=b.r(p,"PageTypeEnd","[PageTypeEnd]-->","(",!1),b.itemPage=parseInt(g.posts_per_page),b.itemPageFixer(),b.checkFirstRender(),$.title(k),$.ht(b.delTempTags(p),"contentcontainer"),p=null,b.backChecker(),b.indexPageChecker();var m=setInterval(function(){return b.gt("<!--[PageType]","[PageTypeEnd]-->",!1,!0)===c.templatehtmls.postlist?void b.indexPageChecker():(console.log("Jumped out of the index page w(\uFF9F\u0414\uFF9F)w"),b.switchPage=0,clearInterval(m),c=null,!1)},100)}else if(l==c.templatehtmls.archives){let a=d[c.templatehtmls.archives],f=b.gt("Archives","ArchivesEnd",a),i=b.gt("ArchiveTemplate","ArchiveTemplateEnd",a),j=b.gt("ArchiveItemTemplate","ArchiveItemTemplateEnd",a),m=g.dateindex,n="",o="",p=0;for(let a in m){let c=m[a].toString().substring(0,4);c!==p&&(p=c,""!==o&&(n=b.r(n,"archiveitems",o,!0),o=""),n+=b.r(i,"archiveyear",c,!0));let d=a.replace("post",""),f=Base64.decode(g.postindex[d].title),k=g.postindex[d].date,l=g.postindex[d].link?g.postindex[d].link+".html":"post-"+d+".html",q=b.r(j,"archiveitemlink",l,!0);q=b.r(q,"archiveitemtitle",f,!0),q=b.r(q,"archiveitemdate",$.dt(k),!0),o+=q}n=""===o?n:b.r(n,"archiveitems",o,!0),n+="</ul>";let q=b.r(f,"archives",n,!0);q=b.r(q,"pagetype",l,!0),q=b.r(q,"PageType","<!--[PageType]","(",!1),q=b.r(q,"PageTypeEnd","[PageTypeEnd]-->","(",!1),b.checkFirstRender(),$.title(k),$.ht(b.delTempTags(q),"contentcontainer"),q=o=n=c=null}else if(l==c.templatehtmls.tags){let a=d[c.templatehtmls.tags],f=b.gt("Tags","TagsEnd",a),i=b.gt("TagItemTemplate","TagItemTemplateEnd",a),j=$.trimMark(window.location.href),m="",o=g.postindex,p=[];if(""==b.allTagsHtml){for(var n in o){let a=o[n].tags.split(",");a.forEach(function(a){""!==a&&-1==p.indexOf(a)&&p.push(a)})}p.forEach(function(a){let c=b.r(i,"tagitemtitle",a,!0);c=b.r(c,"tagitemlink","#"+encodeURIComponent(a),!0),m+=c}),b.allTagsHtml=m}else m=b.allTagsHtml;if(-1!==j.indexOf("#")){let a=j.split("#")[1];b.nowTag=a,"alltags"!==a&&(m="<script>B.tagUper('"+a+"');PJAX.sel('contentcontainer');PJAX.start();</script>")}let q=setInterval(function(){return-1==window.location.href.indexOf(c.generatehtmls.tags)&&-1==window.location.href.indexOf(c.generatehtmls.tags.replace(".html",""))?(clearInterval(q),c=null,!1):void b.tagPageChecker()},100),r=b.r(f,"tags","<div id='contenttags'>"+m+"</div>",!0);r=b.r(r,"pagetype",l,!0),r=b.r(r,"PageType","<!--[PageType]","(",!1),r=b.r(r,"PageTypeEnd","[PageTypeEnd]-->","(",!1),b.checkFirstRender(),$.title(k),$.ht(b.delTempTags(r),"contentcontainer"),r=null}b.tpcheckStatus=!1,PJAX.autoprevent(),PJAX.sel("contentcontainer"),PJAX.start(),b.navcheck(),window.dispatchEvent(PJAX.PJAXFinish),g=d=null},backChecker:function(){SC("backbtn").style.display=1==this.realPage?"none":"initial"},nowTag:"",allTagsHtml:"",tagUper:function(a){a=decodeURIComponent(a);let b=this,c=window.tpJson,d=window.tpHtmls[c.templatehtmls.tags],f=b.gt("TagListTemplate","TagListTemplateEnd",d),k=b.gt("TagListItemTemplate","TagListItemTemplateEnd",d),l=window.mainJson,g=l.dateindex,m=l.postindex,n=[],o="";for(var p in g){var i=p.replace("post","");-1!==m[i].tags.indexOf(a)&&n.push(i)}o+="<ul>",n.forEach(function(a){let c=m[a],d="post-"+a+".html",f=$.dt(c.date);c.link&&(d=c.link+".html");let i=b.r(k,"taglistitemlink",d,!0);i=b.r(i,"taglistitemtitle",Base64.decode(c.title),!0),i=b.r(i,"taglistitemdate",$.dt(f),!0),o+=i}),o=b.r(f,"taglist",o,!0),o=b.r(o,"tagcurrent",a,!0),SC("contenttags").innerHTML=o,o=l=c=null},tagPageChecker:function(){let a=this,b=$.trimMark(window.location.href);if(-1==b.indexOf("#"))PJAX.pause(),window.location.replace(b+"#alltags"),PJAX.start();else{let c=b.split("#")[1];a.nowTag!==c&&(a.nowTag=c,"alltags"==c?SC("contenttags")&&(SC("contenttags").innerHTML=a.allTagsHtml):(a.tagUper(c),PJAX.start()))}},indexPageChecker:function(){let a=window.tpJson,b=$.trimMark(decodeURIComponent(window.location.href)),c=window.mainJson,d=parseInt(c.posts_per_page),f=this;if(-1!==b.indexOf("#")){f.hashExist=!0;let i=b.split("#")[1]||1;if(-1!=b.indexOf("#!")){let d=window.tpHtmls[a.templatehtmls.postitem],j=f.gt("PostItem","PostItemEnd",d),k=f.gt("NoItem","NoItemEnd",d),l=b.split("#!")[1];if(l!==f.searchWd&&!f.tpcheckStatus&&!f.loadStatus){function a(a,b){let c=a,d=b,g=c[d].title,i=c[d].intro,k=c[d].date,l=c[d].tags,m=B.r(j,"postitemtitle",g,!0);return m=B.r(m,"postitemintro",i+"...",!0),m=B.r(m,"postitemdate",$.dt(k),!0),m=B.r(m,"postitemtags",l.replace(/,/g,"\xB7"),!0),m=c[d].link?B.r(m,"postitemlink",c[d].link+".html",!0):B.r(m,"postitemlink","post-"+d+".html",!0),m=c[d].cover?B.r(m,"postcover",c[d].cover,!0):f.cd(m),c=null,m}function b(){SC("postitems")&&SC("morebtn")&&SC("backbtn")?(window.scrollTo(0,0),SC("postitems").innerHTML="Searching...\u2220( \u141B \u300D\u2220)\uFF3F",SC("morebtn").style.display="none",SC("backbtn").style.display="none",Promise.resolve(i).then(a=>"function"==typeof f.searchInj?f.searchInj(d,l,a):Promise.resolve(a)).then(b=>{b=Array.from(new Set(b)),b.forEach(b=>{m+=a(d,b)}),m=m||k,SC("postitems").innerHTML=m,PJAX.start(),a=d=m=null})):setTimeout(function(){return b()},10),b=i=null}f.searchWd=l;let d=Object.assign({},c.postindex);for(g in d)d[g]="object"==typeof d[g]?Object.assign({},d[g]):d[g],d[g].title=Base64.decode(d[g].title),d[g].intro=Base64.decode(d[g].intro);l=l.toLowerCase();let i=[],m="";for(var g in d){let a=d[g].title.toLowerCase(),b=d[g].intro.toLowerCase(),c=d[g].date.toLowerCase(),f=d[g].tags.toLowerCase();-1!==(a+b+c+f).indexOf(l)&&i.push(g)}f.tpcheckStatus||f.loadStatus||b()}}else if(!isNaN(i)){let a=parseInt(i),b=a-1;f.currentPageBefore!==b&&f.realPage!==a&&(console.log("Page change triggered by indexPageChecker <(\uFFE3\uFE36\uFFE3)>"),f.searchWd="",f.currentPageBefore=b,f.itemPage=d*b*f.morePerPage,f.itemPageFixer(),SC("postitems").innerHTML="",f.more(!0),f.realPage=b+1,f.switchPage=0,f.backChecker())}}else f.hashExist&&(f.realPage=1,f.switchPage=0,f.hashExist=!1);a=c=null},loadshow:function(){if(B.loadStatus=!0,$.loadSettings.animations){let{in:b,out:c}=$.loadSettings.animations;for(var a in b)$.alterClass(a,b[a]);for(var a in c)$.alterClass(a,c[a],!0)}},loadhide:function(){B.loadStatus=!1;let{out:a,in:b}=$.loadSettings.animations;for(var c in a)$.alterClass(c,a[c]);for(var c in b)$.alterClass(c,b[c],!0)},applyAfterLoad:function(){let a=this,b=arguments,c=Array.from(b),d=c.shift();a.loadStatus?setTimeout(()=>a.applyAfterLoad.apply(a,b),50):(d(c),d=a=null)},more:function(a=!1){let b=this,c=window.tpJson,d=b.itemPage+1,f=0,g=0,k="",l=window.mainJson,m=window.tpHtmls[c.templatehtmls.postitem],n=b.gt("PostItem","PostItemEnd",m),o=b.gt("NoItem","NoItemEnd",m),p=parseInt(l.posts_per_page),q=l.dateindex;for(var r in q)if(!(d<=g))g+=1;else if(f<p){let a=r.replace("post",""),c=l.postindex[a];if(!c.link){let d=B.r(n,"postitemtitle",Base64.decode(c.title),!0);d=B.r(d,"postitemintro",Base64.decode(c.intro)+"...",!0),d=B.r(d,"postitemdate",$.dt(c.date),!0),d=B.r(d,"postitemtags",c.tags.replace(/,/g,"\xB7"),!0),d=B.r(d,"postitemlink","post-"+a+".html",!0),d=c.cover?B.r(d,"postcover",c.cover,!0):b.cd(d),k+=d,d=null}else b.itemPage+=1,f-=1;f+=1}else;""==k?(k=o,SC("morebtn").style.display="none"):SC("morebtn").style.display="initial",b.itemPage+=p,b.switchPage>=b.morePerPage-1&&!a?(b.applyAfterLoad(a=>{[SC("postitems").innerHTML]=a,PJAX.start()},k),b.currentPageBefore=b.realPage,b.scrolltop(20,2),b.switchPage=0,b.realPage+=1,PJAX.pause(),window.location.href="#"+b.realPage):(b.applyAfterLoad(a=>{SC("postitems").innerHTML=a[1]?a[0]:SC("postitems").innerHTML+a[0],PJAX.start()},k,a),b.switchPage+=1),b.backChecker(),c=q=k=null}};window.addEventListener("pjaxstart",B.loadshow,!1),window.addEventListener("pjaxfinish",B.loadhide,!1)}let mainHost=window.location.host;if(PJAX==null||null==PJAX)var PJAX={index:null===window.history.state?1:window.history.state.page,PJAXStart:new CustomEvent("pjaxstart"),PJAXFinish:new CustomEvent("pjaxfinish"),loadedPage:{},lastHref:window.location.href,preventUrl:[],recentUrl:"",replace:"",status:!0,sel:function(a){this.replace=a},jump:function(a){let b=encodeURIComponent(a),c=this,d=!1;return(c.replace=c.replace||"contentcontainer",-1===c.recentUrl.indexOf("#")||-1===a.indexOf("#")||c.recentUrl.split("#")[0]!=a.split("#")[0])&&void(-1==c.recentUrl.indexOf("#")&&-1!==a.indexOf("#")&&(B.currentPageBefore=0),window.dispatchEvent(c.PJAXStart),window.removeEventListener("scroll",B.lazyCheck,!1),$.aniChecker($.alterClass($.loadSettings.listening,"",!1,!0),function(){if(window.scrollTo(0,0),c.loadedPage[b])c.clearEvent(),B.tpcheck(!1,c.loadedPage[b]);else{let f=q("r",b,"","",""),g=f.c;g&&(d=!0,c.clearEvent(),B.tpcheck(!1,g)),$.ft(a,{},{success:function(f){c.recentUrl=a,c.loadedPage[b]=f,d?g===f?q("e",b,"","",1):(q("w",b,f,timestamp(),""),c.clearEvent(),B.tpcheck(!1,f)):(c.clearEvent(),B.tpcheck(!1,f),q("w",b,f,timestamp(),""))},failed:function(){window.dispatchEvent(c.PJAXFinish)}},"get","")}}))},pjaxAutoJump:function(){PJAX.recentUrl.split("#")[0]==window.location.href&&B.currentPageType==window.tpJson.templatehtmls.postlist&&window.history.replaceState(null,null,window.location.href+"#1"),-1!==window.location.href.indexOf(mainHost)&&PJAX.jump(window.location.href)},clickEvent:function(a){return!!(-1!==PJAX.preventUrl.indexOf(this.href)||!this.href||this.href.includes(location.pathname)&&this.href.includes("#"))||void(window.history.pushState(null,null,this.href),a.preventDefault(),PJAX.jump(this.href))},clearEvent:function(){let a=this,b=document.getElementsByTagName("a");for(var c in b)"function"==typeof b[c].removeEventListener&&b[c].removeEventListener("click",a.clickEvent);b=null},start:function(){let a=this;a.status=!0,a.recentUrl=window.location.href,a.clearEvent(),window.removeEventListener("popstate",PJAX.pjaxAutoJump);let b=document.getElementsByTagName("a");for(var c in b){let d=b[c]instanceof Element?b[c].getAttribute("onclick"):null;"function"!=typeof b[c].addEventListener||d||(b[c].setAttribute("pjax",""),b[c].addEventListener("click",a.clickEvent,!1))}window.addEventListener("popstate",PJAX.pjaxAutoJump,!1),b=null},pause:function(){this.status=!1,window.removeEventListener("popstate",PJAX.pjaxAutoJump)},autoprevent:function(){let a=this,b=document.getElementsByTagName("a"),c=window.location.host;for(var d in b)void 0!==b[d].href&&-1==b[d].href.indexOf(c)&&a.preventUrl.push(b[d].href);b=null}};function q(a,b,f,c,g){"undefined"==typeof localStorage.obottle&&(localStorage.obottle="{}");let i=0,j="",k=JSON.parse(localStorage.obottle),l={};if("undefined"!=typeof k[b]&&(i=k[b].t,j=k[b].h),"w"==a){let a=JSON.parse(localStorage.obottle),d={};d.h=f,d.t=c,d.rt=0,a[b]=d;try{localStorage.obottle=JSON.stringify(a)}catch(b){for(var m in a)(20>=+a[m].rt||172800<=+c-+a[m].t)&&delete a[m];localStorage.obottle=JSON.stringify(a)}}else{if("r"==a)return l={t:i,c:j},l;if("e"==a){let a=JSON.parse(localStorage.obottle);a[b].rt=+a[b].rt+g,localStorage.obottle=JSON.stringify(a)}}}function timestamp(){var b=new Date().getTime();return b}B.tpcheck();