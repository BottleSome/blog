/*FrontMainJS ver4.2.0 - SomeBottle20210909*/
"use strict";var md,$,SC,e,ldlocalused,B;function anichecker(t,n){var e,a="",i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)void 0!==t.style[e]&&(a=i[e]);t.addEventListener(a,function e(){n(),t.removeEventListener(a,e)})}"object"!=typeof $&&(($=new Object).ls=new Array,$.lss="",$.loadset=new Object,$.loadingjs=0,$.ft=function(t,n,a,i,o){if("false"!==t&&t){let e={body:JSON.stringify(n),cache:"default",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),method:i};"get"==i&&delete e.body,t=""!==o?o+t:t,fetch(t,e).then(e=>e.text()).then(e=>a.success(e,t)).catch(e=>a.failed(e,t))}},SC=function(e){return"body"==e?document.body:"html"==e?document.getElementsByTagName("html")[0]:document.getElementById(e)},$.script=function(e,t=!1){$.scripturl||($.scripturl=[]);var n,a=document.createElement("script"),i=!1,o=t?$.attrs(t):{};for(n in $.ls)if($.ls[n]==e){i=!0;break}if(!i&&-1==$.scripturl.indexOf(e)){for(var r in $.loadingjs+=1,$.ls[$.ls.length]=e,a.type="text/javascript",a.src=e,o)a.setAttribute(r,o[r]);$.scripturl.push(e),document.body.appendChild(a);var s=function(){--$.loadingjs,this.removeEventListener("load",s,!1)}.bind(a);a.addEventListener("load",s,!1)}a=null},$.scriptcircle=function(e,t=0){if(0<$.loadingjs)setTimeout(function(){$.scriptcircle(e,t+1)},100);else for(var n in e)setTimeout("try{"+e[n]+"}catch(e){console.log('Page script Error: ' + e.message);}",0)},$.attrs=function(e){var t={};if(e.hasAttributes()){var n,a=e.attributes;for(n in a)a[n].name&&a[n].value&&(t[a[n].name]=a[n].value)}return t},$.ht=function(e,t,n=!0){var a=SC(t),i=[];if(!a)return console.log("Unable to find the Element:"+t),!1;a.innerHTML=e;let o=a.getElementsByTagName("script");for(var r=0;r<o.length;r++)void 0!==o[r].src&&null!==o[r].src&&""!==o[r].src?$.script(o[r].src,o[r]):(e=o[r].innerHTML,n&&(e=B.r(e,"/*",""),e=B.r(e,"*/","")),i.push(e));$.scriptcircle(i),a=o=null},$.tr=function(e){var t=e,e=t.split("?");return e[1]?e[0]:t},$.dt=function(e){if(1e7<=Number(e)){var t=String(e),n=t.slice(-4),a=n.slice(-2),i=n.substring(0,2);return t.replace(n,"")+"-"+i+"-"+a}return e},$.rmhead=function(e){var t=document.createElement("html");t.innerHTML=e;var n=t.getElementsByTagName("clothhead")[0];n.parentNode.removeChild(n);e=[t.innerHTML,n.innerHTML];return t.remove(),n=t=null,e},$.addhead=function(e){var t,n=SC("html").getElementsByTagName("head")[0],a=n.getElementsByTagName("clothhead");if("html"!==n.parentNode.tagName.toLowerCase())return!1;a.length<=0?((t=document.createElement("clothhead")).innerHTML=e,n.appendChild(t),t=null):a[0].innerHTML=e,n=a=null},$.title=function(e){var t,n=SC("html").getElementsByTagName("head")[0],a=n.getElementsByTagName("title");a.length<=0?((t=document.createElement("title")).innerHTML=e,n.appendChild(t)):a[0].innerHTML=e},$.ldparse=function(e){var t=document.createElement("html");t.innerHTML=e;var n=t.getElementsByTagName("loadset"),e=!!n&&JSON.parse(n[0].innerHTML);e?$.loadset=e:console.log("Failed to initialize loading page."),t.remove(),t=n=null},$.ecls=function(e,t,n=!1,a=!1){var i,o=e.split(":"),r=document.getElementsByTagName("html")[0];switch(o[0]){case"id":i=document.getElementById(o[1]);break;case"class":i=r.getElementsByClassName(o[1]);break;case"tag":i=r.getElementsByTagName(o[1])}if(a)return i;if(i instanceof Element)n?i.classList.remove(t):i.classList.add(t);else for(var s in i)i[s]instanceof Element&&(n?i[s].classList.remove(t):i[s].classList.add(t));i=r=null}),B||(localStorage["obottle-ldpage"]?(e=SC("html").innerHTML,ldlocalused=!0,$.ldparse(localStorage["obottle-ldpage"]),SC("html").innerHTML=e.replace("<loadingarea></loadingarea>",localStorage["obottle-ldpage"])):ldlocalused=!1,$.ft("./loading.otp.html","",{success:function(e,t){ldlocalused||(B.hr("<loadingarea></loadingarea>",e),$.ldparse(e)),localStorage["obottle-ldpage"]=e},failed:function(e){console.log("LoadingPage Load Failed")}},"get",""),$.script("./library.js"),$.script("./search.js"),window.htmls=new Object,B={moreperpage:0,r:function(e,t,n,a=!1,i=!0){if(a)return"("==a?e.replace(new RegExp("\\{\\("+t+"\\)\\}",(i?"g":"")+"i"),n):e.replace(new RegExp("\\{\\["+t+"\\]\\}",(i?"g":"")+"i"),n);if(i)for(;-1!==e.indexOf(t);)e=e.replace(t,n);else e=e.replace(t,n);return e},navlist:{statu:!1,conf:{}},navcurrent:function(e=""){return((-1==e.indexOf("http")?e:e.replace(window.location.protocol+"//"+window.location.hostname,""))||window.location.pathname).replace(".html","")},navcheck:function(){var e=document.body,t=this.navlist.conf;if(this.navlist.statu){var n,a=e.getElementsByClassName(t.navclass),i=this.navcurrent();for(n in a){var o=this.navcurrent(a[n].href),r=i.lastIndexOf(o),s=i.length,l=o.length;(i==o||r+l==s&&-1!==r)&&a[n]instanceof Element?a[n].classList.add(t.activeclass):a[n]instanceof Element&&a[n].classList.contains(t.activeclass)&&a[n].classList.remove(t.activeclass)}a=null}e=null},nav:function(e){this.navlist.statu=!0,this.navlist.conf=e},scrollbottom:function(){var e=document.documentElement.scrollHeight;window.scrollTo(0,e)},scrolltop:function(e,t){var n=document.body.scrollTop,a=Math.floor(parseInt(n)/3),i=t,o=Math.pow(e,2)/(2*a),r=0,s=setInterval(function(){var e=document.body.scrollTop;parseInt(e)>2*a?(r+=o,document.body.scrollTop=parseInt(e)-r):parseInt(e)>a?document.body.scrollTop=parseInt(e)-r:parseInt(e)<=a&&((r-=o)<=i&&(r=i),parseInt(e)<=0?(document.body.scrollTop=0,clearInterval(s)):document.body.scrollTop=parseInt(e)-r)},10)},hc:function(e){return e=e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},hr:function(e,t){var n=SC("html").innerHTML;SC("html").innerHTML=this.r(n,e,t)},deltemptags:function(e){return e.replace(/\{\((.*?)\)\}/g,"")},preventscript:function(){var e,t=SC("html").getElementsByTagName("script");for(e in t)t[e].src&&-1==$.scripturl.indexOf(t[e].src)&&$.scripturl.push(t[e].src);t=null},dehtml:function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&#039;/g,"'").replace(/&#39;/g,"'").replace(/&quot;/g,'"')},gt:function(e,t,n=!1,a=!1){var i=n||SC("html").innerHTML;try{var o=(a?i.split(e):i.split(new RegExp("\\{\\("+e+"\\)\\}","i")))[1],o=(a?o.split(t):o.split(new RegExp("\\{\\("+t+"\\)\\}","i")))[0];return this.dehtml(o)}catch(i){return!1}},lazyload:!0,lazy:e=>{B.lazyload=e},lazypre:function(e){var t=document.createElement("div");t.innerHTML=e;var n,a,i=t.getElementsByTagName("img");for(n in i)i[n].src&&(a=i[n].src,i[n].src="data:image/gif;base64,R0lGODlhkAGQAYAAAP///wAAACH5BAEAAAAALAAAAACQAZABAAL/hI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8fksvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFhoeIiYqLjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7vL2+v7CxwsPExcbHyMnKy8zNzs/AwdLT1NXW19jZ2tvc3d7f0NHi4+Tl5ufo6err7O3u7+Dh8vP09fb3+Pn6+/z9/v/w8woMCBBAsaPIgwocKFDBs6fAgxosSJFCtavIgxo8aN/xw7evwIMqTIkSRLmjyJMqXKlSxbunwJM6bMmTRr2ryJM6fOnTx7+vwJNKjQoUSLGj2KNKnSpUybOn0KNarUqVSrWr2KNavWrVy7ev0KNqzYsWTLmj2LNq3atWzbun0LN67cuXTr2r2LN6/evXz7+v0LOLDgwYQLGz6MOLHixYwbO34MObLkyZQrW76MObPmzZw7e/4MOrTo0aRLmz6NOrXq1axbu34NO7bs2bRr276NO7fu3bx7+/4NPLjw4cSLGz+OPLny5cybO38OPbr06dSrW7+OPbv27dy7e/8OPrz48eTLmz+PPr369ezbu38PP778+fTr27+PP7/+/fz7+03/D2CAAg5IYIEGHohgggouyGCDDj4IYYQSTkhhhRZeiGGGGm7IYYcefghiiCKOSGKJJp6IYooqrshiiy6+CGOMMs5IY4023ohjjm0UAAA7",""!==i[n].style.width&&(a=a+"[width]"+i[n].style.width),i[n].setAttribute("data-src","[lazy]"+a),i[n].style.width="100%");e=t.innerHTML;return t.remove(),t=i=null,e},lazycheck:function(){if(!B.lazyload)return!1;var e,t=window.innerHeight,n=document.documentElement.scrollTop||document.body.scrollTop,a=document.getElementsByTagName("img");for(e in a){var i=a[e].offsetTop;i<t+n&&t+n-i<t&&B.lazyshow(a[e])}a=null},lazyshow:function(e){var t,n=e.getAttribute("data-src");"undefined"!==n&&n&&(e.setAttribute("data-src",""),-1!==(t=n.split("[lazy]")[1]).indexOf("[width]")?(t=t.split("[width]"),e.src=t[0],e.style.width=t[1]):(e.src=n.split("[lazy]")[1],e.style.width="auto"))},templonload:0,templateloaded:new Array,tpcheckstatu:!1,loadstatu:!1,tpcheck:function(e=!1,t=!1){var n=this,a=this;if(!n.tpcheckstatu||e){n.tpcheckstatu=!0,n.loadshow();var i,o,r,s,e=n.gt("PageType","PageTypeEnd",t);if(window.templjson)if(window.mainjson||-1===window.templjson.usemain.indexOf(e))if("object"==typeof showdown&&"object"==typeof Base64&&localStorage["obottle-ldpage"]){for(i in n.preventscript(),(c=window.templjson).necessary.push(e),e==c.templatehtmls.postlist&&c.necessary.push(c.templatehtmls.postitem),c.necessary)-1==a.templateloaded.indexOf(c.necessary[i])&&(a.templonload+=1,o=!1,(r=q("r","template-"+c.necessary[i],"","","")).c&&(o=!0,s=c.necessary[i],console.log("Template using cache:"+s),window.htmls[s]=r.c,a.templateloaded.push(s),--a.templonload),$.ft(c.necessary[i],"",{success:function(e,t){window.htmls[t]=e,o?r.c!==e?q("w","template-"+t,e,timestamp(),""):q("e","template-"+t,"","",1):(a.templateloaded.push(t),--a.templonload,q("w","template-"+t,e,timestamp(),""))},failed:function(e){console.log("Necessary HTML Load Failed...")}},"get",""));var l=setInterval(function(){a.templonload<=0&&(clearInterval(l),a.renderer(t))},50),c=null}else setTimeout(function(){return a.tpcheck(!0,t)},25);else window.mainjsonrequest||(window.mainjsonrequest=!0,$.ft(window.templjson.mainjson,"",{success:function(e){window.mainjson=JSON.parse(e.replace(/[\r\n]/g,"")),n.moreperpage=parseInt(window.mainjson.more_per_page)},failed:function(e){console.log("MainJson Load Failed")}},"get","https://cdn.jsdelivr.net/gh/BottleSome/blog@latest/")),setTimeout(function(){return a.tpcheck(!0,t)},25);else $.ft("template.json","",{success:function(e){return window.templjson=JSON.parse(e),n.tpcheck(!0,t)},failed:function(e){console.log("TemplateJson Load Failed.")}},"get","")}},itempage:0,switchpage:0,nowpage:0,realpage:1,searchw:"",hashexist:!1,rendering:!1,itempagefixer:function(){var e,t=window.mainjson,n=1;for(e in t.dateindex){var a=this.itempage,i=e.replace("post",""),i=t.postindex[i];n<=a&&i.link&&(this.itempage+=1),n+=1}--this.itempage},cd:function(e){for(var t=e;-1!==t.indexOf("<ifcover>");)var n=B.gt("<ifcover>","</ifcover>",t,!0),t=B.r(t,"<ifcover>"+n+"</ifcover>","");return t},clothmainrendered:!1,checkfirstrender:function(){var e=this,t=window.templjson,n=window.htmls[t.templatehtmls.cloth],t=window.htmls[t.templatehtmls.main];e.clothmainrendered||(console.log("first render"),t=e.r(t,"contents","<div id='contentcontainer'></div>",!0),t=e.r(n,"main",t,!0),t=$.rmhead(t),$.ht(e.deltemptags(t[0]),"container"),$.addhead(t[1]),e.clothmainrendered=!0)},back:function(){window.history.go(-1)},turnback:function(){var e=this.realpage;window.location.href=window.location.protocol+"//"+window.location.host+window.location.pathname+"#"+(1<e?e-1:1)},renderer:function(e=!1){var a=this;if(!a.rendering){a.rendering=!0;var n=window.templjson;md=new showdown.Converter;var t=window.htmls[n.templatehtmls.comment],i=a.gt("PageType","PageTypeEnd",e),o=window.mainjson;if(i==n.templatehtmls.post){var r=a.gt("PostContent","PostContentEnd",e),s=a.gt("PostTitle","PostTitleEnd",e),l=a.gt("PostDate","PostDateEnd",e),c=a.gt("PostTag","PostTagEnd",e),d=a.gt("PostID","PostIDEnd",e),p=a.gt("PostCover","PostCoverEnd",e),m=a.gt("MainTitle","MainTitleEnd",e).replace(/<\/?.+?>/g,""),h=window.htmls[n.templatehtmls.post],g=a.r(h,"postcontent",a.lazypre(md.makeHtml(a.hc(r.trim()))),!0),u=a.r(g,"posttitle",s,!0),f=[],c=isNaN(l)?"页面":(f=c.split(","),c="",f.forEach(function(e,t){c=c+'<a href="'+n.generatehtmls.tags+"#"+encodeURIComponent(e)+'" class="taglink">'+e+"</a>,"}),c.substr(0,c.length-1)),h=a.r(u,"posttags",c,!0),f=a.r(h,"postdate",$.dt(l),!0),h=a.r(f,"comments",t,!0),f=a.r(h,"pid",d,!0);f=a.r(f,"pagetype",i,!0),f=a.r(f,"PageType","\x3c!--[PageType]","(",!1),f=a.r(f,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1),f=p&&"none"!==p&&""!==p?a.r(f,"postcover",p,!0):a.cd(f),isNaN(l)&&(f=f.split("{(:PostEnd)}")[0]+"\x3c!--PostEnd--\x3e"+("\x3c!--Footer--\x3e"+f.split("{(Footer:)}")[1])),a.checkfirstrender(),$.title(m),$.ht(a.deltemptags(f),"contentcontainer"),anichecker($.ecls($.loadset.listening,"",!1,!0),function(){a.lazycheck()}),window.addEventListener("scroll",B.lazycheck,!1),f=o=null}else if(i==n.templatehtmls.postlist){r=a.gt("PostContent","PostContentEnd",e),m=a.gt("MainTitle","MainTitleEnd",e).replace(/<\/?.+?>/g,""),h=window.htmls[n.templatehtmls.postlist],p=a.gt("PostListTemplate","PostListTemplateEnd",h),f=a.gt("MoreBtn","MoreBtnEnd",h),h=a.gt("BackBtn","BackBtnEnd",h),p=a.r(p,"morebtn","<span id='morebtn'>"+f+"</span>",!0);p=a.r(p,"backbtn","<span id='backbtn'>"+h+"</span>",!0);g=a.r(p,"postitems","<div id='postitems'>"+md.makeHtml(r.trim())+"</div>",!0),u=a.r(g,"pagetype",i,!0);u=a.r(u,"PageType","\x3c!--[PageType]","(",!1),u=a.r(u,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1),a.itempage=parseInt(o.posts_per_page),a.itempagefixer(),a.checkfirstrender(),$.title(m),$.ht(a.deltemptags(u),"contentcontainer"),u=null,a.backchecker(),a.indexpagechecker();var w=setInterval(function(){return a.gt("\x3c!--[PageType]","[PageTypeEnd]--\x3e",!1,!0)!==n.templatehtmls.postlist?(console.log("jumped out of index"),PJAX.sel("contentcontainer"),PJAX.start(),a.switchpage=0,clearInterval(w),!1):void a.indexpagechecker()},100)}else if(i==n.templatehtmls.archives){var v,m=a.gt("MainTitle","MainTitleEnd",e).replace(/<\/?.+?>/g,""),r=window.htmls[n.templatehtmls.archives],y=a.gt("Archives","ArchivesEnd",r),T=a.gt("ArchiveTemplate","ArchiveTemplateEnd",r),b=a.gt("ArchiveItemTemplate","ArchiveItemTemplateEnd",r),E=o.dateindex,P="",L="",x=0;for(v in E){(S=E[v].toString().substring(0,4))!==x&&(x=S,""!==L&&(P=a.r(P,"archiveitems",L,!0),L=""),P+=a.r(T,"archiveyear",S,!0));var d=v.replace("post",""),s=Base64.decode(o.postindex[d].title),l=o.postindex[d].date,A="",A=o.postindex[d].link?o.postindex[d].link+".html":"post-"+d+".html",A=a.r(b,"archiveitemlink",A,!0),A=a.r(A,"archiveitemtitle",s,!0);L+=A=a.r(A,"archiveitemdate",$.dt(l),!0)}""!==L&&(P=a.r(P,"archiveitems",L,!0)),P+="</ul>";g=a.r(y,"archives",P,!0),u=a.r(g,"pagetype",i,!0);u=a.r(u,"PageType","\x3c!--[PageType]","(",!1),u=a.r(u,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1),a.checkfirstrender(),$.title(m),$.ht(a.deltemptags(u),"contentcontainer"),u=null}else if(i==n.templatehtmls.tags){var k,S,m=a.gt("MainTitle","MainTitleEnd",e).replace(/<\/?.+?>/g,""),y=window.htmls[n.templatehtmls.tags],e=a.gt("Tags","TagsEnd",y),C=a.gt("TagItemTemplate","TagItemTemplateEnd",y),y=$.tr(window.location.href),j="",N=o.postindex,O=new Array;for(k in N)(S=N[k].tags.split(",")).forEach(function(e,t){""!==e&&-1==O.indexOf(e)&&O.push(e)});O.forEach(function(e,t){var n=a.r(C,"tagitemtitle",e,!0),n=a.r(n,"tagitemlink","#"+encodeURIComponent(e),!0);j+=n}),a.alltaghtml=j,-1!==y.indexOf("#")&&(y=y.split("#")[1],"alltags"!==(a.nowtag=y)&&(j="<script>B.taguper('"+y+"');PJAX.sel('contentcontainer');PJAX.start();<\/script>"));w=setInterval(function(){return-1==window.location.href.indexOf(n.generatehtmls.tags)&&-1==window.location.href.indexOf(n.generatehtmls.tags.replace(".html",""))?(PJAX.sel("contentcontainer"),PJAX.start(),clearInterval(w),!1):void a.tagpagechecker()},100),g=a.r(e,"tags","<div id='contenttags'>"+j+"</div>",!0),u=a.r(g,"pagetype",i,!0);u=a.r(u,"PageType","\x3c!--[PageType]","(",!1),u=a.r(u,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1),a.checkfirstrender(),$.title(m),$.ht(a.deltemptags(u),"contentcontainer"),u=null}a.tpcheckstatu=!1,a.rendering=!1,PJAX.autoprevent(),PJAX.sel("contentcontainer"),PJAX.start(),a.navcheck(),window.dispatchEvent(PJAX.PJAXFinish)}},backchecker:function(){1==this.realpage?SC("backbtn").style.display="none":SC("backbtn").style.display="initial"},nowtag:"",alltaghtml:"",taguper:function(e){e=decodeURIComponent(e);SC("html").innerHTML;var t,i=this,n=window.templjson,a=window.htmls[n.templatehtmls.tags],o=i.gt("TagListTemplate","TagListTemplateEnd",a),r=i.gt("TagListItemTemplate","TagListItemTemplateEnd",a),n=window.mainjson,a=n.dateindex,s=n.postindex,l=new Array,c="";for(t in a){var d=t.replace("post","");-1!==s[d].tags.indexOf(e)&&l.push(d)}c+="<ul>",l.forEach(function(e,t){var n=s[e],a="post-"+e+".html",e=$.dt(n.date);n.link&&(a=n.link+".html");a=i.r(r,"taglistitemlink",a,!0),a=i.r(a,"taglistitemtitle",Base64.decode(n.title),!0);a=i.r(a,"taglistitemdate",$.dt(e),!0),c+=a}),c=i.r(o,"taglist",c,!0),c=i.r(c,"tagcurrent",e,!0),SC("contenttags").innerHTML=c,c=null},tagpagechecker:function(){SC("html").innerHTML;var e=$.tr(window.location.href);-1==e.indexOf("#")?(PJAX.pause(),window.location.replace(e+"#alltags"),PJAX.start()):(e=e.split("#")[1],this.nowtag!==e&&("alltags"==(this.nowtag=e)?SC("contenttags")&&(SC("contenttags").innerHTML=this.alltaghtml):this.taguper(e),PJAX.start()))},indexpagechecker:function(){SC("html").innerHTML;var e=window.templjson,t=$.tr(decodeURIComponent(window.location.href)),n=window.mainjson,a=parseInt(n.posts_per_page),h=this;if(-1!==t.indexOf("#")){h.hashexist=!0;var i=t.split("#")[1];if(-1==t.indexOf("#!"))isNaN(i)||(i=parseInt(i)-1,h.nowpage!==i&&(console.log("hash changed"),h.searchw="",a=a*(h.nowpage=i)*h.moreperpage,h.itempage=a,h.itempagefixer(),SC("postitems").innerHTML="",h.more(!0),h.realpage=1+i,h.switchpage=0,h.backchecker()));else{var e=window.htmls[e.templatehtmls.postitem],g=h.gt("PostItem","PostItemEnd",e),e=h.gt("NoItem","NoItemEnd",e);if((w=t.split("#!")[1])!==h.searchw){h.searchw=w;var o=n.postindex;function r(e,t,n=!1,a=!1,i=!1,o=!1){var r="";let s=e,l=t,c=n||Base64.decode(s[l].title),d=a||Base64.decode(s[l].intro),p=i||s[l].date,m=o||s[l].tags;o=B.r(g,"postitemtitle",c,!0),o=B.r(o,"postitemintro",d+"...",!0),o=B.r(o,"postitemdate",$.dt(p),!0),o=B.r(o,"postitemtags",m.replace(/,/g,"·"),!0),o=s[l].link?B.r(o,"postitemlink",s[l].link+".html",!0):B.r(o,"postitemlink","post-"+l+".html",!0);return r+=o=s[l].cover?B.r(o,"postcover",s[l].cover,!0):h.cd(o),o=null,r}var s,l="",c={};for(s in o){var d=Base64.decode(o[s].title).toLowerCase(),p=Base64.decode(o[s].intro).toLowerCase(),m=o[s].date.toLowerCase(),u=o[s].tags,f=u.toLowerCase(),w=w.toLowerCase();-1===d.indexOf(w)&&-1===p.indexOf(w)&&-1===m.indexOf(w)&&-1===f.indexOf(w)||(l+=r(o,s,d,p,m,u),c[s]=!0)}""==l&&(l=e),h.tpcheckstatu||h.loadstatu||function e(){SC("postitems")&&SC("morebtn")&&SC("backbtn")?(window.scrollTo(0,0),SC("postitems").innerHTML=l,"function"==typeof h.searchinj&&h.searchinj(o,w,e=>{let t="";for(var n in e)t+=isNaN(e[n])||c[e[n]]?"":r(o,e[n]);if(""==t)return!1;SC("postitems").innerHTML=l+t,PJAX.start()}),SC("morebtn").style.display="none",SC("backbtn").style.display="none",PJAX.start()):setTimeout(e,10)}()}(h.tpcheckstatu||h.loadstatu)&&(h.searchw="")}}else h.searchw="",h.hashexist&&(h.realpage=1,h.switchpage=0,h.hashexist=!1)},loadshow:function(){if(this.loadstatu=!0,$.loadset.animations){var e,t=$.loadset.animations.in,n=$.loadset.animations.out;for(e in t)$.ecls(e,t[e]);for(e in n)$.ecls(e,n[e],!0)}},loadhide:function(){this.loadstatu=!1;var e,t=$.loadset.animations.out,n=$.loadset.animations.in;for(e in t)$.ecls(e,t[e]);for(e in n)$.ecls(e,n[e],!0)},morehtmls:{},more:function(e=!1){var t,n,a,i,o=this,r=window.templjson,s=o.itempage+1,l=0,c=0,d="",p=window.mainjson,r=window.htmls[r.templatehtmls.postitem],m=o.gt("PostItem","PostItemEnd",r),r=o.gt("NoItem","NoItemEnd",r),h=parseInt(p.posts_per_page);for(t in p.dateindex)s<=c?l<h?(i=t.replace("post",""),(n=p.postindex[i]).link?(o.itempage+=1,--l):(a=B.r(m,"postitemtitle",Base64.decode(n.title),!0),a=B.r(a,"postitemintro",Base64.decode(n.intro)+"...",!0),a=B.r(a,"postitemdate",$.dt(n.date),!0),a=B.r(a,"postitemtags",n.tags.replace(/,/g,"·"),!0),i=B.r(a,"postitemlink","post-"+i+".html",!0),d+=i=n.cover?B.r(i,"postcover",n.cover,!0):o.cd(i)),l+=1):0:c+=1;""==d?(d=r,SC("morebtn").style.display="none"):SC("morebtn").style.display="initial",o.itempage=o.itempage+h,o.switchpage>=o.moreperpage-1&&!e?(SC("postitems").innerHTML=d,o.scrolltop(20,2),o.switchpage=0,o.realpage+=1,PJAX.pause(),window.location.href="#"+o.realpage):(SC("postitems").innerHTML=SC("postitems").innerHTML+d,o.switchpage+=1),o.backchecker(),PJAX.start()}},window.addEventListener("pjaxstart",function(){B.loadshow()},!1),window.addEventListener("pjaxfinish",function(){B.loadhide()},!1));var PJAX,mainhost=window.location.host,dt=(new Date).getTime();function q(e,t,n,a,i){void 0===localStorage.obottle&&(localStorage.obottle="{}");var o=0,r="",s=JSON.parse(localStorage.obottle),l=new Array;if(void 0!==s[t]&&(o=s[t].t,r=s[t].h),"w"==e){var s=JSON.parse(localStorage.obottle),c=new Object;c.h=n,c.t=a,c.rt=0,s[t]=c;try{localStorage.obottle=JSON.stringify(s)}catch(e){for(var d in s)(Number(s[d].rt)<=20||172800<=Number(a)-Number(s[d].t))&&delete s[d];localStorage.obottle=JSON.stringify(s)}}else{if("r"==e)return l.t=o,l.c=r,l;"e"==e&&((s=JSON.parse(localStorage.obottle))[t].rt=Number(s[t].rt)+i,localStorage.obottle=JSON.stringify(s))}}function timestamp(){return(new Date).getTime()}null!=PJAX&&null!=PJAX||(PJAX={index:null===window.history.state?1:window.history.state.page,PJAXStart:new CustomEvent("pjaxstart"),PJAXFinish:new CustomEvent("pjaxfinish"),LoadedPage:{},lasthref:window.location.href,preventurl:new Array,recenturl:"",replace:"",statu:!0,sel:function(e){this.replace=e},jump:function(n){var a=encodeURIComponent(n),i=this,o=!1;i.replace;if(-1!==i.recenturl.indexOf("#")&&-1!==n.indexOf("#"))return!1;-1==i.recenturl.indexOf("#")&&-1!==n.indexOf("#")&&(B.nowpage=0),window.dispatchEvent(i.PJAXStart),window.removeEventListener("scroll",B.lazycheck,!1),anichecker($.ecls($.loadset.listening,"",!1,!0),function(){var t;window.scrollTo(0,0),i.LoadedPage[a]?(i.clearevent(),B.tpcheck(!1,i.LoadedPage[a])):((t=q("r",a,"","","")).c&&(o=!0,i.clearevent(),B.tpcheck(!1,t.c)),$.ft(n,{},{success:function(e){i.recenturl=n,i.LoadedPage[a]=e,o?t.c!==e?(q("w",a,e,timestamp(),""),i.clearevent(),B.tpcheck(!1,e)):q("e",a,"","",1):(i.clearevent(),B.tpcheck(!1,e),q("w",a,e,timestamp(),""))},failed:function(e){window.dispatchEvent(i.PJAXFinish)}},"get",""))})},pjaxautojump:function(){PJAX.recenturl.split("#")[0]==window.location.href&&(window.history.replaceState(null,null,window.location.href+"#1"),PJAX.jump(window.location.href+"#1")),-1!==window.location.href.indexOf(mainhost)&&PJAX.jump(window.location.href)},clickevent:function(e){if(-1!==PJAX.preventurl.indexOf(this.href)||!this.href||""==this.href)return!0;window.history.pushState(null,null,this.href),e.preventDefault(),PJAX.jump(this.href)},clearevent:function(){var e,t=document.getElementsByTagName("a");for(e in t)"function"==typeof t[e].removeEventListener&&t[e].removeEventListener("click",this.clickevent);t=null},start:function(){this.statu=!0,this.recenturl=window.location.href,this.clearevent();var e,t=document.getElementsByTagName("a");for(e in t){var n=t[e]instanceof Element?t[e].getAttribute("onclick"):null;"function"!=typeof t[e].addEventListener||n||(t[e].setAttribute("pjax",""),t[e].addEventListener("click",this.clickevent,!1))}window.addEventListener("popstate",PJAX.pjaxautojump,!1),t=null},pause:function(){this.statu=!1,window.removeEventListener("popstate",PJAX.pjaxautojump)},autoprevent:function(){var e,t=document.getElementsByTagName("a"),n=window.location.host;for(e in t)void 0!==t[e].href&&-1==t[e].href.indexOf(n)&&this.preventurl.push(t[e].href);t=null}}),B.tpcheck();