/*FrontMainJS ver2.1.5 - SomeBottle20201229*/
 /*q.js*/
var md;if("object"!==typeof $){$={ls:[],lss:"",loadset:{},aj:function(a,d,c,f,g,h){if("false"!==a&&a){var k=new XMLHttpRequest,m="",p;for(p in d)m=m+p+"\x3d"+d[p]+"\x26";""!==g&&(a=g+a);m=m.substring(0,m.length-1);"get"==f?k.open("get",a,h):k.open("post",a,h);k.setRequestHeader("Content-type","application/x-www-form-urlencoded");k.send(m);k.onreadystatechange=function(){4==k.readyState&&200==k.status?c.success(k.responseText,a):4==k.readyState&&200!==k.status&&c.failed(k.status,a)};h||(void 0!==k.responseText?c.success(k.responseText,a):c.failed(k.status,a))}}};var SC=function(a){return"body"==a?document.body:"html"==a?document.getElementsByTagName("html")[0]:document.getElementById(a)};$.script=function(a){$.scripturl||($.scripturl=[]);var d=document.createElement("script"),c=!1,f;for(f in $.ls)if($.ls[f]==a){c=!0;break}c||-1!=$.scripturl.indexOf(a)||($.ls[$.ls.length]=a,d.type="text/javascript",d.src=a,$.scripturl.push(a),document.body.appendChild(d))};$.ht=function(a,d,c){c=void 0===c?!0:c;var f=SC(d);if(!f)return console.log("Unable to find the Element:"+d),!1;f.innerHTML=a;os=f.getElementsByTagName("script");for(d=0;d<os.length;d++)if(void 0!==os[d].src&&null!==os[d].src&&""!==os[d].src)$.script(os[d].src);else try{a=os[d].innerHTML,c&&(a=B.r(a,"/*",""),a=B.r(a,"*/","")),setTimeout(a,0)}catch(g){console.log("Page script Error: "+g.message)}os=null};$.tr=function(a){b=a.split("?");return b[1]?b[0]:a};$.dt=function(a){if(1E7<=Number(a)){a=String(a);var d=a.slice(-4),c=d.slice(-2),f=d.substring(0,2);return a.replace(d,"")+"-"+f+"-"+c}return a};$.rmhead=function(a){var d=document.createElement("html");d.innerHTML=a;a=d.getElementsByTagName("clothhead")[0];a.parentNode.removeChild(a);a=[d.innerHTML,a.innerHTML];d.remove();return a};$.addhead=function(a){var d=SC("html").getElementsByTagName("head")[0],c=d.getElementsByTagName("clothhead");if("html"!==d.parentNode.tagName.toLowerCase())return!1;0>=c.length?(c=document.createElement("clothhead"),c.innerHTML=a,d.appendChild(c)):c[0].innerHTML=a};$.ldparse=function(a){var d=document.createElement("html");d.innerHTML=a;(a=(a=d.getElementsByTagName("loadset"))?JSON.parse(a[0].innerHTML):!1)?$.loadset=a:console.log("Failed to initialize loading page.");d.remove()};$.ecls=function(a,d,c,f){c=void 0===c?!1:c;f=void 0===f?!1:f;a=a.split(":");var g=document.getElementsByTagName("html")[0],h;switch(a[0]){case "id":h=document.getElementById(a[1]);break;case "class":h=g.getElementsByClassName(a[1]);break;case "tag":h=g.getElementsByTagName(a[1])}if(f)return h;if(h instanceof Element)c?h.classList.remove(d):h.classList.add(d);else for(var k in h)h[k]instanceof Element&&(c?h[k].classList.remove(d):h[k].classList.add(d))}}if(!B){if(localStorage["obottle-ldpage"]){var e=SC("html").innerHTML,ldlocalused=!0;$.ldparse(localStorage["obottle-ldpage"]);SC("html").innerHTML=e.replace("\x3c!--[LoadingArea]--\x3e",localStorage["obottle-ldpage"])}else ldlocalused=!1;$.aj("./loading.html","",{success:function(a,d){ldlocalused||(B.hr("\x3c!--[LoadingArea]--\x3e",a),$.ldparse(a));localStorage["obottle-ldpage"]=a},failed:function(a){console.log("LoadingPage Load Failed")}},"get","",!0);$.script("https://cdn.jsdelivr.net/gh/BottleSome/blog/library.js");window.htmls={};var B={moreperpage:0,r:function(a,d,c,f,g){f=void 0===f?!1:f;g=void 0===g?!0:g;if(f)return"("==f?a.replace(new RegExp("\\{\\("+d+"\\)\\}",(g?"g":"")+"i"),c):a.replace(new RegExp("\\{\\["+d+"\\]\\}",(g?"g":"")+"i"),c);if(g)for(;-1!==a.indexOf(d);)a=a.replace(d,c);else a=a.replace(d,c);return a},navlist:{statu:!1,conf:{}},navcurrent:function(a){a=void 0===a?"":a;return((-1==a.indexOf("http")?a:a.replace(window.location.protocol+"//"+window.location.hostname,""))||window.location.pathname).replace(".html","")},navcheck:function(){var a=document.body,d=this.navlist.conf;if(this.navlist.statu){var a=a.getElementsByClassName(d.navclass),c=this.navcurrent(),f;for(f in a){var g=this.navcurrent(a[f].href),h=c.lastIndexOf(g),k=c.length,m=g.length;(c==g||h+m==k&&-1!==h)&&a[f]instanceof Element?a[f].classList.add(d.activeclass):a[f]instanceof Element&&a[f].classList.contains(d.activeclass)&&a[f].classList.remove(d.activeclass)}}},nav:function(a){this.navlist.statu=!0;this.navlist.conf=a},scrolltop:function(a,d){var c=Math.floor(parseInt(document.body.scrollTop)/3),f=Math.pow(a,2)/(2*c),g=0,h=setInterval(function(){var a=document.body.scrollTop;parseInt(a)>2*c?(g+=f,document.body.scrollTop=parseInt(a)-g):parseInt(a)>c?document.body.scrollTop=parseInt(a)-g:parseInt(a)<=c&&(g-=f,g<=d&&(g=d),0>=parseInt(a)?(document.body.scrollTop=0,clearInterval(h)):document.body.scrollTop=parseInt(a)-g)},10)},hc:function(a){return a=a.replace(/&amp;/g,"\x26").replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e")},hr:function(a,d){var c=SC("html").innerHTML;SC("html").innerHTML=this.r(c,a,d)},unrnspace:function(a){a=a.replace(/{{s}}/g," ");a=a.replace(/{{rn}}/g,"\r\n");return a=a.replace(/{{n}}/g,"\n")},deltemptags:function(a){return a.replace(/\{\((.*?)\)\}/g,"")},preventscript:function(){var a=SC("html").getElementsByTagName("script"),d;for(d in a)a[d].src&&-1==$.scripturl.indexOf(a[d].src)&&$.scripturl.push(a[d].src)},dehtml:function(a){return a.replace(/&amp;/g,"\x26").replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&nbsp;/g," ").replace(/&#39;/g,"'").replace(/&quot;/g,'"')},gt:function(a,d,c,f){c=void 0===c?!1:c;f=void 0===f?!1:f;c=c?c:SC("html").innerHTML;try{var g=f?c.split(a)[1]:c.split(new RegExp("\\{\\("+a+"\\)\\}","i"))[1],h=f?g.split(d)[0]:g.split(new RegExp("\\{\\("+d+"\\)\\}","i"))[0];return this.dehtml(h)}catch(k){return!1}},lazypre:function(a){var d=document.createElement("div");d.innerHTML=a;a=d.getElementsByTagName("img");for(var c in a)if(a[c].src){var f=a[c].src;a[c].src="data:image/gif;base64,R0lGODlhkAGQAYAAAP///wAAACH5BAEAAAAALAAAAACQAZABAAL/hI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8fksvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFhoeIiYqLjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7vL2+v7CxwsPExcbHyMnKy8zNzs/AwdLT1NXW19jZ2tvc3d7f0NHi4+Tl5ufo6err7O3u7+Dh8vP09fb3+Pn6+/z9/v/w8woMCBBAsaPIgwocKFDBs6fAgxosSJFCtavIgxo8aN/xw7evwIMqTIkSRLmjyJMqXKlSxbunwJM6bMmTRr2ryJM6fOnTx7+vwJNKjQoUSLGj2KNKnSpUybOn0KNarUqVSrWr2KNavWrVy7ev0KNqzYsWTLmj2LNq3atWzbun0LN67cuXTr2r2LN6/evXz7+v0LOLDgwYQLGz6MOLHixYwbO34MObLkyZQrW76MObPmzZw7e/4MOrTo0aRLmz6NOrXq1axbu34NO7bs2bRr276NO7fu3bx7+/4NPLjw4cSLGz+OPLny5cybO38OPbr06dSrW7+OPbv27dy7e/8OPrz48eTLmz+PPr369ezbu38PP778+fTr27+PP7/+/fz7+03/D2CAAg5IYIEGHohgggouyGCDDj4IYYQSTkhhhRZeiGGGGm7IYYcefghiiCKOSGKJJp6IYooqrshiiy6+CGOMMs5IY4023ohjjm0UAAA7";""!==a[c].style.width&&(f=f+"[width]"+a[c].style.width);a[c].setAttribute("data-src","[lazy]"+f);a[c].style.width="100%"}c=d.innerHTML;d.remove();return c},lazycheck:function(){var a=window.innerHeight,d=document.documentElement.scrollTop||document.body.scrollTop,c=document.getElementsByTagName("img"),f;for(f in c)if(a+d>c[f].offsetTop){var g=c[f].getAttribute("data-src");if("undefined"!==g&&g){c[f].setAttribute("data-src","");var h=g.split("[lazy]")[1];-1!==h.indexOf("[width]")?(g=h.split("[width]"),c[f].src=g[0],c[f].style.width=g[1]):(c[f].src=g.split("[lazy]")[1],c[f].style.width="auto")}}},templonload:0,templateloaded:[],tpcheckstatu:!1,loadstatu:!1,tpcheck:function(a){var d=this,c=this;if(!d.tpcheckstatu||(void 0===a?0:a)){d.tpcheckstatu=!0;d.loadshow();var f=d.gt("PageType","PageTypeEnd");if(window.templjson)if(window.mainjson||-1===window.templjson.usemain.indexOf(f))if("object"!==typeof showdown)setTimeout(function(){return c.tpcheck(!0)},50);else if(localStorage["obottle-ldpage"]){d.preventscript();a=window.templjson;a.necessary.push(f);f==a.templatehtmls.postlist&&a.necessary.push(a.templatehtmls.postitem);for(var g in a.necessary)if(-1==c.templateloaded.indexOf(a.necessary[g])){c.templonload+=1;var h=!1,k=q("r","template-"+a.necessary[g],"","","");k.c&&(h=!0,f=a.necessary[g],console.log("Template using cache:"+f),window.htmls[f]=k.c,c.templateloaded.push(f),--c.templonload);$.aj(a.necessary[g],"",{success:function(a,d){window.htmls[d]=a;h?k.c!==a?q("w","template-"+d,a,timestamp(),""):q("e","template-"+d,"","",1):(c.templateloaded.push(d),--c.templonload,q("w","template-"+d,a,timestamp(),""))},failed:function(a){console.log("Necessary HTML Load Failed...")}},"get","",!0)}var m=setInterval(function(){0>=c.templonload&&(clearInterval(m),c.renderer())},50);a=null}else setTimeout(function(){return c.tpcheck(!0)},50);else window.mainjsonrequest||(window.mainjsonrequest=!0,$.aj(window.templjson.mainjson,"",{success:function(a){window.mainjson=JSON.parse(a.replace(/[\r\n]/g,""));d.moreperpage=parseInt(window.mainjson.more_per_page)},failed:function(a){console.log("MainJson Load Failed")}},"get","https://cdn.jsdelivr.net/gh/BottleSome/blog/",!0)),setTimeout(function(){return c.tpcheck(!0)},50);else $.aj("template.json","",{success:function(a){window.templjson=JSON.parse(a);return d.tpcheck(!0)},failed:function(a){console.log("TemplateJson Load Failed.")}},"get","",!0)}},itempage:0,switchpage:0,nowpage:0,realpage:1,searchw:"",hashexist:!1,rendering:!1,itempagefixer:function(){var a=window.mainjson,d=1,c;for(c in a.dateindex){var f=this.itempage,g=c.replace("post",""),g=a.postindex[g];d<=f&&g.link&&(this.itempage+=1);d+=1}--this.itempage},cd:function(a){for(;-1!==a.indexOf("\x3cifcover\x3e");){var d=B.gt("\x3cifcover\x3e","\x3c/ifcover\x3e",a,!0);a=B.r(a,"\x3cifcover\x3e"+d+"\x3c/ifcover\x3e","")}return a},renderer:function(){var a=this;if(!a.rendering){a.rendering=!0;var d=window.templjson;md=new showdown.Converter;var c=window.htmls[d.templatehtmls.cloth],f=window.htmls[d.templatehtmls.main],g=window.htmls[d.templatehtmls.comment],h=a.gt("PageType","PageTypeEnd"),k=window.mainjson;if(h==d.templatehtmls.post){var m=a.gt("PostContent","PostContentEnd"),p=a.gt("PostTitle","PostTitleEnd"),n=a.gt("PostDate","PostDateEnd"),t=a.gt("PostTag","PostTagEnd"),r=a.gt("PostID","PostIDEnd"),k=a.gt("PostCover","PostCoverEnd"),l=a.gt("MainTitle","MainTitleEnd").replace(/<\/?.+?>/g,""),m=a.r(window.htmls[d.templatehtmls.post],"postcontent",a.lazypre(md.makeHtml(a.hc(a.unrnspace(m.trim())))),!0),p=a.r(m,"posttitle",p,!0),m=[];isNaN(n)?t="\u9875\u9762":(m=t.split(","),t="",m.forEach(function(a,c){t=t+'\x3ca href\x3d"'+d.generatehtmls.tags+"#"+encodeURIComponent(a)+'" class\x3d"taglink"\x3e'+a+"\x3c/a\x3e,"}),t=t.substr(0,t.length-1));p=a.r(p,"posttags",t,!0);p=a.r(p,"postdate",$.dt(n),!0);f=a.r(f,"contents",p,!0);c=a.r(c,"main",f,!0);l=a.r(c,"title",l,!0);c=$.rmhead(l);l=a.r(c[0],"comments",g,!0);l=a.r(l,"pid",r,!0);l=a.r(l,"pagetype",h,!0);l=a.r(l,"PageType","\x3c!--[PageType]","(",!1);l=a.r(l,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1);l=k&&"none"!==k&&""!==k?a.r(l,"postcover",k,!0):a.cd(l);isNaN(n)&&(h=l.split("{(:PostEnd)}")[0]+"\x3c!--PostEnd--\x3e",l="\x3c!--Footer--\x3e"+l.split("{(Footer:)}")[1],l=h+l);$.ht(a.deltemptags(l),"container");$.addhead(c[1]);anichecker($.ecls($.loadset.listening,"",!1,!0),function(){a.lazycheck()});l=k=null}else if(h==d.templatehtmls.postlist){m=a.gt("PostContent","PostContentEnd");l=a.gt("MainTitle","MainTitleEnd").replace(/<\/?.+?>/g,"");l=l.replace("-","");m=a.r(window.htmls[d.templatehtmls.postlist],"postitems",md.makeHtml(a.unrnspace(m.trim())),!0);f=a.r(f,"contents",m,!0);c=a.r(c,"main",f,!0);l=a.r(c,"title",l,!0);c=$.rmhead(l);l=a.r(c[0],"pagetype",h,!0);l=a.r(l,"PageType","\x3c!--[PageType]","(",!1);l=a.r(l,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1);a.itempage=parseInt(k.posts_per_page);a.itempagefixer();$.ht(a.deltemptags(l),"container");$.addhead(c[1]);var l=null,x=setInterval(function(){if(a.gt("\x3c!--[PageType]","[PageTypeEnd]--\x3e",!1,!0)!==d.templatehtmls.postlist)return console.log("jumped out of index"),PJAX.sel("container"),PJAX.start(),a.switchpage=0,clearInterval(x),!1;a.indexpagechecker()},100)}else if(h==d.templatehtmls.archives){var l=a.gt("MainTitle","MainTitleEnd").replace(/<\/?.+?>/g,""),n=window.htmls[d.templatehtmls.archives],g=a.gt("Archives","ArchivesEnd",n),D=a.gt("ArchiveTemplate","ArchiveTemplateEnd",n),E=a.gt("ArchiveItemTemplate","ArchiveItemTemplateEnd",n),z=k.dateindex,v="",u="",A=0;for(m in z){n=z[m].toString().substring(0,4);n!==A&&(A=n,""!==u&&(v=a.r(v,"archiveitems",u,!0),u=""),v+=a.r(D,"archiveyear",n,!0));var r=m.replace("post",""),p=Base64.decode(k.postindex[r].title),n=k.postindex[r].date,C="",C=k.postindex[r].link?k.postindex[r].link:"post-"+r+".html",r=a.r(E,"archiveitemlink",C,!0),r=a.r(r,"archiveitemtitle",p,!0),r=a.r(r,"archiveitemdate",$.dt(n),!0),u=u+r}""!==u&&(v=a.r(v,"archiveitems",u,!0));m=a.r(g,"archives",v+"\x3c/ul\x3e",!0);f=a.r(f,"contents",m,!0);c=a.r(c,"main",f,!0);l=a.r(c,"title",l,!0);c=$.rmhead(l);l=a.r(c[0],"pagetype",h,!0);l=a.r(l,"PageType","\x3c!--[PageType]","(",!1);l=a.r(l,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1);$.ht(a.deltemptags(l),"container");$.addhead(c[1]);l=null}else if(h==d.templatehtmls.tags){var l=a.gt("MainTitle","MainTitleEnd").replace(/<\/?.+?>/g,""),n=window.htmls[d.templatehtmls.tags],g=a.gt("Tags","TagsEnd",n),F=a.gt("TagItemTemplate","TagItemTemplateEnd",n),p=$.tr(window.location.href),w="",k=k.postindex,y=[];for(r in k)n=k[r].tags.split(","),n.forEach(function(a,c){""!==a&&-1==y.indexOf(a)&&y.push(a)});y.forEach(function(c,d){var f=a.r(F,"tagitemtitle",c,!0),f=a.r(f,"tagitemlink","#"+encodeURIComponent(c),!0);w+=f});a.alltaghtml=w;-1!==p.indexOf("#")&&(k=p.split("#")[1],a.nowtag=k,"alltags"!==k&&(w="\x3cscript\x3eB.taguper('"+k+"');PJAX.sel('container');PJAX.start();\x3c/script\x3e"));x=setInterval(function(){if(-1==window.location.href.indexOf(d.generatehtmls.tags)&&-1==window.location.href.indexOf(d.generatehtmls.tags.replace(".html","")))return PJAX.sel("container"),PJAX.start(),clearInterval(x),!1;a.tagpagechecker()},100);m=a.r(g,"tags",w,!0);f=a.r(f,"contents",m,!0);c=a.r(c,"main",f,!0);l=a.r(c,"title",l,!0);c=$.rmhead(l);l=a.r(c[0],"pagetype",h,!0);l=a.r(l,"PageType","\x3c!--[PageType]","(",!1);l=a.r(l,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1);$.ht(a.deltemptags(l),"container");$.addhead(c[1]);l=null}a.tpcheckstatu=!1;a.rendering=!1;window.dispatchEvent(PJAX.PJAXFinish)}},nowtag:"",alltaghtml:"",taguper:function(a){a=decodeURIComponent(a);SC("html");var d=this,c=window.htmls[window.templjson.templatehtmls.tags],f=d.gt("TagListTemplate","TagListTemplateEnd",c),g=d.gt("TagListItemTemplate","TagListItemTemplateEnd",c),h=window.mainjson,c=h.dateindex,k=h.postindex,h=[],m="",p;for(p in c)c=p.replace("post",""),-1!==k[c].tags.indexOf(a)&&h.push(c);m+="\x3cul\x3e";h.forEach(function(a,c){var f=k[a],h="post-"+a+".html",n=$.dt(f.date);f.link&&(h=f.link+".html");h=d.r(g,"taglistitemlink",h,!0);h=d.r(h,"taglistitemtitle",Base64.decode(f.title),!0);h=d.r(h,"taglistitemdate",$.dt(n),!0);m+=h});m=d.r(f,"taglist",m,!0);m=d.r(m,"tagcurrent",a,!0);SC("tags").innerHTML=m;m=null},tagpagechecker:function(){SC("html");var a=$.tr(window.location.href);-1==a.indexOf("#")?(PJAX.pause(),window.location.replace(a+"#alltags"),PJAX.start()):(a=a.split("#")[1],this.nowtag!==a&&(this.nowtag=a,"alltags"==a?SC("tags")&&(SC("tags").innerHTML=this.alltaghtml):this.taguper(a),PJAX.start()))},indexpagechecker:function(){SC("html");var a=window.templjson,d=$.tr(decodeURIComponent(window.location.href)),c=window.mainjson,f=parseInt(c.posts_per_page);if(-1!==d.indexOf("#")){this.hashexist=!0;var g=d.split("#")[1];if(-1==d.indexOf("#!")){if(!isNaN(g)){var h=parseInt(g)-1;this.nowpage!==h&&(console.log("hash changed"),this.searchw="",this.nowpage=h,this.itempage=f*h*this.moreperpage,this.itempagefixer(),SC("postitems").innerHTML="",this.more(!0),this.realpage=h+1,this.switchpage=0)}}else{var k="",a=window.htmls[a.templatehtmls.postitem],f=this.gt("PostItem","PostItemEnd",a),a=this.gt("NoItem","NoItemEnd",a),d=d.split("#!")[1];if(d!==this.searchw){var m=function(){SC("postitems")&&SC("morebtn")?(window.scrollTo(0,0),SC("postitems").innerHTML=k,SC("morebtn").style.display="none",PJAX.start()):setTimeout(function(){return m()},200)};this.searchw=d;c=c.postindex;for(h in c){var p=Base64.decode(c[h].title).toLowerCase(),n=Base64.decode(c[h].intro).toLowerCase(),t=c[h].date.toLowerCase(),g=c[h].tags,r=g.toLowerCase(),d=d.toLowerCase();if(-1!==p.indexOf(d)||-1!==n.indexOf(d)||-1!==t.indexOf(d)||-1!==r.indexOf(d))p=B.r(f,"postitemtitle",p,!0),n=B.r(p,"postitemintro",n+"...",!0),t=B.r(n,"postitemdate",$.dt(t),!0),g=B.r(t,"postitemtags",g.replace(/,/g,"\u00b7"),!0),g=c[h].link?B.r(g,"postitemlink",c[h].link+".html",!0):B.r(g,"postitemlink","post-"+h+".html",!0),g=c[h].cover?B.r(g,"postcover",c[h].cover,!0):this.cd(g),k+=g,g=null}""==k&&(k=a);this.tpcheckstatu||this.loadstatu||m()}if(this.tpcheckstatu||this.loadstatu)this.searchw=""}}else this.searchw="",this.hashexist&&(this.realpage=1,this.switchpage=0,this.hashexist=!1)},loadshow:function(){this.loadstatu=!0;if($.loadset.animations){var a=$.loadset.animations["in"],d=$.loadset.animations.out,c;for(c in a)$.ecls(c,a[c]);for(c in d)$.ecls(c,d[c],!0)}},loadhide:function(){this.loadstatu=!1;var a=$.loadset.animations.out,d=$.loadset.animations["in"],c;for(c in a)$.ecls(c,a[c]);for(c in d)$.ecls(c,d[c],!0)},morehtmls:{},more:function(a){a=void 0===a?!1:a;var d=this.itempage+1,c=0,f=0,g="",h=window.mainjson,k=window.htmls[window.templjson.templatehtmls.postitem],m=this.gt("PostItem","PostItemEnd",k),k=this.gt("NoItem","NoItemEnd",k),p=parseInt(h.posts_per_page),n=h.dateindex,t;for(t in n)if(d<=f){if(c<p){var r=t.replace("post",""),n=h.postindex[r];if(n.link)this.itempage+=1,--c;else var l=B.r(m,"postitemtitle",Base64.decode(n.title),!0),l=B.r(l,"postitemintro",Base64.decode(n.intro)+"...",!0),l=B.r(l,"postitemdate",$.dt(n.date),!0),l=B.r(l,"postitemtags",n.tags.replace(/,/g,"\u00b7"),!0),r=B.r(l,"postitemlink","post-"+r+".html",!0),r=n.cover?B.r(r,"postcover",n.cover,!0):this.cd(r),g=g+r;c+=1}}else f+=1;""==g?(g=k,SC("morebtn").style.display="none"):SC("morebtn").style.display="block";this.itempage+=p;this.switchpage>=this.moreperpage-1&&!a?(SC("postitems").innerHTML=g,this.scrolltop(20,2),this.switchpage=0,this.realpage+=1,PJAX.pause(),window.location.href="#"+this.realpage):(SC("postitems").innerHTML=SC("postitems").innerHTML+g,this.switchpage+=1);PJAX.start()}};window.addEventListener("scroll",B.lazycheck,!1);window.addEventListener("pjaxstart",function(){B.loadshow()},!1);window.addEventListener("pjaxfinish",function(){B.loadhide()},!1)}function anichecker(a,d){function c(){d();a.removeEventListener(f,c)}var f="",g={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},h;for(h in g)void 0!==a.style[h]&&(f=g[h]);a.addEventListener(f,c)}var mainhost=window.location.host,dt=(new Date).getTime();if(void 0==PJAX||null==PJAX)var PJAX={index:null===window.history.state?1:window.history.state.page,PJAXStart:new CustomEvent("pjaxstart"),PJAXFinish:new CustomEvent("pjaxfinish"),LoadedPage:{},lasthref:window.location.href,preventurl:[],recenturl:"",replace:"",statu:!0,sel:function(a){this.replace=a},jump:function(a){var d=encodeURIComponent(a),c=this,f=!1,g=c.replace;""==g&&(g="container");if(-1!==c.recenturl.indexOf("#")&&-1!==a.indexOf("#"))return!1;-1==c.recenturl.indexOf("#")&&-1!==a.indexOf("#")&&(B.nowpage=0);window.dispatchEvent(c.PJAXStart);anichecker($.ecls($.loadset.listening,"",!1,!0),function(){window.scrollTo(0,0);if(c.LoadedPage[d])c.clearevent(!0),$.ht(c.LoadedPage[d],g,!1);else{var h=q("r",d,"","","");h.c&&(f=!0,c.clearevent(!0),$.ht(h.c,g,!1));$.aj(a,{},{success:function(k){c.recenturl=a;c.LoadedPage[d]=k;f?h.c!==k?(q("w",d,k,timestamp(),""),c.clearevent(!0),$.ht(k,g,!1),c.start()):q("e",d,"","",1):(c.clearevent(!0),$.ht(k,g,!1),q("w",d,k,timestamp(),""))},failed:function(a){window.dispatchEvent(c.PJAXFinish)}},"get","",!0)}})},pjaxautojump:function(){PJAX.recenturl.split("#")[0]==window.location.href&&(window.history.replaceState(null,null,window.location.href+"#1"),PJAX.jump(window.location.href+"#1"));-1!==window.location.href.indexOf(mainhost)&&PJAX.jump(window.location.href)},clickevent:function(a){if(-1===PJAX.preventurl.indexOf(this.href)&&this.href&&""!=this.href)window.history.pushState(null,null,this.href),a.preventDefault(),PJAX.jump(this.href);else return!0},clearevent:function(a){a=void 0===a?!1:a;var d=document.getElementsByTagName("a"),c;for(c in d)"function"==typeof d[c].removeEventListener&&(d[c].removeEventListener("click",this.clickevent),a?d[c].parentNode.removeChild(d[c]):d[c]=d[c])},start:function(){this.statu=!0;this.recenturl=window.location.href;this.clearevent();var a=document.getElementsByTagName("a"),d;for(d in a)"function"==typeof a[d].addEventListener&&(a[d].setAttribute("pjax",""),a[d].addEventListener("click",this.clickevent,!1));window.addEventListener("popstate",PJAX.pjaxautojump,!1)},pause:function(){this.statu=!1;window.removeEventListener("popstate",PJAX.pjaxautojump)},autoprevent:function(){var a=document.getElementsByTagName("a"),d=window.location.host,c;for(c in a)void 0!==a[c].href&&-1==a[c].href.indexOf(d)&&this.preventurl.push(a[c].href)}};function q(a,d,c,f,g){"undefined"==typeof localStorage.obottle&&(localStorage.obottle="{}");var h=0,k="",m=JSON.parse(localStorage.obottle),p=[];"undefined"!==typeof m[d]&&(h=m[d].t,k=m[d].h);if("w"==a){m=JSON.parse(localStorage.obottle);a={};a.h=c;a.t=f;a.rt=0;m[d]=a;try{localStorage.obottle=JSON.stringify(m)}catch(t){for(var n in m)(20>=Number(m[n].rt)||172800<=Number(f)-Number(m[n].t))&&delete m[n];localStorage.obottle=JSON.stringify(m)}}else{if("r"==a)return p.t=h,p.c=k,p;"e"==a&&(m=JSON.parse(localStorage.obottle),m[d].rt=Number(m[d].rt)+g,localStorage.obottle=JSON.stringify(m))}}function timestamp(){return(new Date).getTime()}B.tpcheck();