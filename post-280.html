<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<!--description-->
<meta name="description" content="æœ€è¿‘åšPythonè¯¾å®éªŒå‘ç°æ­£åˆ™è¡¨è¾¾å¼å’Œå®ƒåœ¨pyä¸­çš„çš„æ ‡å‡†åº“reæœ‰å¾ˆå¤šèƒ½å¤šç¢ç£¨ä¸€ä¸‹çš„ç‚¹ï¼Œé‚å†³å®šå†™æˆä¸€ç¯‡å°è®°ï¼Œä»¥åæƒ³å¤ä¹ èƒ½å†æ¥çœ‹çœ‹ã€‚#åè¯å› ä¸ºä¸åŒæ–‡çŒ®ä¹¦ç±å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„æè¿°æœ‰å·®åˆ«ï¼Œæˆ‘åœ¨è¿™é‡Œåˆ—å‡ºä¸€..." />
<!--Keywords-->
<meta name="keywords" content="Python,å­¦ä¹ ,å°è®°,Bottleå°ç«™" />
</head>
<loadingarea></loadingarea>
<div id='container'>
<style>#container{opacity:0;word-wrap:break-word;word-break:break-all;max-width:50%;overflow:hidden}</style>
{(MainTitle)}<title>Pythonæ­£åˆ™è¡¨è¾¾å¼ç»†èŠ‚å°è®°-Bottleå°ç«™</title>{(MainTitleEnd)}
<body>
{(PostTitle)}Pythonæ­£åˆ™è¡¨è¾¾å¼ç»†èŠ‚å°è®°{(PostTitleEnd)}
{(PostDate)}20211105{(PostDateEnd)}
{(PostContent)}
æœ€è¿‘åšPythonè¯¾å®éªŒå‘ç°**æ­£åˆ™è¡¨è¾¾å¼**å’Œå®ƒåœ¨pyä¸­çš„çš„**æ ‡å‡†åº“re**æœ‰å¾ˆå¤šèƒ½å¤šç¢ç£¨ä¸€ä¸‹çš„ç‚¹ï¼Œé‚å†³å®šå†™æˆä¸€ç¯‡å°è®°ï¼Œä»¥åæƒ³å¤ä¹ èƒ½å†æ¥çœ‹çœ‹ã€‚  

![fuwafuwa-2021-11-02](https://cdn.jsdelivr.net/gh/cat-note/bottleassets@latest/img/fuwafuwa-2021-11-02.gif)  

## åè¯  

å› ä¸ºä¸åŒæ–‡çŒ®ä¹¦ç±å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„æè¿°æœ‰å·®åˆ«ï¼Œæˆ‘åœ¨è¿™é‡Œåˆ—å‡ºä¸€ä¸‹æœ¬æ–‡ç”¨åˆ°çš„éƒ¨åˆ†åè¯è¡¨è¿°ï¼š  

|æœ¬å°è®°ä¸­|å…¶ä»–è¯´æ³•|
|:---:|:---:|
|æ¨¡å¼|è¡¨è¾¾å¼ / pattern|
|å­æ¨¡å¼|å­è¡¨è¾¾å¼ / å­ç»„ / subpattern|
|è´ªå©ªæ¨¡å¼|è´ªå¿ƒæ¨¡å¼ / greedy mode|
|éè´ªå©ªæ¨¡å¼|éè´ªå¿ƒæ¨¡å¼ / æ‡’æƒ°æ¨¡å¼ / lazy mode |
|éæ•è·ç»„|non-capturing groups|
|å‘å‰æŸ¥æ‰¾|look-ahead|
|å‘åæŸ¥æ‰¾|look-behind|
|å­—ç¬¦ç»„|character class|

&lt;bblock style=&quot;display:none;&quot;&gt;
{
 &quot;title&quot;: &quot;Near End&quot;,
 &quot;artist&quot;: &quot;park bird&quot;,
 &quot;src&quot;: &quot;https://api.xbottle.top/ne/url/1327063542&quot;,
 &quot;cover&quot;: &quot;https://api.xbottle.top/ne/cover/1327063542&quot;,
 &quot;float&quot;: &quot;right&quot;
}
&lt;/bblock&gt;

## ä½¿ç”¨åŸç”Ÿå­—ç¬¦ä¸²  

å°±æˆ‘ä¸ªäººæ„Ÿè§‰ï¼Œåœ¨Pythonå†™æ­£åˆ™è¡¨è¾¾å¼çš„æ—¶å€™æœ€å¥½å…»æˆä½¿ç”¨**åŸç”Ÿå­—ç¬¦ä¸²**çš„ä¹ æƒ¯ã€‚  

```python
&#039;\d{4}&#039; # å­—ç¬¦ä¸²
r&#039;\d{4}&#039; # åŸç”Ÿå­—ç¬¦ä¸²(raw)
```

ä¸ºä»€ä¹ˆå‘¢ï¼Ÿåœ¨å­—ç¬¦ä¸²ä¸­``` \ ```æ˜¯ä¸€ä¸ªè½¬ä¹‰ç¬¦å·ï¼Œè®¾æƒ³æˆ‘ä»¬æƒ³ç”¨æ­£åˆ™åŒ¹é…åæ–œæ ``` \ ```ï¼š  

```python
re.findall(&#039;\\\\&#039;,string) # å‰ä¸¤ä¸ª\\å…ˆåœ¨è¯­å¥ä¸­è½¬ä¹‰ï¼Œåä¸¤ä¸ª\\å†åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­è½¬ä¹‰ä¸ºä¸€ä¸ªåæ–œæ   
re.findall(r&#039;\\&#039;,string) # åªéœ€è¦åœ¨è¯­å¥ä¸­è½¬ä¹‰æˆä¸€ä¸ªåæ–œæ å°±è¡Œäº†  
```

å¦å¤–å¦‚æœæˆ‘ä»¬è¦åŒ¹é…ä¸¤ä¸ªè¿ç»­ç›¸ç­‰çš„å­—ç¬¦ï¼š  

```python
re.findall(&#039;(.)\1&#039;,st) # æ— æ³•åŒ¹é…åˆ°ä¸¤ä¸ªç›¸åŒå­—ç¬¦ï¼Œå› ä¸ºåœ¨è¯­å¥ä¸­è½¬ä¹‰ååˆ°äº†æ­£åˆ™è¡¨è¾¾å¼å°±æ²¡æœ‰åæ–œæ äº†  
re.findall(&#039;(.)\\1&#039;,st) # è¿™æ ·å†è½¬ä¹‰ä¸€æ¬¡å°±å¯ä»¥äº†
re.findall(r&#039;(.)\1&#039;,st) # å¾ˆæ˜æ˜¾è¿™æ ·å†™æ›´å¥½  
```

å› æ­¤ï¼Œä¸ºäº†é˜²æ­¢æ¼å†™åæ–œæ å¯¼è‡´æ’æŸ¥æ­£åˆ™è¡¨è¾¾å¼æ—¶äº§ç”Ÿé¢å¤–çš„å›°éš¾ï¼Œåœ¨Pythoné‡Œè¿˜æ˜¯å…»æˆç”¨**åŸç”Ÿå­—ç¬¦ä¸²**å†™æ­£åˆ™è¡¨è¾¾å¼çš„ä¹ æƒ¯ä¸ºå¥½ã€‚

## å­æ¨¡å¼æ‰©å±•è¯­æ³•  

* ### look-behindè¯­æ³•é—®é¢˜  

    &lt;details&gt;
    &lt;summary&gt;å±•å¼€é˜…è¯»&lt;/summary&gt;

    ----

    è¿™ä¸€èŠ‚ä¸»è¦å›´ç»•&lt;a href=&#039;#lookBehindIf&#039;&gt;```(?&lt;=[pattern])```&lt;/a&gt;å’Œ&lt;a href=&#039;#lookBehindIfNot&#039;&gt;```(?&lt;![pattern])```&lt;/a&gt;ä¸¤ä¸ªå­æ¨¡å¼æ‰©å±•è¯­æ³•å±•å¼€ã€‚

    ```python
    s = &#039;Dr.David Jone,Ophthalmology,x2441 \
    Ms.Cindy Harriman,Registry,x6231 \
    Mr.Chester Addams,Mortuary,x6231 \
    Dr.Hawkeye Pierce,Surgery,x0986&#039;
    pattern=re.compile(r&#039;(?&lt;=\s*)([A-Za-z]*)(?=,)&#039;)
    ```

    åœ¨è¿™ä¸ªä¾‹å­ä¸­æˆ‘åŸæœ¬æ˜¯æƒ³å¯»æ‰¾å­—ç¬¦ä¸²ä¸­äººåçš„å§“æ°çš„ï¼Œä½†è„‘è¢‹ä¸€çƒ­å†™äº†ä¸ª```\s*```ï¼Œè·‘äº†ä¸€ä¸‹å½“å³ç»™æˆ‘è¿”å›äº†é”™è¯¯:  

    ```re.error: look-behind requires fixed-width pattern```  

    æˆ‘ä¸€ä¼šå„¿æ²¡ååº”è¿‡æ¥ï¼Œå›½å†…æœç´¢å¼•æ“ä¹Ÿæ²¡æŸ¥åˆ°ä¸ªå¤§æ¦‚ã€‚å†·é™ä¸‹æ¥åå’±æ³¨æ„åˆ°äº† **requires fixed-width pattern** è¿™ä¸€å¥ï¼Œæ„æ€æ˜¯éœ€è¦**å·²çŸ¥åŒ¹é…é•¿åº¦**çš„æ¨¡å¼ï¼ˆè¡¨è¾¾å¼ï¼‰ï¼Œå†çœ‹ä¸€çœ¼å‰é¢çš„look-behindï¼Œçªç„¶å’±å°±æç„¶å¤§æ‚Ÿäº†ï¼š  

    ```python
    pattern=re.compile(r&#039;(?&lt;=\s)([A-Za-z]*)(?=,)&#039;)
    ```

    è¿™æ ·å†™å°±æ²¡é—®é¢˜äº†ï¼Œæˆ‘ä»¬åŒ¹é…åˆ°äº†æ‰€æœ‰çš„å§“æ°ï¼š

    ```python
    print(pattern.findall(s))
    # [&#039;Jone&#039;, &#039;Harriman&#039;, &#039;Addams&#039;, &#039;Pierce&#039;]
    ```    
    
    &lt;a id=&#039;lookBehindIf&#039;&gt;é—®é¢˜å‡ºåœ¨å“ªå‘¢ï¼Ÿ&lt;/a&gt;  

    æ‰€è°“```look-behind```å…¶å®å°±æ˜¯```(?&lt;=[pattern])```ä¸€ç±»å­æ¨¡å¼æ‰©å±•è¯­æ³•ã€‚

    * **æ³¨æ„åˆ†è¾¨** ```(?&lt;=[pattern])```å’Œ```(?=[pattern])```ï¼Œ**å‰è€…**æ˜¯æ”¾åœ¨**å¾…åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ ä¹‹å‰**çš„ï¼Œ**åè€…**æ˜¯æ”¾åœ¨**å¾…åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ ä¹‹å**çš„ã€‚

    * è¿™ä¸¤ä¸ªå­æ¨¡å¼æ‰©å±•è¯­æ³•çš„åŠŸèƒ½æ˜¯ **åŒ¹é…[pattern]çš„å†…å®¹**ï¼Œä½†åœ¨ç»“æœä¸­**å¹¶ä¸ä¼šè¿”å›è¿™ä¸ªå­æ¨¡å¼**ã€‚
    
    * æˆ‘ä»¬é€šè¿‡è¡¨æ ¼æ¥è¯´æ˜ä¸€ä¸‹ï¼ŒåŠŸèƒ½æ˜¯**å¦‚æœåŒ¹é…åˆ°äº†**å³è¿”å› **```[pattern2]``` åŒ¹é…** çš„å†…å®¹ï¼š  

        | æ­£åˆ™å†™æ³• | æ­£è¯¯ |
        |:---:|:----:|
        |```(?&lt;=[pattern1])[pattern2](?=[pattern3])```|âˆš|
        |```(?=[pattern1])[pattern2](?&lt;=[pattern3])```|Ã—|
        |```[pattern4](?&lt;=[pattern1])[pattern2](?=[pattern3])```|âˆš|
        |```[pattern4](?&lt;=[pattern1])[pattern2](?=[pattern3])[pattern5]```|âˆš|
        |```(?&lt;=[pattern1])[pattern2]```|âˆš|
        |```[pattern2](?=[pattern1])```|âˆš|


    
    æ‹¿ä¸Šé¢çš„æ¨¡å¼ï¼ˆè¡¨è¾¾å¼ï¼‰ä¸¾ä¾‹ï¼š  

    ```python
    (?&lt;=\s)([A-Za-z]*)(?=,)
    ```  

    ä»åŒ¹é…å†…å®¹ä¸Šæ¥è¯´è¯¥æ¨¡å¼ï¼ˆè¡¨è¾¾å¼ï¼‰å…¶å®å°±æ˜¯ï¼š

    ```python
    \s([A-Za-z]*),
    ```  

    ä½† **å¦‚æœè¯¥æ¨¡å¼ï¼ˆè¡¨è¾¾å¼ï¼‰åŒ¹é…åˆ°äº†å†…å®¹**ï¼Œè¿”å›çš„ **éƒ¨åˆ†** æ˜¯ä¸åŒ…å«```(?&lt;=\s)```å’Œ```(?=,)```çš„åŒ¹é…å†…å®¹çš„ï¼š  

    ```python
    [A-Za-z]*
    ``` 

    ![sweat-2021-11-02](https://cdn.jsdelivr.net/gh/cat-note/bottleassets@latest/img/sweat-2021-11-02.jpg)  

    å’³å’³ï¼Œæœ‰ç‚¹åäº†ï¼Œç»§ç»­è®²å›æ¥ã€‚**è¦åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼**åœ¨```(?&lt;=[pattern])```åé¢ï¼Œæ‰€ä»¥åŒ¹é…çš„æ—¶å€™æ˜¯**å¾€åçœ‹çš„**ï¼Œæ‰€ä»¥```(?&lt;=[pattern])```å°±å«```look-behind```ã€‚  

    è¿èµ·æ¥çœ‹**look-behind requires fixed-width pattern**è¿™ä¸ªé”™è¯¯ï¼Œæ„æ€å°±æ˜¯```(?&lt;=[pattern])```ä¸­çš„å¾…åŒ¹é…å­æ¨¡å¼```[pattern]```çš„**å®½åº¦ä¸€å®šè¦èƒ½ç¡®å®š**ï¼  

    æˆ‘ä»¬ä¹‹å‰çš„å†™æ³•```(?&lt;=[pattern]*)```ç”¨äº†ä¸€ä¸ª**å…ƒå­—ç¬¦** ```*``` ï¼Œè¿™ä¸ªå…ƒå­—ç¬¦ä»£è¡¨å‰é¢çš„```[pattern]```ä¼šé‡å¤åŒ¹é… **0æ¬¡æˆ–æ›´å¤šæ¬¡** ï¼Œæ‰€ä»¥**å®½åº¦æ˜¯ä¸ç¡®å®š**çš„ï¼Œç”±æ­¤å¯¼è‡´äº†æŠ¥é”™ã€‚  

    -----

    &lt;a id=&#039;lookBehindIfNot&#039;&gt;é™¤æ­¤ä¹‹å¤–ï¼Œ&lt;/a&gt;

    ```(?&lt;![pattern]*)```ä¹Ÿæ˜¯look-behindå­æ¨¡å¼ï¼Œæ‰€ä»¥ä¹Ÿé€‚ç”¨äº**ä¸Šé¢çš„æƒ…å†µ**ã€‚

    * **åŒæ ·æ³¨æ„åˆ†è¾¨** ```(?&lt;![pattern])```å’Œ```(?![pattern])```ï¼Œ**å‰è€…**æ˜¯æ”¾åœ¨**å¾…åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ ä¹‹å‰**çš„ï¼Œ**åè€…**æ˜¯æ”¾åœ¨**å¾…åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ ä¹‹å**çš„ã€‚

    * è¿™ä¸¤ä¸ªå­æ¨¡å¼æ‰©å±•è¯­æ³•çš„åŠŸèƒ½æ˜¯ å¦‚æœ**æ²¡å‡ºç°[pattern]çš„å†…å®¹**å°±åŒ¹é…ï¼Œä½†åœ¨ç»“æœä¸­**å¹¶ä¸ä¼šè¿”å›è¿™ä¸ªå­æ¨¡å¼**ã€‚


    **ä¸€å¥è¯æ€»ç»“**ï¼šç»¼ä¸Šï¼Œåœ¨ä½¿ç”¨```(?&lt;=[pattern]*)```å’Œ```(?&lt;![pattern])```æ—¶ï¼Œåœ¨```[pattern]```é‡Œè¯·ä¸è¦ä½¿ç”¨ ```?``` , ```*``` , ```+``` è¿™äº›å¯¼è‡´**å®½åº¦ä¸ç¡®å®š**çš„å…ƒå­—ç¬¦ã€‚  

    |å…ƒå­—ç¬¦|åŠŸèƒ½|
    |:---:|:---:|
    |?|	åŒ¹é…å‰é¢çš„å­æ¨¡å¼**0æ¬¡æˆ–1æ¬¡**ï¼Œæˆ–è€…æŒ‡å®šå‰é¢çš„å­æ¨¡å¼è¿›è¡Œ**éè´ªå©ªåŒ¹é…**|
    |*|åŒ¹é…å‰é¢çš„å­æ¨¡å¼**0æ¬¡æˆ–å¤šæ¬¡**|
    |+|åŒ¹é…å‰é¢çš„å­æ¨¡å¼**1æ¬¡æˆ–å¤šæ¬¡**|

    ![speechless-2021-11-02](https://cdn.jsdelivr.net/gh/cat-note/bottleassets@latest/img/speechless-2021-11-02.jpg)  

    è¦å¥½å¥½è®°ä½å“¦~
    &lt;/details&gt;

* ### éæ•è·ç»„å’Œlook-ahead,look-behindçš„åŒºåˆ«  

    &lt;details&gt;
    &lt;summary&gt;å±•å¼€é˜…è¯»&lt;/summary&gt;

    ------

    åœ¨å­æ¨¡å¼æ‰©å±•è¯­æ³•ä¸­éæ•è·ç»„(non-capturing group)å†™ä½œ```(?:[pattern])```ï¼Œlook-aheadæ˜¯å‘å‰æŸ¥æ‰¾ï¼Œlook-behindæ˜¯å‘åæŸ¥æ‰¾ï¼Œæˆ‘ä»¬åˆ—å¼ è¡¨ï¼š

    |è‹±æ–‡æœ¯è¯­|ä¸­æ–‡æœ¯è¯­|æ¨¡å¼|
    |:---:|:---:|:---:|
    |æ­£å‘å‘åæŸ¥æ‰¾|positive look-behind|```(?&lt;=)```|
    |æ­£å‘å‘å‰æŸ¥æ‰¾|positive look-ahead|```(?=)```|
    |è´Ÿå‘å‘åæŸ¥æ‰¾|negative look-behind|```(?&lt;!)```|
    |è´Ÿå‘å‘å‰æŸ¥æ‰¾|negative look-ahead|```(?!)```|

    **æ­£å‘**å’Œ**è´Ÿå‘**æŒ‡çš„åˆ†åˆ«æ˜¯ ```å‡ºç°åˆ™åŒ¹é…``` å’Œ ```ä¸å‡ºç°åˆ™åŒ¹é…```ã€‚

    åœ¨ä¸Šé¢ä¸€èŠ‚é‡Œæˆ‘ä»¬å·²ç»è°ˆäº†ä¸€ä¸‹```look-ahead```å’Œ```look-behind```ï¼Œç°åœ¨åˆå‡ºç°ä¸ªéæ•è·ç»„ã€‚  

    éæ•è·ç»„```(?:[pattern])```çš„åŠŸèƒ½æ˜¯åŒ¹é…```[pattern]```ï¼Œä½†ä¸ä¼šè®°å½•è¿™ä¸ªç»„ï¼Œæ•´ä¸ªä¾‹å­çœ‹çœ‹ï¼š  

    ```python
    import re
    s = &#039;Cake is better than potato&#039;
    pattern = re.compile(r&#039;(?:is\s)better(\sthan)&#039;)
    print(pattern.search(s).group(0))
    # is better than
    print(pattern.search(s).group(1))
    # than
    ```
    
    ```Matchå¯¹è±¡```çš„```group(num/name)```æ–¹æ³•è¿”å›çš„æ˜¯å¯¹åº”ç»„çš„å†…å®¹ï¼Œå­æ¨¡å¼åºå·ä»**1**å¼€å§‹ã€‚```group(0)```è¿”å›çš„æ˜¯**æ•´ä¸ªæ¨¡å¼**çš„åŒ¹é…å†…å®¹ï¼ˆis better thanï¼‰ï¼Œè€Œ```group(1)```è¿”å›çš„æ˜¯**ç¬¬1ä¸ªå­æ¨¡å¼**çš„å†…å®¹ï¼ˆthanï¼‰ã€‚  

    è¿™é‡Œå¯ä»¥å‘ç°ç¬¬1ä¸ªå­æ¨¡å¼å¯¹åº”çš„æ˜¯```(\sthan)```è€Œä¸æ˜¯```(?:is\s)```ï¼Œä¹Ÿå°±æ˜¯è¯´```(?:is\s)```è¿™ä¸ªç»„**æœªè¢«æ•è·**ï¼ˆæ²¡æœ‰è¢«è®°å½•ï¼‰  

    é—®é¢˜æ¥äº†ï¼Œpositive look-aheadï¼ˆæ­£å‘å‘å‰æŸ¥æ‰¾ï¼‰```(?=[pattern])``` å’Œ positive look-behindï¼ˆæ­£å‘å‘åæŸ¥æ‰¾ï¼‰```(?&lt;=[pattern])``` æ˜¯ **å‡ºç°[pattern]åˆ™åŒ¹é…ï¼Œä½†å¹¶ä¸è¿”å›è¯¥å­æ¨¡å¼åŒ¹é…çš„å†…å®¹**ï¼Œå®ƒä»¬å’Œ```(?:[pattern])```æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ  

    æ‹¿ä¸‹é¢è¿™æ®µä»£ç çš„æ‰§è¡Œç»“æœæ¥åˆ—è¡¨ï¼š  

    ```python
    import re
    s = &#039;Cake is better than potato&#039;
    pattern = re.compile(r&#039;(?:is\s)better(\sthan)&#039;)
    pattern2 = re.compile(r&#039;(?&lt;=is\s)better(\sthan)&#039;)
    ```

    |å­æ¨¡å¼æ‰©å±•è¯­æ³•|pattern.group(0)|pattern.group(1)|
    |:---:|:---:|:---:|
    |(?:[subpattern])|is better than| ç©ºæ ¼than|
    |(?&lt;=[subpattern])|better than| ç©ºæ ¼than|

    ![idontunderstand-2021-11-03](https://cdn.jsdelivr.net/gh/cat-note/bottleassets@latest/img/idontunderstand-2021-11-03.jpg)

    æ ¹æ®ä¸Šé¢çš„ç»“æœæ€»ç»“ä¸€ä¸‹ï¼š  

    1. ```(?&lt;=[pattern])```å’Œ```(?=[pattern])```æ˜¯åŒ¹é…åˆ°äº†[pattern]**ä¸ä¼šè¿”å›ã€äº¦ä¸ä¼šè®°å½•ï¼ˆæ•è·ï¼‰[pattern]å­æ¨¡å¼**ï¼Œæ‰€ä»¥åœ¨ä¸Šé¢ä¾‹å­ä¸­æ•´ä¸ªæ¨¡å¼çš„åŒ¹é…ç»“æœä¸­æ²¡æœ‰ ```isç©ºæ ¼```ã€‚

    2. ```(?:[pattern])```æ˜¯åŒ¹é…åˆ°äº†[pattern]**ä¼šè¿”å›ï¼Œä½†ä¸ä¼šè®°å½•ï¼ˆæ•è·ï¼‰[pattern]å­æ¨¡å¼**ï¼Œæ‰€ä»¥åœ¨ä¸Šé¢ä¾‹å­ä¸­æ•´ä¸ªçš„åŒ¹é…ç»“æœä¸­æœ‰ ```isç©ºæ ¼```ã€‚

    3. ```(?:[pattern])```ï¼Œ```(?&lt;=[pattern])```ï¼Œ```(?=[pattern])``` çš„å…±åŒç‚¹æ˜¯ **éƒ½ä¸ä¼šè®°å½•[pattern]å­æ¨¡å¼ï¼ˆå­ç»„ï¼‰**ï¼Œæ‰€ä»¥ä¸Šé¢ä¾‹å­ä¸­```group(1)```æ‰¾åˆ°çš„**ç¬¬1ä¸ªç»„**çš„å†…å®¹æ˜¯```(\sthan)```åŒ¹é…åˆ°çš„```ç©ºæ ¼than```ã€‚

    &lt;/details&gt;


## åŸºæœ¬è¯­æ³•ç›¸å…³  

* ### éè´ªå©ªæ¨¡å¼  

    &lt;details&gt;
    &lt;summary&gt;å±•å¼€é˜…è¯»&lt;/summary&gt;

    ------

    è¦å®ç°æ‰¾å‡º**å­—ç¬¦ä¸²ä¸­äººåå§“æ°å’Œå¯¹åº”çš„ç”µè¯åˆ†æœºç **ï¼Œæˆ‘ä¼šè¿™æ ·å†™ï¼š  

    ```python
    import re
    s = &#039;Dr.David Jone,Ophthalmology,x2441 \
    Ms.Cindy Harriman,Registry,x6231 \
    Mr.Chester Addams,Mortuary,x6231 \
    Dr.Hawkeye Pierce,Surgery,x0986&#039;
    pattern = re.compile(r&#039;(?&lt;=\s)([A-Za-z]*)(?=,).*?(?&lt;=x)(\d{4})&#039;)
    print(pattern.findall(s))
    # [(&#039;Jone&#039;, &#039;2441&#039;), (&#039;Harriman&#039;, &#039;6231&#039;), (&#039;Addams&#039;, &#039;6231&#039;), (&#039;Pierce&#039;, &#039;0986&#039;)]
    ```

    ä¸»è¦æ€è·¯æ˜¯**å‰é¢çš„æ¨¡å¼**æ ¹æ®ç©ºæ ¼å’Œé€—å·å…ˆåŒ¹é…åˆ°å§“ï¼Œ**åé¢çš„æ¨¡å¼**é€šè¿‡xå¼€å¤´å’Œ```\d{4}```åŒ¹é…åˆ°å››ä½ç”µè¯åˆ†æœºç ã€‚

    **å‰é¢å’Œåé¢**çš„æ¨¡å¼ä¹‹é—´æˆ‘æœ€å¼€å§‹å†™çš„æ˜¯```.*```ï¼Œ```*```å…ƒå­—ç¬¦ä¼šå°†```.```çš„åŒ¹é…é‡å¤0æ¬¡æˆ–å¤šæ¬¡ï¼Œç„¶åæˆ‘ä»¬å°±å¾—åˆ°äº†è¿™æ ·çš„åŒ¹é…ç»“æœï¼š```[(&#039;Jone&#039;, &#039;0986&#039;)]```ï¼ˆç›´æ¥ä¸€æ­¥åˆ°ä½äº†å–‚ï¼(#`Oâ€²)  

    å…ƒå­—ç¬¦è¡¨æˆ‘å¥½æ­¹è¿˜æ˜¯çœ‹äº†å‡ æ¬¡çš„ï¼Œèƒ½åˆ¶æ­¢è¿™ç§è´ªå©ªåŒ¹é…çš„ç¬¦å·å°±æ˜¯```?```äº†ï¼Œä½†å› ä¸ºæˆ‘è®°å¾—```?```éè´ªå©ªçš„è¡¨ç°æ˜¯```åŒ¹é…å°½å¯èƒ½çŸ­çš„å­—ç¬¦ä¸²```ï¼Œå†æƒ³äº†ä¸€ä¸‹```*```å…ƒå­—ç¬¦é‡å¤åŒ¹é…æ¬¡æ•°æœ€å°‘ä¸æ˜¯0æ¬¡å˜›ï¼é‚£è¿™é—®å·å¯ä¸èƒ½åŠ åœ¨```.*```åé¢äº†ï¼  

    ç„¶åæˆ‘å°±è¯•äº†ä¸‹é¢å‡ ç§ï¼š

    ```
    (?&lt;=\s)([A-Za-z]*)(?=,).*(?&lt;=x)(\d{4})?
    (?&lt;=\s)([A-Za-z]*)(?=,).*(?&lt;=x)?(\d{4})?
    (?&lt;=\s)([A-Za-z]*)(?=,).*(?&lt;=x)?(\d{4})
    (?&lt;=\s)([A-Za-z]*)(?=,).*(?&lt;=x)(\d{4})\s
    (?&lt;=\s)([A-Za-z]*)(?=,).*(?&lt;=x)(\d{4})?\s
    ```

    å½“ç„¶è¿™äº›æ¨¡å¼åŒ¹é…çš„ç»“æœéƒ½æ²¡èƒ½å¦‚æˆ‘æ„¿ï¼Œå®åœ¨å¿ä¸ä½äº†ï¼Œæˆ‘è¿˜æ˜¯æŠŠä¸­é—´éƒ¨åˆ†æ”¹æˆäº†```.*?```ï¼Œç„¶åå°±æˆäº†ï¼  

    ![wahhhhh-2021-11-03](https://cdn.jsdelivr.net/gh/cat-note/bottleassets@latest/img/wahhhhh-2021-11-03.jpg)  

    ```
    (?&lt;=\s)([A-Za-z]*)(?=,).*?(?&lt;=x)(\d{4})
    ```

    æƒ³äº†ä¸€ä¸‹ï¼ŒåŸæ¥æ‰€è°“çš„ **åŒ¹é…å°½å¯èƒ½çŸ­**çš„å­—ç¬¦ä¸² **å¹¶ä¸æ˜¯**ä»å…ƒå­—ç¬¦çš„åŠŸèƒ½è§’åº¦ä¸Šå»è¯´çš„ã€‚  

    å°±```2between1and3```è¿™ä¸ªå­—ç¬¦ä¸²æ¥è¯´ï¼š

    * å¦‚æœæˆ‘å•ç‹¬å†™ä¸€ä¸ª```.*?```è¿›è¡ŒåŒ¹é…ï¼Œå°±ä¼š**åŒ¹é…ä¸ªå¯‚å¯**ï¼Œ  

    * ä½†å¦‚æœæˆ‘åœ¨ä¸¤è¾¹åŠ ä¸Šé™å®šï¼š```\d+.*?\d+```ï¼ˆ```.*?```åŒ¹é…çš„å†…å®¹å¿…é¡»åœ¨æ•°å­—åŒ…å¤¹ä¹‹ä¸­ï¼‰ï¼Œ
    
    * è‹¥ä¸º```.*```è´ªå©ªæ¨¡å¼ï¼ŒåŒ¹é…ç»“æœä¼šæ˜¯```between1and```ï¼Œä½†æ­£å› ä¸ºæ˜¯```.*?éè´ªå©ªæ¨¡å¼```ï¼ŒåŒ¹é…çš„æ˜¯ **ç»“æœå­—ç¬¦ä¸²å®½åº¦æ›´å°** çš„éƒ¨åˆ† ```between```ã€‚

    ç»¼ä¸Šï¼Œéè´ªå©ªæŒ‡çš„æ˜¯åœ¨ **ç¬¦åˆå½“å‰æ¨¡å¼çš„æƒ…å†µä¸‹** ä½¿å¾—æœ€ç»ˆåŒ¹é…ç»“æœ **å°½å¯èƒ½åœ°çŸ­**ã€‚ 
    
    åœ¨ä½¿ç”¨éè´ªå©ªæ¨¡å¼```?```ç¬¦å·æ—¶è¦è€ƒè™‘ **è¯­å¢ƒ** ï¼Œç»“åˆä¸Šä¸‹æ–‡å»è®¾è®¡åŠŸèƒ½ã€‚

    &lt;/details&gt;

* ### ä¸­æ‹¬å·ä¸­çš„å…ƒå­—ç¬¦  

    &lt;details&gt;
    &lt;summary&gt;å±•å¼€é˜…è¯»&lt;/summary&gt;

    ------

    å†™è¿™ä¸€èŠ‚æ˜¯å› ä¸ºPythonè¯¾è€å¸ˆè¯´ä¸­æ‹¬å·[]é‡Œçš„å…ƒå­—ç¬¦éƒ½åªæ˜¯è¢«å½“ä½œæ™®é€šå­—ç¬¦æ¥çœ‹å¾…äº†ï¼Œç„¶é¹…ï¼Œåœ¨åšå®éªŒçš„æ—¶å€™æˆ‘å‘ç°å¹¶ä¸æ˜¯è¿™æ ·ã€‚(ãƒ»Îµãƒ»ï½€)    

    çœ‹çœ‹è¿™ä¸ª**åŒ¹é…å•ä¸ªPythonæ ‡è¯†ç¬¦**çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š  

    ```python
    ^\D[\w]*
    # Pythonæ ‡è¯†ç¬¦å¼€å¤´ä¸èƒ½æ˜¯æ•°å­—
    ```

    è¿™ä¸ªæ¨¡å¼èƒ½é¡ºåˆ©åŒ¹é…```hello_world2```ï¼Œ```_hey_there```è¿™ä¸€ç±»å­—ç¬¦ä¸²ã€‚ç­‰ç­‰ï¼Œè¿™æ ·çš„è¯ä¸å°±ä»£è¡¨```\w```è¿™ç§å…ƒå­—ç¬¦å¯ä»¥åœ¨```[]```ä¸­ç”¨äº†å˜›ï¼  

    æˆ‘ä»¬å†è¯•è¯•è¿™äº›ï¼š
    ```python
    ^\D[z\wza]* # ä»ç„¶å¯ä»¥åŒ¹é…æ ‡è¯†ç¬¦ï¼Œ\wçœŸçš„èµ·äº†ä½œç”¨
    ^\D[z\dza]* # å¯ä»¥åŒ¹é… hz2333aï¼Œ\dä¹Ÿèµ·äº†ä½œç”¨
    ^\D[z\nza]* # å¯ä»¥åŒ¹é…åˆ°å¸¦æ¢è¡Œç¬¦çš„ hz\naaaï¼Œ\nä¹Ÿèµ·äº†ä½œç”¨
    ```

    å¾ˆå®¹æ˜“èƒ½å‘ç°```\w```ï¼Œ```\s```ï¼Œ```\n```ï¼Œ```\v```ï¼Œ```\t```ï¼Œ```\r```ä¸€ç±»å…ƒå­—ç¬¦å…¶å®éƒ½æ˜¯å¯ä»¥åœ¨ä¸­æ‹¬å·```[]```ä¸­æ­£å¸¸å‘æŒ¥ **å…ƒå­—ç¬¦çš„ä½œç”¨** çš„ï¼Œå…¶ä»–è¿˜æœ‰```\b```ç­‰å…ƒå­—ç¬¦ã€‚åœ¨**ä¸­æ‹¬å·ä¸­**ä½¿ç”¨ä»–ä»¬æ— éæ˜¯ **æœ‰æ²¡æœ‰æ„ä¹‰** çš„é—®é¢˜ï¼ŒPythonå¹¶ä¸ä¼šæŠ¥é”™ã€‚  

    ![thinking-2021-11-03](https://cdn.jsdelivr.net/gh/cat-note/bottleassets@latest/img/thinking-2021-11-03.jpg)

    é‚£ä¹ˆå†è¯•è¯•è¿™äº›å§ï¼š  

    ```python
    ^\D[\w+]* # èƒ½åŒ¹é…åˆ° hello+world  
    ^\D[\w+*]* # èƒ½åŒ¹é…åˆ° hello+world*2
    ^\D[\w+*?]* # èƒ½åŒ¹é…åˆ° hello+wo?rld*2
    ^\D[(\w+*)]* # èƒ½åŒ¹é…åˆ° hello+(world)*2
    ^\D[(\w{1,3}+*)]* # èƒ½åŒ¹é…åˆ° hello+(world)*2,{1,3}  
    ^\D[\w$]* # èƒ½åŒ¹é…åˆ° hello$world
    ^\D[\(\w\*\?\\)\$]* # èƒ½åŒ¹é…åˆ°hello$wor\ld*?  
    ```

    åˆ°äº†è¿™é‡Œï¼Œæˆ‘å‘ç°è€å¸ˆè¯´çš„åœ¨```[]```ä¸­**è¢«å½“ä½œæ™®é€šå­—ç¬¦**çš„å…ƒå­—ç¬¦åªæ˜¯ä¸€éƒ¨åˆ†ç½¢äº†ï¼Œä¸»è¦æ˜¯ ```*```ï¼Œ```?```ï¼Œ```+```ï¼Œ```{}```ï¼Œ```()```ï¼Œ```$``` è¿™äº›å…ƒå­—ç¬¦ã€‚  

    ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºæ¥ï¼Œä¸­æ‹¬å·é‡Œè¿™äº›å…ƒå­—ç¬¦ç›¸å½“äºï¼š ```\*```ï¼Œ```\?```ï¼Œ```\+```ï¼Œ```\{\}```ï¼Œ```\(\)```ï¼Œ```\$``` 

    **é€‚ç”¨äº**ä¸­æ‹¬å·```[]```çš„å…ƒå­—ç¬¦ä¸»è¦æœ‰ä¸¤ä¸ªï¼š```^``` é€†å‘ç¬¦ï¼Œ```-``` èŒƒå›´æŒ‡å®šç¬¦ï¼Œæ¯”å¦‚ï¼š

    ```
    [^a-z]
    ```  

    åŒ¹é…çš„å°±æ˜¯a-zå°å†™å­—æ¯é›†**ä¹‹å¤–**çš„éšæ„ä¸€ä¸ªå­—ç¬¦ã€‚

    **æ€»ç»“**ä¸€ä¸‹ï¼š

    1. ```\w```ï¼Œ```\s```ï¼Œ```\n```ï¼Œ```\v```ï¼Œ```\t```ï¼Œ```\r```ï¼Œ... **ä¸€ç±»**å…ƒå­—ç¬¦ä¸å…¶ç›¸åæ„ä¹‰ï¼ˆä¾‹å¦‚```\w```å¯¹```\W```ï¼‰çš„å…ƒå­—ç¬¦æ˜¯å®Œå…¨å¯ä»¥ä½¿ç”¨åœ¨```[]```ä¸­çš„ï¼Œæ— éæ˜¯æœ‰æ²¡æœ‰æ„ä¹‰çš„é—®é¢˜ã€‚  

    2.  ```*```ï¼Œ```?```ï¼Œ```+```ï¼Œ```{}```ï¼Œ```()```ï¼Œ```$``` ï¼Œ... **ä¸€ç±»**å…¶ä»–ç¬¦å·å…ƒå­—ç¬¦ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨```[]```ä¸­ï¼Œå…¨è¢«å½“ä½œ **æ™®é€šå­—ç¬¦** å¯¹å¾…ã€‚  

    3. ä¸­æ‹¬å·é‡Œç”¨ä¸Šè¿°çš„å…ƒå­—ç¬¦Pythonéƒ½**ä¸ä¼šæŠ¥é”™**ï¼Œè¯·æ”¾å¿ƒ~â‚â‚Ù©( á› )Û¶â‚â‚  

    &lt;/details&gt;

* ### å­æ¨¡å¼å¼•ç”¨æ–¹æ³•\num  

    &lt;details&gt;
    &lt;summary&gt;å±•å¼€é˜…è¯»&lt;/summary&gt;

    -------

    æ•™æä¸Šåˆ—å­æ¨¡å¼åŠŸèƒ½æ—¶æäº†ä¸€ä¸‹```\num```è¿™ä¸ªç”¨æ³•ï¼Œä½†çœŸçš„åªæ˜¯æäº†ä¸€ä¸‹ï¼š

    &gt; æ­¤å¤„çš„numæ˜¯æŒ‡ä¸€ä¸ªè¡¨ç¤ºå­æ¨¡å¼åºå·çš„æ­£æ•´æ•°ã€‚ä¾‹å¦‚ï¼Œ&quot;(.)\1&quot;åŒ¹é…ä¸¤ä¸ªè¿ç»­çš„ç›¸åŒå­—ç¬¦  

    ![whattheheck-2021-11-03](https://cdn.jsdelivr.net/gh/cat-note/bottleassets@latest/img/whattheheck-2021-11-03.jpg)  

    åˆšå¼€å§‹æˆ‘æ˜¯çœŸæ²¡æ‡‚è¿™æ˜¯å•¥æ„æ€ï¼Œä»¥ä¸ºæ˜¯é‡å¤å¼•ç”¨å‰é¢çš„å­æ¨¡å¼ï¼š  

    ```python
    (\d)[A-Za-z_]+\1
    ```

    æˆ‘è¯•è¿‡ç”¨è¿™ä¸ªæ¨¡å¼å»å¯¹```12hello3```è¿™ä¸ªå­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…ï¼Œç„¶åè¿”å›äº†ä¸ªå¯‚å¯...  

    ä»€ä¹ˆguiï¼Œè¿™é‡Œçš„```\1```éš¾é“ä¸æ˜¯é‡å¤```(\d)```å†åŒ¹é…ä¸ªæ•°å­—å—ï¼Ÿ  

    éšåæˆ‘æ”¹äº†ä¸€ä¸‹å¾…åŒ¹é…å­—ç¬¦ä¸²ï¼Œå°±æœ‰ç»“æœäº†ï¼š  

    | å¾…åŒ¹é…Str | åŒ¹é…ç»“æœ |
    |:---:|:---:|
    |12hello3| None|
    |12hello1|12hello1|
    |12hello2|2hello2|

    å¥½å®¶ä¼™ï¼ŒåŸæ¥```\num```å¼•ç”¨çš„ **ä¸æ˜¯å­æ¨¡å¼æœ¬èº«**ï¼Œè€Œæ˜¯ **å·²çŸ¥å­æ¨¡å¼çš„åŒ¹é…ç»“æœ**  

    ä¸Šé¢çš„ä¾‹å­ä¸­```(\d)```æ˜¯**ç¬¬1ä¸ª**å­æ¨¡å¼ï¼ŒåŒ¹é…ç»“æœå¦‚æœæ˜¯ **2**ï¼Œé‚£ä¹ˆåé¢```\1```çš„åœ°æ–¹ä¹Ÿä¸€å®šè¦æ˜¯ **2** æ‰ä¼šè¿›è¡ŒåŒ¹é…ï¼Œæˆ‘ä»¬å†æ¥å‡ ä¸ªä¾‹å­ï¼š  

    ```python
    (\d)(\d)[A-Za-z_]+\2\1 # èƒ½åŒ¹é…åˆ° 34hello43
    (\d)(\d)[A-Za-z_]+\1world\2 # èƒ½åŒ¹é…åˆ° 34hello3world4
    (\d)(\d)[A-Za-z_]+\1*world\2 # èƒ½åŒ¹é…åˆ° 34hello33333world4  
    ```  

    ç®€å•æ€»ç»“ï¼š

    1. ```\num``` å¼•ç”¨çš„æ˜¯**å¯¹åº”çš„å­æ¨¡å¼åŒ¹é…çš„ç»“æœ**ï¼Œæ³¨æ„è¿™é‡Œåªèƒ½æ˜¯å­æ¨¡å¼çš„åºå·ã€‚  

    2. å­æ¨¡å¼çš„åºå· **ä»1å¼€å§‹**ã€‚

    3. å¦‚æœä½ éœ€è¦**å¼•ç”¨å·²å‘½åå­æ¨¡å¼çš„åŒ¹é…ç»“æœ**ï¼Œå¯ä»¥ç”¨å­æ¨¡å¼æ‰©å±•è¯­æ³•```(?&lt;å­æ¨¡å¼å&gt;)```å’Œ```(?=å­æ¨¡å¼å)```ï¼Œä¾‹å¦‚ï¼š   

        ```python
        import re
        s = &#039;34hello33333world4&#039;
        pattern = re.compile(r&#039;(?P&lt;f&gt;\d)(\d)[A-Za-z_]+(?P=f)*world\2&#039;)
        print(pattern.match(s).group(0))
        # èƒ½åŒ¹é…åˆ° 34hello33333world4
        ```

        å€¼å¾—æ³¨æ„çš„æ˜¯```(?=å­æ¨¡å¼å)```åŒ¹é…åˆ°çš„å†…å®¹å’Œ```(?&lt;å­æ¨¡å¼å&gt;)```åŒ¹é…åˆ°çš„å†…å®¹æ˜¯ä¸€è‡´çš„ã€‚  

        ```python  
        s = &#039;34hello33533world4&#039;
        pattern = re.compile(r&#039;(?P&lt;f&gt;\d)(\d)[A-Za-z_]+(?P=f)*world\2&#039;)
        pattern.match(s) # è¿”å›Noneï¼Œå› ä¸º(?P=f)*åŒ¹é…çš„æ˜¯å’Œ(?P&lt;f&gt;\d)æ‰€åŒ¹é…çš„ä¸€æ ·çš„å­—ç¬¦ä¸²ã€‚(?P&lt;f&gt;\d)åŒ¹é…åˆ°çš„æ˜¯3ï¼Œè€Œ(?P=f)*å¯»æ‰¾çš„éƒ¨åˆ†33533ä¸­å¤šå‡ºæ¥äº†ä¸€ä¸ª5ï¼Œç”±æ­¤ä¸æ»¡è¶³åŒ¹é…è¦æ±‚ã€‚  
        ```

    4. åœ¨ä¸­æ‹¬å·```[]```ä¸­```\num```æ˜¯æ²¡æœ‰æ•ˆæœçš„ï¼ˆå’Œä¸Šä¸€èŠ‚æ¥ä¸€æ³¢è”åŠ¨ï¼‰ã€‚  

    5. ä¸ºä»€ä¹ˆå†™äº†```\num```å´æ²¡æœ‰æ•ˆæœï¼Œè€ƒè™‘ä¸€ä¸‹æ˜¯ä¸æ˜¯[æ²¡ç”¨åŸç”Ÿå­—ç¬¦ä¸²](#ä½¿ç”¨åŸç”Ÿå­—ç¬¦ä¸²)çš„é—®é¢˜ã€‚  

    &lt;/details&gt;

## reæ¨¡å—ä¿®é¥°ç¬¦

* ### å¦‚ä½•åŒæ—¶ä½¿ç”¨å¤šä¸ªflags    

    &lt;details&gt;
    &lt;summary&gt;å±•å¼€é˜…è¯»&lt;/summary&gt;

    -------

    åƒ```re.compile```ï¼Œ```re.search```ï¼Œ```re.match```ï¼Œ```re.findall```è¿™å‡ ä¸ªå‡½æ•°éƒ½å…è®¸ä¿®é¥°ç¬¦flagsä½œä¸ºå‚æ•°ï¼Œæˆ‘ä»¬æ‹¿```re.compile```ä¸¾ä¾‹ï¼š  

    ```python
    import re
    s=&#039;&#039;&#039;Hello line1
    hello line2
    hello line3
    &#039;&#039;&#039;
    pattern=re.compile(&#039;^hElLo&#039;,re.I)
    print(pattern.findall(s))
    ```

    è¿™ä¸å¾—åŠ²å•Šï¼æˆ‘æƒ³è¿›è¡Œ```å¤šè¡ŒåŒ¹é…```åˆæƒ³ä¿è¯```å¿½ç•¥å¤§å°å†™```æ€ä¹ˆåŠï¼Ÿ(ï¿£â–½ï¿£)&quot;  

    å½³äºï¼Œé‚£å°±è¿™æ ·å†™ï¼  

    ```python
    pattern=re.compile(&#039;^hElLo&#039;,re.I | re.M)
    ```

    è¿™é‡Œçš„ ```|``` å¯ä»¥ç§°ä½œä¸€ä¸ª ```ç®¡é“ç¬¦(ä¼¼ä¹æ˜¯Shellé‡Œçš„å«æ³•)```ã€‚åå­—å•¥çš„å€’æ— æ‰€è°“äº†ï¼Œä½¿ç”¨äº†è¿™ä¸ªç¬¦å·æˆ‘ä»¬å°±èƒ½ä½¿ç”¨å¤šä¸ªæ ‡å¿—å•¦ï¼ï¼ˆè™½ç„¶é€šå¸¸æƒ…å†µä¸‹ä¸ä¼šä½¿ç”¨è¶…è¿‡ä¸¤ä¸ªï¼‰  

    æˆ‘å£å‘³åˆé’»ï¼Œæˆ‘åä¸ç”¨ ```|``` ç¬¦ï¼Œå“¼ï¼(ï¿¢ï¸¿ï¿¢)

    å¥½å•Šï¼Œæ²¡é—®é¢˜å•Šï¼é‚£æˆ‘ä»¬å…ˆå»å­æ¨¡å¼ä¹°ç‚¹**æ‰©å±•è¯­æ³•**!  

    ![noproblemo-2021-11-03](https://cdn.jsdelivr.net/gh/cat-note/bottleassets@latest/img/noproblemo-2021-11-03.jpg)  

    åœ¨Pythoné‡Œè¿˜æœ‰ä¸ªå­æ¨¡å¼æ‰©å±•è¯­æ³•å¯ä»¥ç»™**æ•´ä¸ªæ¨¡å—åº”ç”¨**å¤šä¸ªä¿®é¥°ç¬¦(flags)ï¼Œå®ƒå°±æ˜¯ ```(?ä¿®é¥°ç¬¦ä»¬)```ï¼š  

    ```python
    pattern=re.compile(&#039;(?im)^hElLo&#039;) # i-&gt;å¿½ç•¥å¤§å°å†™ï¼Œm-&gt;å¤šè¡ŒåŒ¹é…
    pattern=re.compile(&#039;(?sm)^hElLo&#039;) # s-&gt;æ¢è¡Œç¬¦è¯†åˆ«ï¼Œm-&gt;å¤šè¡ŒåŒ¹é…
    ```

    å€¼å¾—æ³¨æ„çš„æ˜¯è¿™ä¸ªå­æ¨¡å¼æ‰©å±•è¯­æ³•è¯·æœ€å¥½æ”¾åœ¨ **æ•´ä¸ªæ¨¡å¼çš„æœ€å‰é¢**ï¼Œä¸ç„¶Pythonä¼šæŠ¥â€œä¸å»ºè®®â€è­¦å‘Šï¼š```DeprecationWarning: Flags not at the start of the expression```.  

    &lt;/details&gt;

* ### å¸¸ç”¨çš„å‡ ä¸ªä¿®é¥°ç¬¦  

    &lt;details&gt;
    &lt;summary&gt;å±•å¼€é˜…è¯»&lt;/summary&gt;

    -------

    |ä¿®é¥°ç¬¦|åŠŸèƒ½|
    |:---:|:---:|
    |re.S|è®©å…ƒå­—ç¬¦```.```æ”¯æŒæ¢è¡Œç¬¦```\n```|
    |re.M|å¯¹å¤šè¡Œè¿›è¡ŒåŒ¹é…ï¼Œå¯¹å…ƒå­—ç¬¦```^```å’Œ```$```æœ‰å½±å“|
    |re.I|åŒ¹é…æ—¶å¿½ç•¥å¤§å°å†™|
    |re.X|å…è®¸æ¨¡å¼ä¸­æœ‰ç©ºæ ¼å’Œå¤šè¡Œï¼Œæ–¹ä¾¿é˜…è¯»|

    æ³¨ï¼šPython3é‡Œé¢**æ²¡æœ‰re.U**ã€‚

    åœ¨ä¸¾ä¾‹ä¹‹å‰å…ˆæ¥ä¸ªè®°å¿†æ–¹æ³•ï¼š

    * ```re.S```å’Œå…ƒå­—ç¬¦```.```æœ‰å…³ï¼Œå¯ä»¥èƒŒ```.S```ï¼Œæ‰©å†™æˆå•è¯èƒŒæˆ```DOT SEARCH```ï¼Œä»£è¡¨è¿™ä¸ªåŒ¹é…å’Œç‚¹å…ƒå­—ç¬¦æœ‰å…³ã€‚  

    * ```re.I```æ˜¯å¿½ç•¥å¤§å°å†™ï¼Œç›´æ¥å­—é¢æ„æ€èƒŒæˆ```IGNORE CASE```å³å¯ã€‚

    * ```re.M```æ˜¯å¤šè¡ŒåŒ¹é…ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å­—é¢æ„æ€èƒŒæˆ```MULTILINE```ã€‚

    * ```re.X```å˜›...æƒ³ä¸åˆ°äº†ï¼Œå°±æ­»èƒŒå§(ãƒã¸ï¿£ã€)  

    å…ˆä»```re.I```å¼€å§‹ï¼Œè¿™ä¸€ä¸ªå…¶å®å°±æ˜¯è®©æ¨¡å¼**å¿½ç•¥å¤§å°å†™å»è¿›è¡ŒåŒ¹é…**ï¼š  

    ```python
    import re
    s=&#039;&#039;&#039;Hello line1
    hello line2
    hello line3
    &#039;&#039;&#039;
    pattern=re.compile(&#039;hElLo&#039;)
    print(pattern.findall(s)) # []
    pattern2=re.compile(&#039;hElLo&#039;,re.I)
    print(pattern2.findall(s)) # [&#039;Hello&#039;, &#039;hello&#039;, &#039;hello&#039;]  
    ```

    -----

    ```re.M```çš„è¯ä¸»è¦å½±å“äº†ä¸¤ä¸ªå…ƒå­—ç¬¦çš„åŒ¹é…ï¼š```^```å¼€å¤´åŒ¹é…å’Œ```$```å°¾éƒ¨åŒ¹é…  

    æ™®é€šæƒ…å†µä¸‹ï¼Œ```^```åŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´ï¼Œè€Œ```$```åŒ¹é…çš„æ˜¯ **å•è¡Œå­—ç¬¦ä¸²çš„æœ«å°¾** æˆ–è€… **å¤šè¡Œå­—ç¬¦ä¸²ä¸­æœ€åä¸€è¡Œçš„ç»“å°¾**ã€‚  

    ä½†ä½¿ç”¨äº†```re.M```åï¼Œå¯¹äº**å¤šè¡Œå­—ç¬¦ä¸²**æ¥è¯´ï¼Œ```^```ä¸ä»…åŒ¹é…äº†å­—ç¬¦ä¸²çš„å¼€å¤´ï¼Œè¿˜ **åŒ¹é…äº†æ¯ä¸€è¡Œçš„å¼€å¤´**ï¼›è€Œ```$```ä¹ŸåŒ¹é…äº† **æ¯ä¸€è¡Œçš„ç»“å°¾å’Œå­—ç¬¦ä¸²çš„ç»“å°¾**ï¼Œæ¥ä¸‹æ¥ä¸¾å‡ ä¸ªä¾‹å­ï¼š  

    ![makeexample-2021-11-03](https://cdn.jsdelivr.net/gh/cat-note/bottleassets@latest/img/makeexample-2021-11-03.jpg)  

    ```python
    import re
    s=&#039;&#039;&#039;Hello line1
    hello line2
    hello line3
    &#039;&#039;&#039;
    print( re.findall(&#039;^hElLo\slINe\d&#039;,s,re.I) )
    # [&#039;Hello line1&#039;]
    print( re.findall(&#039;hElLo\slINe\d$&#039;,s,re.I) )
    # [&#039;hello line3&#039;]
    print( re.findall(&#039;^hElLo\slINe\d$&#039;,s,re.I) )
    # []

    print( re.findall(&#039;^hElLo\slINe\d&#039;,s,re.I | re.M) )
    # [&#039;Hello line1&#039;, &#039;hello line2&#039;, &#039;hello line3&#039;]
    print( re.findall(&#039;hElLo\slINe\d$&#039;,s,re.I | re.M) )
    # [&#039;Hello line1&#039;, &#039;hello line2&#039;, &#039;hello line3&#039;]
    print( re.findall(&#039;^hElLo\slINe\d$&#039;,s,re.I | re.M) )
    # [&#039;Hello line1&#039;, &#039;hello line2&#039;, &#039;hello line3&#039;]
    ```

    ------

    **é»˜è®¤æƒ…å†µ**ä¸‹å…ƒå­—ç¬¦ ```.``` åªèƒ½åŒ¹é…**é™¤æ¢è¡Œç¬¦\nä»¥å¤–**çš„ä»»æ„å­—ç¬¦ã€‚

    è€Œ```re.S```è®©å…ƒå­—ç¬¦ ```.``` èƒ½åŒ¹é…åŒ…æ‹¬æ¢è¡Œç¬¦```\n```åœ¨å†…çš„ **æ‰€æœ‰å­—ç¬¦**ï¼

    ä¾‹å­ï¼š  

    ```python
    import re
    s=&#039;&#039;&#039;Hello line1
    hello line2
    hello line3
    &#039;&#039;&#039;
    print( re.findall(&#039;line(.*)hello&#039;,s) )
    # []
    print( re.findall(&#039;line(.*)hello&#039;,s,re.S) )
    # [&#039;1\nhello line2\n&#039;]
    print( re.findall(&#039;line(.*?)hello&#039;,s,re.S) )
    # [&#039;1\n&#039;, &#039;2\n&#039;]
    ```

    ------

    ```re.X```æ˜¯ä¸€ä¸ª**èƒ½å¢åŠ æ­£åˆ™è¡¨è¾¾å¼å¯è¯»æ€§**çš„ä¿®é¥°ç¬¦ï¼Œè®©å†™æ­£åˆ™å˜å¾—æ›´ä¼˜é›…~ ãƒ½(âœ¿ï¾Ÿâ–½ï¾Ÿ)ãƒ  

    ![elegant-2021-11-03](https://cdn.jsdelivr.net/gh/cat-note/bottleassets@latest/img/elegant-2021-11-03.jpg)  

    æˆ‘ä»¬å…ˆç›´æ¥ä¸Šä¾‹å­ï¼š  

    ```python
    import re
    s = &#039;Dr.David Jone,Ophthalmology,x2441 \
    Ms.Cindy Harriman,Registry,x6231 \
    Mr.Chester Addams,Mortuary,x6231 \
    Dr.Hawkeye Pierce,Surgery,x0986&#039;
    pattern = re.compile(r&#039;(?&lt;=\s)([A-Za-z]*)(?=,).*?(?&lt;=x)(\d{4})&#039;)
    print(pattern.findall(s))
    ```  

    æ­£åˆ™è¶Šå¤æ‚ï¼Œåœ¨å•è¡Œé‡Œçš„å¯è¯»æ€§å°±è¶Šå·®ï¼Œè¿™ä¸å½³äºï¼Œæˆ‘ä»¬è¦ä¼˜é›…ï¼(ï¿£_,ï¿£ )ï¼Œäºæ˜¯å¯ä»¥è¿™æ ·å†™ï¼š  

    ```python
    pattern = re.compile(r&#039;&#039;&#039;
    (?&lt;=\s) # æ ¹æ®ç©ºæ ¼åŒ¹é…å§“æ°å¤§æ¦‚ä½ç½®  
    ([A-Za-z]*) # å§“æ°æ˜¯ç”±è‹±æ–‡å­—æ¯ç»„æˆçš„
    (?=,) # å§“æ°åé¢æœ‰ä¸ªé€—å·  
    .*? # åŒ¹é…å§“æ°å’Œç”µè¯åˆ†æœºå·ä¹‹é—´çš„å†…å®¹
    (?&lt;=x) # æ‰¾åˆ°ç”µè¯åˆ†æœºå·å…±åŒå‰ç¼€x
    (\d{4}) # ç”µè¯åˆ†æœºå·ä¸€å¾‹æ˜¯4ä½
    &#039;&#039;&#039;, re.X)
    ```

    å°±å·®ä¸€ä¸ªçº¢é…’æ¯ğŸ·äº†æœ‰æœ¨æœ‰ï¼Œä¼˜é›…å¤šäº†ï¼å¯è¯»æ€§å¤§å¹…å¢åŠ o(*â‰§â–½â‰¦)ãƒ„  

    ç”±ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œ```re.X```å¿½ç•¥äº†å¤šè¡Œæ¨¡å¼ä¸­çš„**ç©ºç™½ã€æ¢è¡Œå’Œ#ç­‰å­—ç¬¦**ã€‚

    è¿™é‡Œæ”¾ä¸€æ®µå®˜æ–¹æ–‡æ¡£å¯¹äº```re.X```çš„æè¿°ï¼š  

    &gt;  Whitespace within the pattern is ignored, except when in a character class, or when preceded by an unescaped backslash, or within tokens like *?, (?: or (?P&lt;...&gt;. When a line contains a # that is not in a character class and is not preceded by an unescaped backslash, all characters from the leftmost such # through the end of the line are ignored.  

    ä¹Ÿå°±æ˜¯è¯´ç©ºæ ¼çš„å¿½ç•¥ä¹Ÿæœ‰**ä¾‹å¤–**ï¼š

    1. å½“ç©ºæ ¼åœ¨å­—ç¬¦ç»„(character class)ï¼Œä¹Ÿå°±æ˜¯ä¸­æ‹¬å·```[]```é‡Œçš„æ—¶å€™ï¼Œ**ä¸ä¼š**è¢«å¿½ç•¥ã€‚  

        ```python
        import re
        s = &#039;&#039;&#039;Dr.David Jone,Ophthalmology,x2441 
        Ms.Cindy Harriman,Registry,x6231 
        Mr.Chester Addams,Mortuary,x6231 
        Dr.Hawkeye Pierce,Surgery,x0986&#039;&#039;&#039;
        # æˆ‘ä»¬ç”¨ ä¸ä¼šå¿½ç•¥ä¸­æ‹¬å·å†…çš„ç©ºæ ¼ è¿™ä¸ªç‰¹æ€§æ¥åŒ¹é…ä¸Šé¢å­—ç¬¦ä¸²ä¸­çš„äººåï¼Œå¦‚Dr.David Jone

        print(re.findall(r&#039;&#039;&#039;
        ^[a-zA-Z.]*?
        [\w]* # ä¸­æ‹¬å·é‡Œæ²¡æœ‰ç©ºæ ¼
        (?=,) 
        &#039;&#039;&#039;, s, re.X | re.M))
        # ä¸€ä¸ªéƒ½åŒ¹é…ä¸ä¸Š

        print(re.findall(r&#039;&#039;&#039;
        ^[a-zA-Z.]*?
        [ \w]* # ä¸­æ‹¬å·é‡Œæœ‰ç©ºæ ¼
        (?=,) 
        &#039;&#039;&#039;, s, re.X | re.M))
        # èƒ½å¤ŸåŒ¹é…ä¸Š:[&#039;Dr.David Jone&#039;, &#039;Ms.Cindy Harriman&#039;, &#039;Mr.Chester Addams&#039;, &#039;Dr.Hawkeye Pierce&#039;]
        ```

    2. å½“æ¨¡å¼ä¸­çš„**ç©ºæ ¼**å‰é¢æœ‰**è½¬ä¹‰æ–œæ ```\```**ï¼Œè¿™ä¸ªç©ºæ ¼**ä¸ä¼š**è¢«å¿½ç•¥ã€‚

        ```python
        import re
        s = &#039;&#039;&#039;Dr.David Jone,Ophthalmology,x2441 
        Ms.Cindy Harriman,Registry,x6231 
        Mr.Chester Addams,Mortuary,x6231 
        Dr.Hawkeye Pierce,Surgery,x0986&#039;&#039;&#039;
        # æˆ‘ä»¬ç”¨ ä¸ä¼šå¿½ç•¥ä¸­æ‹¬å·å†…çš„ç©ºæ ¼ è¿™ä¸ªç‰¹æ€§æ¥åŒ¹é…ä¸Šé¢å­—ç¬¦ä¸²ä¸­çš„äººåï¼Œå¦‚Dr.David Jone
        print(re.findall(r&#039;&#039;&#039;
        ^[a-zA-Z.]*?
        # è¿™å„¿åªæœ‰ä¸ªæ™®é€šçš„ç©ºæ ¼
        [\w]* 
        (?=,) 
        &#039;&#039;&#039;, s, re.X | re.M))
        # ä¸€ä¸ªéƒ½åŒ¹é…ä¸ä¸Š

        print(re.findall(r&#039;&#039;&#039;
        ^[a-zA-Z.]*?
        \ # è¿™å„¿æœ‰ä¸ªè¢«è½¬ä¹‰çš„ç©ºæ ¼
        [\w]* 
        (?=,) 
        &#039;&#039;&#039;, s, re.X | re.M))
        # åŒ¹é…ä¸Šäº†ï¼š[&#039;Dr.David Jone&#039;, &#039;Ms.Cindy Harriman&#039;, &#039;Mr.Chester Addams&#039;, &#039;Dr.Hawkeye Pierce&#039;]
        ```

    3. å½“ç©ºæ ¼åœ¨```*?```ï¼Œ```(?:```ï¼Œ```(?P&lt;...&gt;```è¿™ç§è¯­æ³•é‡Œæ—¶ï¼Œ**ä¸ä¼š**è¢«å¿½ç•¥ã€‚ç»è¿‡æµ‹è¯•ï¼Œæˆ‘è§‰å¾—è¿™ä¸€æ¡å’Œä¸Šä¸€æ¡è½¬ä¹‰ä¸ä¼šè¢«å¿½ç•¥å…¶å®æ˜¯ä¸€ä¸ªé“ç†ï¼ˆå®˜æ–¹æ–‡æ¡£ä¹Ÿæ²¡å†™çš„å¾ˆè¯¦ç»†ï¼‰ã€‚æµ‹è¯•ä¸­ï¼Œè¿™æ ·å†™ä¸ä¼šè¢«å¿½ç•¥ï¼š  

        ```
        \ *?
        (?:\ )
        (?P&lt;...&gt;\ )
        ```

        å¾ˆæ˜æ˜¾èƒ½å‘ç°å®é™…ä¸Šè¿˜æ˜¯ **ç©ºæ ¼è½¬ä¹‰**ï¼Œå½“ç„¶ä¹Ÿæœ‰å¯èƒ½æ˜¯æˆ‘ç†è§£é”™äº†ã€‚
        
    ä¸ç®¡æ€æ ·ï¼Œè¿™æ ·åŒ¹é…ç©ºæ ¼çš„æ–¹æ³•åœ¨å®é™…æ“ä½œä¸­è‚¯å®šæ˜¯ **éå¸¸å°‘ç”¨** çš„ï¼Œåˆ«äººè¯»è¿™æ ·çš„æ­£åˆ™è¡¨è¾¾å¼æ—¶ä¸€çœ¼æœ›å»è¿˜**çœŸéš¾å‘ç°å“ªä¸ªè§’è½æœ‰æ²¡æœ‰ä¸ªç©ºæ ¼** (#`Oâ€²)  

    å¯¹äº```#```æ³¨é‡Šç¬¦è€Œè¨€æƒ…å†µå°±è¦ç®€å•å¤šäº†ï¼Œåœ¨**æ¨¡å¼ä¸­**åªæœ‰ä¸¤ç§æƒ…å†µ```#```**ä¸ä¼š**è¢«å¿½ç•¥ï¼š  
    1. ```#```å­˜åœ¨äºå­—ç¬¦ç»„(character class)ï¼Œä¹Ÿå°±æ˜¯ä¸­æ‹¬å·```[]```é‡Œçš„æ—¶å€™ã€‚

    2. ```#```è¢«åæ–œæ ```\```è½¬ä¹‰ã€‚  

    &lt;/details&gt;

## After All

æ­£åˆ™è¡¨è¾¾å¼å¹¶ä¸æ˜¯ä»€ä¹ˆæ—¶å€™éƒ½ç”¨å¾—ä¸Šçš„ï¼Œå°¤å…¶æ˜¯å¾ˆå¤šæ—¶å€™**æ­£åˆ™çš„æ•ˆç‡ç›¸å¯¹äºå­—ç¬¦ä¸²å¤„ç†**è¿˜çœŸä¸ç®—å¥½ã€‚

ä½†æ˜¯ï¼Œåœ¨å­—ç¬¦ä¸²å¤„ç†å†™èµ·æ¥éå¸¸ç¹ççš„æƒ…å†µä¸‹ï¼Œæ­£åˆ™çš„ç¡®ä¹Ÿå¸®æˆ‘ä»¬èŠ‚çœäº†ä¸å°‘æ—¶é—´ï¼Œæå‡äº†å·¥ä½œæ•ˆç‡ã€‚  

åœ¨å’±çœ‹æ¥ï¼Œ**æ­£åˆ™è¡¨è¾¾å¼**å’Œ**SQLè¯­å¥**æœ‰ä¸€ä¸ªå…±æ€§ï¼Œå°±æ˜¯å…¶åœ¨å…¶æ‰€å¤„çš„ä½“ç³»ä¸­æ˜¯é€šå¼èˆ¬çš„å­˜åœ¨ï¼šæ­£åˆ™è¡¨è¾¾å¼å‡ ä¹å¯ä»¥åœ¨æ‰€æœ‰ç¼–ç¨‹è¯­è¨€ä¸­è¿›è¡Œä½¿ç”¨ï¼Œè€ŒSQLè¯­å¥ä¹Ÿå¯ä»¥åœ¨æ ‡å‡†åŒ–å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­è¿›è¡Œä½¿ç”¨ã€‚  

![gaitubao_Fjmtb33KUZe-9H0u05lo8I35ilZT-2021-11-03](https://cdn.jsdelivr.net/gh/cat-note/bottleassets@latest/img/gaitubao_Fjmtb33KUZe-9H0u05lo8I35ilZT-2021-11-03.jpg)

æœ¬äººæ–‡ç¬”ä¸ä½³ï¼Œå†™çš„å¯èƒ½æœ‰ç‚¹ç²—ç³™ã€‚å¸Œæœ›è¿™ç¯‡å°è®°å¯¹å¤§å®¶æŒæ¡æ­£åˆ™è¡¨è¾¾å¼æœ‰ä¸€å®šçš„å¸®åŠ©ï¼Œæ„Ÿè°¢å„ä½çš„è€å¿ƒé˜…è¯»ã€‚(ã€€ï¾Ÿâˆ€ï¾Ÿ) ï¾‰â™¡

å¦‚æœåé¢æˆ‘åœ¨å­¦ä¹ **Pythonæ­£åˆ™è¡¨è¾¾å¼**çš„æ—¶å€™æœ‰äº†æ–°çš„å¯è®°å½•çš„ç‚¹ï¼Œæˆ‘ä¼šç»§ç»­æ›´æ–°åœ¨è¿™ç¯‡æ–‡ç« ä¸­ã€‚

To be continued...

&lt;script&gt;/*
bblock.s();
*/&lt;/script&gt;
{(PostContentEnd)}
{(PostTag)}Python,å­¦ä¹ ,å°è®°{(PostTagEnd)}
{(PostID)}280{(PostIDEnd)}
{(PostCover)}none{(PostCoverEnd)}
<div style='display:none;'>{(PageType)}post.otp.html{(PageTypeEnd)}</div>
<script src="./main.js?233"></script>
</body>
</div>
